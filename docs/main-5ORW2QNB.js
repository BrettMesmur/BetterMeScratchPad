var SI=Object.defineProperty,AI=Object.defineProperties;var MI=Object.getOwnPropertyDescriptors;var vs=Object.getOwnPropertySymbols,NI=Object.getPrototypeOf,Pf=Object.prototype.hasOwnProperty,kf=Object.prototype.propertyIsEnumerable,xI=Reflect.get;var Rf=(n,e,t)=>e in n?SI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,E=(n,e)=>{for(var t in e||={})Pf.call(e,t)&&Rf(n,t,e[t]);if(vs)for(var t of vs(e))kf.call(e,t)&&Rf(n,t,e[t]);return n},Y=(n,e)=>AI(n,MI(e));var bc=(n,e)=>{var t={};for(var i in n)Pf.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&vs)for(var i of vs(n))e.indexOf(i)<0&&kf.call(n,i)&&(t[i]=n[i]);return t};var hn=(n,e,t)=>xI(NI(n),t,e);var p=(n,e,t)=>new Promise((i,r)=>{var s=c=>{try{a(t.next(c))}catch(l){r(l)}},o=c=>{try{a(t.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var Of=null;var Tc=1,Sc=Symbol("SIGNAL");function G(n){let e=Of;return Of=n,e}var Ff={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function RI(n){if(!(Nc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Tc)){if(!n.producerMustRecompute(n)&&!Ac(n)){n.dirty=!1,n.lastCleanEpoch=Tc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Tc}}function Lf(n){return n&&(n.nextProducerIndex=0),G(n)}function Vf(n,e){if(G(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Nc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Mc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ac(n){ws(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(RI(t),i!==t.version))return!0}return!1}function jf(n){if(ws(n),Nc(n))for(let e=0;e<n.producerNode.length;e++)Mc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Mc(n,e){if(PI(n),ws(n),n.liveConsumerNode.length===1)for(let i=0;i<n.producerNode.length;i++)Mc(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];ws(r),r.producerIndexOfThis[i]=e}}function Nc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ws(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function PI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function kI(){throw new Error}var OI=kI;function Bf(n){OI=n}function A(n){return typeof n=="function"}function Is(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Es=Is(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fn(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ee=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(A(i))try{i()}catch(s){e=s instanceof Es?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{Uf(s)}catch(o){e=e??[],o instanceof Es?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Es(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Uf(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fn(t,e)}remove(e){let{_finalizers:t}=this;t&&fn(t,e),e instanceof n&&e._removeParent(this)}};ee.EMPTY=(()=>{let n=new ee;return n.closed=!0,n})();var xc=ee.EMPTY;function Ds(n){return n instanceof ee||n&&"closed"in n&&A(n.remove)&&A(n.add)&&A(n.unsubscribe)}function Uf(n){A(n)?n():n.unsubscribe()}var Ye={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Jn={setTimeout(n,e,...t){let{delegate:i}=Jn;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Jn;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Cs(n){Jn.setTimeout(()=>{let{onUnhandledError:e}=Ye;if(e)e(n);else throw n})}function Qi(){}var Hf=Rc("C",void 0,void 0);function $f(n){return Rc("E",void 0,n)}function Wf(n){return Rc("N",n,void 0)}function Rc(n,e,t){return{kind:n,value:e,error:t}}var pn=null;function Xn(n){if(Ye.useDeprecatedSynchronousErrorHandling){let e=!pn;if(e&&(pn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=pn;if(pn=null,t)throw i}}else n()}function Gf(n){Ye.useDeprecatedSynchronousErrorHandling&&pn&&(pn.errorThrown=!0,pn.error=n)}var gn=class extends ee{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ds(e)&&e.add(this)):this.destination=VI}static create(e,t,i){return new ei(e,t,i)}next(e){this.isStopped?kc(Wf(e),this):this._next(e)}error(e){this.isStopped?kc($f(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?kc(Hf,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},FI=Function.prototype.bind;function Pc(n,e){return FI.call(n,e)}var Oc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){bs(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){bs(i)}else bs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){bs(t)}}},ei=class extends gn{constructor(e,t,i){super();let r;if(A(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Ye.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Pc(e.next,s),error:e.error&&Pc(e.error,s),complete:e.complete&&Pc(e.complete,s)}):r=e}this.destination=new Oc(r)}};function bs(n){Ye.useDeprecatedSynchronousErrorHandling?Gf(n):Cs(n)}function LI(n){throw n}function kc(n,e){let{onStoppedNotification:t}=Ye;t&&Jn.setTimeout(()=>t(n,e))}var VI={closed:!0,next:Qi,error:LI,complete:Qi};var ti=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ni(n){return n}function zf(n){return n.length===0?ni:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var K=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=BI(t)?t:new ei(t,i,r);return Xn(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=qf(i),new i((r,s)=>{let o=new ei({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[ti](){return this}pipe(...t){return zf(t)(this)}toPromise(t){return t=qf(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function qf(n){var e;return(e=n??Ye.Promise)!==null&&e!==void 0?e:Promise}function jI(n){return n&&A(n.next)&&A(n.error)&&A(n.complete)}function BI(n){return n&&n instanceof gn||jI(n)&&Ds(n)}function UI(n){return A(n?.lift)}function ce(n){return e=>{if(UI(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(n,e,t,i,r){return new Fc(n,e,t,i,r)}var Fc=class extends gn{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var ii={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:i}=ii;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);let r=e(s=>{t=void 0,n(s)});return new ee(()=>t?.(r))},requestAnimationFrame(...n){let{delegate:e}=ii;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=ii;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var Kf=Is(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var j=(()=>{class n extends K{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Ts(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Kf}next(t){Xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?xc:(this.currentObservers=null,s.push(t),new ee(()=>{this.currentObservers=null,fn(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new K;return t.source=this,t}}return n.create=(e,t)=>new Ts(e,t),n})(),Ts=class extends j{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:xc}};var mn=class extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Lc={now(){return(Lc.delegate||Date).now()},delegate:void 0};var Ss=class extends ee{constructor(e,t){super()}schedule(e,t=0){return this}};var Ji={setInterval(n,e,...t){let{delegate:i}=Ji;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ji;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ri=class extends Ss{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Ji.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Ji.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fn(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var si=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};si.now=Lc.now;var oi=class extends si{constructor(e,t=si.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Xi=new oi(ri),Yf=Xi;var As=class extends ri{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return i!==null&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ii.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);let{actions:s}=e;t!=null&&t===e._scheduled&&((r=s[s.length-1])===null||r===void 0?void 0:r.id)!==t&&(ii.cancelAnimationFrame(t),e._scheduled=void 0)}};var Ms=class extends oi{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:i}=this,r;e=e||i.shift();do if(r=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}};var Ns=new Ms(As);var xs=new K(n=>n.complete());function Rs(n){return n&&A(n.schedule)}function Vc(n){return n[n.length-1]}function Zf(n){return A(Vc(n))?n.pop():void 0}function Vt(n){return Rs(Vc(n))?n.pop():void 0}function Qf(n,e){return typeof Vc(n)=="number"?n.pop():e}function Xf(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function Jf(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _n(n){return this instanceof _n?(this.v=n,this):new _n(n)}function ep(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(g){return Promise.resolve(g).then(f,d)}}function a(f,g){i[f]&&(r[f]=function(_){return new Promise(function(I,x){s.push([f,_,I,x])>1||c(f,_)})},g&&(r[f]=g(r[f])))}function c(f,g){try{l(i[f](g))}catch(_){h(s[0][3],_)}}function l(f){f.value instanceof _n?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,g){f(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function tp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Jf=="function"?Jf(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var ai=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ps(n){return A(n?.then)}function ks(n){return A(n[ti])}function Os(n){return Symbol.asyncIterator&&A(n?.[Symbol.asyncIterator])}function Fs(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function HI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ls=HI();function Vs(n){return A(n?.[Ls])}function js(n){return ep(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield _n(t.read());if(r)return yield _n(void 0);yield yield _n(i)}}finally{t.releaseLock()}})}function Bs(n){return A(n?.getReader)}function le(n){if(n instanceof K)return n;if(n!=null){if(ks(n))return $I(n);if(ai(n))return WI(n);if(Ps(n))return GI(n);if(Os(n))return np(n);if(Vs(n))return zI(n);if(Bs(n))return qI(n)}throw Fs(n)}function $I(n){return new K(e=>{let t=n[ti]();if(A(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function WI(n){return new K(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function GI(n){return new K(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Cs)})}function zI(n){return new K(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function np(n){return new K(e=>{KI(n,e).catch(t=>e.error(t))})}function qI(n){return np(js(n))}function KI(n,e){var t,i,r,s;return Xf(this,void 0,void 0,function*(){try{for(t=tp(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function Fe(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Us(n,e=0){return ce((t,i)=>{t.subscribe(re(i,r=>Fe(i,n,()=>i.next(r),e),()=>Fe(i,n,()=>i.complete(),e),r=>Fe(i,n,()=>i.error(r),e)))})}function Hs(n,e=0){return ce((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function ip(n,e){return le(n).pipe(Hs(e),Us(e))}function rp(n,e){return le(n).pipe(Hs(e),Us(e))}function sp(n,e){return new K(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function op(n,e){return new K(t=>{let i;return Fe(t,e,()=>{i=n[Ls](),Fe(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>A(i?.return)&&i.return()})}function $s(n,e){if(!n)throw new Error("Iterable cannot be null");return new K(t=>{Fe(t,e,()=>{let i=n[Symbol.asyncIterator]();Fe(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function ap(n,e){return $s(js(n),e)}function cp(n,e){if(n!=null){if(ks(n))return ip(n,e);if(ai(n))return sp(n,e);if(Ps(n))return rp(n,e);if(Os(n))return $s(n,e);if(Vs(n))return op(n,e);if(Bs(n))return ap(n,e)}throw Fs(n)}function Ct(n,e){return e?cp(n,e):le(n)}function jc(...n){let e=Vt(n);return Ct(n,e)}function lp(n){return n instanceof Date&&!isNaN(n)}function Ze(n,e){return ce((t,i)=>{let r=0;t.subscribe(re(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:YI}=Array;function ZI(n,e){return YI(e)?n(...e):n(e)}function Ws(n){return Ze(e=>ZI(n,e))}var{isArray:QI}=Array,{getPrototypeOf:JI,prototype:XI,keys:eE}=Object;function up(n){if(n.length===1){let e=n[0];if(QI(e))return{args:e,keys:null};if(tE(e)){let t=eE(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function tE(n){return n&&typeof n=="object"&&JI(n)===XI}function dp(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function hp(n,e,t,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=_=>l<i?g(_):c.push(_),g=_=>{s&&e.next(_),l++;let I=!1;le(t(_,u++)).subscribe(re(e,x=>{r?.(x),s?f(x):e.next(x)},()=>{I=!0},void 0,()=>{if(I)try{for(l--;c.length&&l<i;){let x=c.shift();o?Fe(e,o,()=>g(x)):g(x)}h()}catch(x){e.error(x)}}))};return n.subscribe(re(e,f,()=>{d=!0,h()})),()=>{a?.()}}function er(n,e,t=1/0){return A(e)?er((i,r)=>Ze((s,o)=>e(i,s,r,o))(le(n(i,r))),t):(typeof e=="number"&&(t=e),ce((i,r)=>hp(i,r,n,t)))}function Gs(n=1/0){return er(ni,n)}function fp(){return Gs(1)}function Bc(...n){return fp()(Ct(n,Vt(n)))}function Uc(...n){let e=Zf(n),{args:t,keys:i}=up(n),r=new K(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;le(t[u]).subscribe(re(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?dp(i,a):a),s.complete())}))}});return e?r.pipe(Ws(e)):r}var nE=["addListener","removeListener"],iE=["addEventListener","removeEventListener"],rE=["on","off"];function tr(n,e,t,i){if(A(t)&&(i=t,t=void 0),i)return tr(n,e,t).pipe(Ws(i));let[r,s]=aE(n)?iE.map(o=>a=>n[o](e,a,t)):sE(n)?nE.map(pp(n,e)):oE(n)?rE.map(pp(n,e)):[];if(!r&&ai(n))return er(o=>tr(o,e,t))(le(n));if(!r)throw new TypeError("Invalid event target");return new K(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function pp(n,e){return t=>i=>n[t](e,i)}function sE(n){return A(n.addListener)&&A(n.removeListener)}function oE(n){return A(n.on)&&A(n.off)}function aE(n){return A(n.addEventListener)&&A(n.removeEventListener)}function zs(n=0,e,t=Yf){let i=-1;return e!=null&&(Rs(e)?t=e:i=e),new K(r=>{let s=lp(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Hc(n=0,e=Xi){return n<0&&(n=0),zs(n,n,e)}function nr(...n){let e=Vt(n),t=Qf(n,1/0),i=n;return i.length?i.length===1?le(i[0]):Gs(t)(Ct(i,e)):xs}function $c(n,e){return ce((t,i)=>{let r=0;t.subscribe(re(i,s=>n.call(e,s,r++)&&i.next(s)))})}function gp(n){return ce((e,t)=>{let i=!1,r=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(re(t,l=>{i=!0,r=l,s||le(n(l)).subscribe(s=re(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}function qs(n,e=Xi){return gp(()=>zs(n,e))}function Ks(n){return n<=0?()=>xs:ce((e,t)=>{let i=0;e.subscribe(re(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function ir(...n){let e=Vt(n);return ce((t,i)=>{(e?Bc(n,t,e):Bc(n,t)).subscribe(i)})}function Ys(n,e){return ce((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(re(i,c=>{r?.unsubscribe();let l=0,u=s++;le(n(c,u)).subscribe(r=re(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function yn(n){return ce((e,t)=>{le(n).subscribe(re(t,()=>t.complete(),Qi)),!t.closed&&e.subscribe(t)})}function Wc(n,e,t){let i=A(n)||e||t?{next:n,error:e,complete:t}:n;return i?ce((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(re(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):ni}var cE="https://g.co/ng/security#xss",U=class extends Error{constructor(e,t){super(Wl(e,t)),this.code=e}};function Wl(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function mr(n){return{toString:n}.toString()}var Zs="__parameters__";function lE(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function Xp(n,e,t){return mr(()=>{let i=lE(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Zs)?c[Zs]:Object.defineProperty(c,Zs,{value:[]})[Zs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var rr=globalThis;function te(n){for(let e in n)if(n[e]===te)return e;throw Error("Could not find renamed property on target object.")}function uE(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Pe(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Pe).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function mp(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var dE=te({__forward_ref__:te});function Di(n){return n.__forward_ref__=Di,n.toString=function(){return Pe(this())},n}function be(n){return eg(n)?n():n}function eg(n){return typeof n=="function"&&n.hasOwnProperty(dE)&&n.__forward_ref__===Di}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function je(n){return{providers:n.providers||[],imports:n.imports||[]}}function Gl(n){return _p(n,tg)||_p(n,ng)}function _p(n,e){return n.hasOwnProperty(e)?n[e]:null}function hE(n){let e=n&&(n[tg]||n[ng]);return e||null}function yp(n){return n&&(n.hasOwnProperty(vp)||n.hasOwnProperty(fE))?n[vp]:null}var tg=te({\u0275prov:te}),vp=te({\u0275inj:te}),ng=te({ngInjectableDef:te}),fE=te({ngInjectorDef:te}),R=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ig(n){return n&&!!n.\u0275providers}var pE=te({\u0275cmp:te}),gE=te({\u0275dir:te}),mE=te({\u0275pipe:te});var ro=te({\u0275fac:te}),sr=te({__NG_ELEMENT_ID__:te}),wp=te({__NG_ENV_ID__:te});function zl(n){return typeof n=="string"?n:n==null?"":String(n)}function _E(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():zl(n)}function yE(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new U(-200,n)}function ql(n,e){throw new U(-201,!1)}var L=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(L||{}),ol;function rg(){return ol}function lt(n){let e=ol;return ol=n,e}function sg(n,e,t){let i=Gl(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&L.Optional)return null;if(e!==void 0)return e;ql(n,"Injector")}var vE={},or=vE,al="__NG_DI_FLAG__",so="ngTempTokenPath",wE="ngTokenPath",IE=/\n/gm,EE="\u0275",Ip="__source",hi;function DE(){return hi}function ci(n){let e=hi;return hi=n,e}function CE(n,e=L.Default){if(hi===void 0)throw new U(-203,!1);return hi===null?sg(n,void 0,e):hi.get(n,e&L.Optional?null:void 0,e)}function S(n,e=L.Default){return(rg()||CE)(be(n),e)}function ie(n,e=L.Default){return S(n,Co(e))}function Co(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cl(n){let e=[];for(let t=0;t<n.length;t++){let i=be(n[t]);if(Array.isArray(i)){if(i.length===0)throw new U(900,!1);let r,s=L.Default;for(let o=0;o<i.length;o++){let a=i[o],c=bE(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(S(r,s))}else e.push(S(i))}return e}function og(n,e){return n[al]=e,n.prototype[al]=e,n}function bE(n){return n[al]}function TE(n,e,t,i){let r=n[so];throw e[Ip]&&r.unshift(e[Ip]),n.message=SE(`
`+n.message,r,t,i),n[wE]=r,n[so]=null,n}function SE(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==EE?n.slice(2):n;let r=Pe(e);if(Array.isArray(e))r=e.map(Pe).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Pe(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(IE,`
  `)}`}var ag=og(Xp("Optional"),8);var AE=og(Xp("SkipSelf"),4);function pi(n,e){let t=n.hasOwnProperty(ro);return t?n[ro]:null}function Kl(n,e){n.forEach(t=>Array.isArray(t)?Kl(t,e):e(t))}function cg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function oo(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ME(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function NE(n,e,t){let i=_r(n,e);return i>=0?n[i|1]=t:(i=~i,ME(n,i,e,t)),i}function Gc(n,e){let t=_r(n,e);if(t>=0)return n[t|1]}function _r(n,e){return xE(n,e,1)}function xE(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var gi={},Le=[],ar=new R(""),lg=new R("",-1),ug=new R(""),ao=class{get(e,t=or){if(t===or){let i=new Error(`NullInjectorError: No provider for ${Pe(e)}!`);throw i.name="NullInjectorError",i}return t}},dg=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(dg||{}),ht=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ht||{}),B=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(B||{});function RE(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function ll(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];kE(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function PE(n){return n===3||n===4||n===6}function kE(n){return n.charCodeAt(0)===64}function cr(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?Ep(n,t,r,null,e[++i]):Ep(n,t,r,null,null))}}return n}function Ep(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[s+1]=r);return}else if(i===n[s+1]){n[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),r!==null&&n.splice(s++,0,r)}var hg="ng-template";function OE(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&RE(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(Yl(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Yl(n){return n.type===4&&n.value!==hg}function FE(n,e,t){let i=n.type===4&&!t?hg:n.value;return e===i}function LE(n,e,t){let i=4,r=n.attrs,s=r!==null?BE(r):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Qe(i)&&!Qe(c))return!1;if(o&&Qe(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!FE(n,c,t)||c===""&&e.length===1){if(Qe(i))return!1;o=!0}}else if(i&8){if(r===null||!OE(n,r,c,t)){if(Qe(i))return!1;o=!0}}else{let l=e[++a],u=VE(c,r,Yl(n),t);if(u===-1){if(Qe(i))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&l!==d){if(Qe(i))return!1;o=!0}}}}return Qe(i)||o}function Qe(n){return(n&1)===0}function VE(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return UE(e,n)}function jE(n,e,t=!1){for(let i=0;i<e.length;i++)if(LE(n,e[i],t))return!0;return!1}function BE(n){for(let e=0;e<n.length;e++){let t=n[e];if(PE(t))return e}return n.length}function UE(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function Dp(n,e){return n?":not("+e.trim()+")":e}function HE(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Qe(o)&&(e+=Dp(s,r),r=""),i=o,s=s||!Qe(i);t++}return r!==""&&(e+=Dp(s,r)),e}function $E(n){return n.map(HE).join(",")}function WE(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!Qe(r))break;r=s}i++}return{attrs:e,classes:t}}function yr(n){return mr(()=>{let e=gg(n),t=Y(E({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===dg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ht.Emulated,styles:n.styles||Le,_:null,schemas:n.schemas||null,tView:null,id:""});mg(t);let i=n.dependencies;return t.directiveDefs=bp(i,!1),t.pipeDefs=bp(i,!0),t.id=KE(t),t})}function GE(n){return In(n)||fg(n)}function zE(n){return n!==null}function Be(n){return mr(()=>({type:n.type,bootstrap:n.bootstrap||Le,declarations:n.declarations||Le,imports:n.imports||Le,exports:n.exports||Le,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Cp(n,e){if(n==null)return gi;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a=B.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(t[s]=a!==B.None?[i,a]:i,e[s]=o):t[s]=i}return t}function ve(n){return mr(()=>{let e=gg(n);return mg(e),e})}function In(n){return n[pE]||null}function fg(n){return n[gE]||null}function pg(n){return n[mE]||null}function qE(n){let e=In(n)||fg(n)||pg(n);return e!==null?e.standalone:!1}function gg(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||gi,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Le,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Cp(n.inputs,e),outputs:Cp(n.outputs),debugInfo:null}}function mg(n){n.features?.forEach(e=>e(n))}function bp(n,e){if(!n)return null;let t=e?pg:GE;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(zE)}function KE(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function _g(n){return{\u0275providers:n}}function YE(...n){return{\u0275providers:yg(!0,n),\u0275fromNgModule:!0}}function yg(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return Kl(e,o=>{let a=o;ul(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&vg(r,s),t}function vg(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Zl(r,s=>{e(s,i)})}}function ul(n,e,t,i){if(n=be(n),!n)return!1;let r=null,s=yp(n),o=!s&&In(n);if(!s&&!o){let c=n.ngModule;if(s=yp(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)ul(l,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{Kl(s.imports,u=>{ul(u,e,t,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&vg(l,e)}if(!a){let l=pi(r)||(()=>new r);e({provide:r,useFactory:l,deps:Le},r),e({provide:ug,useValue:r,multi:!0},r),e({provide:ar,useValue:()=>S(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=n;Zl(c,u=>{e(u,l)})}}else return!1;return r!==n&&n.providers!==void 0}function Zl(n,e){for(let t of n)ig(t)&&(t=t.\u0275providers),Array.isArray(t)?Zl(t,e):e(t)}var ZE=te({provide:String,useValue:te});function wg(n){return n!==null&&typeof n=="object"&&ZE in n}function QE(n){return!!(n&&n.useExisting)}function JE(n){return!!(n&&n.useFactory)}function mi(n){return typeof n=="function"}function XE(n){return!!n.useClass}var bo=new R(""),Xs={},eD={},zc;function To(){return zc===void 0&&(zc=new ao),zc}var ft=class{},co=class extends ft{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hl(e,o=>this.processProvider(o)),this.records.set(lg,li(void 0,this)),r.has("environment")&&this.records.set(ft,li(void 0,this));let s=this.records.get(bo);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ug,Le,L.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=ci(this),i=lt(void 0),r;try{return e()}finally{ci(t),lt(i)}}get(e,t=or,i=L.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(wp))return e[wp](this);i=Co(i);let r,s=ci(this),o=lt(void 0);try{if(!(i&L.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=sD(e)&&Gl(e);l&&this.injectableDefInScope(l)?c=li(dl(e),Xs):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&L.Self?To():this.parent;return t=i&L.Optional&&t===or?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[so]=a[so]||[]).unshift(Pe(e)),s)throw a;return TE(a,e,"R3InjectorError",this.source)}else throw a}finally{lt(o),ci(s)}}resolveInjectorInitializers(){let e=G(null),t=ci(this),i=lt(void 0),r;try{let s=this.get(ar,Le,L.Self);for(let o of s)o()}finally{ci(t),lt(i),G(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Pe(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(e){e=be(e);let t=mi(e)?e:be(e&&e.provide),i=nD(e);if(!mi(e)&&e.multi===!0){let r=this.records.get(t);r||(r=li(void 0,Xs,!0),r.factory=()=>cl(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=G(null);try{return t.value===Xs&&(t.value=eD,t.value=t.factory()),typeof t.value=="object"&&t.value&&rD(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{G(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=be(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function dl(n){let e=Gl(n),t=e!==null?e.factory:pi(n);if(t!==null)return t;if(n instanceof R)throw new U(204,!1);if(n instanceof Function)return tD(n);throw new U(204,!1)}function tD(n){if(n.length>0)throw new U(204,!1);let t=hE(n);return t!==null?()=>t.factory(n):()=>new n}function nD(n){if(wg(n))return li(void 0,n.useValue);{let e=Ig(n);return li(e,Xs)}}function Ig(n,e,t){let i;if(mi(n)){let r=be(n);return pi(r)||dl(r)}else if(wg(n))i=()=>be(n.useValue);else if(JE(n))i=()=>n.useFactory(...cl(n.deps||[]));else if(QE(n))i=()=>S(be(n.useExisting));else{let r=be(n&&(n.useClass||n.provide));if(iD(n))i=()=>new r(...cl(n.deps));else return pi(r)||dl(r)}return i}function li(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function iD(n){return!!n.deps}function rD(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function sD(n){return typeof n=="function"||typeof n=="object"&&n instanceof R}function hl(n,e){for(let t of n)Array.isArray(t)?hl(t,e):t&&ig(t)?hl(t.\u0275providers,e):e(t)}function oD(){return rg()!==void 0||DE()!=null}function aD(n){return typeof n=="function"}var At=0,V=1,C=2,ye=3,Je=4,et=5,lo=6,lr=7,Xe=8,_i=9,pt=10,he=11,ur=12,Tp=13,Ci=14,gt=15,So=16,ui=17,yi=18,Ao=19,Eg=20,jt=21,qc=22,En=23,bt=25,Dg=1;var Dn=7,uo=8,ho=9,Ve=10,Ql=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ql||{});function vn(n){return Array.isArray(n)&&typeof n[Dg]=="object"}function Mt(n){return Array.isArray(n)&&n[Dg]===!0}function Jl(n){return(n.flags&4)!==0}function Mo(n){return n.componentOffset>-1}function No(n){return(n.flags&1)===1}function Bt(n){return!!n.template}function cD(n){return(n[C]&512)!==0}var fl=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function Cg(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function An(){return bg}function bg(n){return n.type.prototype.ngOnChanges&&(n.setInput=uD),lD}An.ngInherit=!0;function lD(){let n=Sg(this),e=n?.current;if(e){let t=n.previous;if(t===gi)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function uD(n,e,t,i,r){let s=this.declaredInputs[i],o=Sg(n)||dD(n,{previous:gi,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new fl(l&&l.currentValue,t,c===gi),Cg(n,e,r,t)}var Tg="__ngSimpleChanges__";function Sg(n){return n[Tg]||null}function dD(n,e){return n[Tg]=e}var Sp=null;var ut=function(n,e,t){Sp?.(n,e,t)},hD="svg",fD="math",pD=!1;function gD(){return pD}function mt(n){for(;Array.isArray(n);)n=n[At];return n}function Ag(n,e){return mt(e[n])}function Ue(n,e){return mt(e[n.index])}function Mg(n,e){return n.data[e]}function Ht(n,e){let t=e[n];return vn(t)?t:t[At]}function Xl(n){return(n[C]&128)===128}function mD(n){return Mt(n[ye])}function vi(n,e){return e==null?null:n[e]}function Ng(n){n[ui]=0}function _D(n){n[C]&1024||(n[C]|=1024,Xl(n)&&dr(n))}function yD(n,e){for(;n>0;)e=e[Ci],n--;return e}function eu(n){return!!(n[C]&9216||n[En]?.dirty)}function pl(n){n[pt].changeDetectionScheduler?.notify(1),eu(n)?dr(n):n[C]&64&&(gD()?(n[C]|=1024,dr(n)):n[pt].changeDetectionScheduler?.notify())}function dr(n){n[pt].changeDetectionScheduler?.notify();let e=hr(n);for(;e!==null&&!(e[C]&8192||(e[C]|=8192,!Xl(e)));)e=hr(e)}function xg(n,e){if((n[C]&256)===256)throw new U(911,!1);n[jt]===null&&(n[jt]=[]),n[jt].push(e)}function vD(n,e){if(n[jt]===null)return;let t=n[jt].indexOf(e);t!==-1&&n[jt].splice(t,1)}function hr(n){let e=n[ye];return Mt(e)?e[ye]:e}var F={lFrame:Vg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wD(){return F.lFrame.elementDepthCount}function ID(){F.lFrame.elementDepthCount++}function ED(){F.lFrame.elementDepthCount--}function Rg(){return F.bindingsEnabled}function DD(){return F.skipHydrationRootTNode!==null}function CD(n){return F.skipHydrationRootTNode===n}function bD(){F.skipHydrationRootTNode=null}function ne(){return F.lFrame.lView}function Te(){return F.lFrame.tView}function H(n){return F.lFrame.contextLView=n,n[Xe]}function $(n){return F.lFrame.contextLView=null,n}function Me(){let n=Pg();for(;n!==null&&n.type===64;)n=n.parent;return n}function Pg(){return F.lFrame.currentTNode}function TD(){let n=F.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Mn(n,e){let t=F.lFrame;t.currentTNode=n,t.isParent=e}function tu(){return F.lFrame.isParent}function kg(){F.lFrame.isParent=!1}function SD(n){return F.lFrame.bindingIndex=n}function xo(){return F.lFrame.bindingIndex++}function AD(n){let e=F.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function MD(){return F.lFrame.inI18n}function ND(n,e){let t=F.lFrame;t.bindingIndex=t.bindingRootIndex=n,gl(e)}function xD(){return F.lFrame.currentDirectiveIndex}function gl(n){F.lFrame.currentDirectiveIndex=n}function RD(n){let e=F.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Og(n){F.lFrame.currentQueryIndex=n}function PD(n){let e=n[V];return e.type===2?e.declTNode:e.type===1?n[et]:null}function Fg(n,e,t){if(t&L.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&L.Host);)if(r=PD(s),r===null||(s=s[Ci],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=F.lFrame=Lg();return i.currentTNode=e,i.lView=n,!0}function nu(n){let e=Lg(),t=n[V];F.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Lg(){let n=F.lFrame,e=n===null?null:n.child;return e===null?Vg(n):e}function Vg(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function jg(){let n=F.lFrame;return F.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Bg=jg;function iu(){let n=jg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function kD(n){return(F.lFrame.contextLView=yD(n,F.lFrame.contextLView))[Xe]}function bi(){return F.lFrame.selectedIndex}function Cn(n){F.lFrame.selectedIndex=n}function ru(){let n=F.lFrame;return Mg(n.tView,n.selectedIndex)}function OD(){return F.lFrame.currentNamespace}var Ug=!0;function Ro(){return Ug}function Po(n){Ug=n}function FD(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=bg(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function ko(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function eo(n,e,t){Hg(n,e,3,t)}function to(n,e,t,i){(n[C]&3)===t&&Hg(n,e,t,i)}function Kc(n,e){let t=n[C];(t&3)===e&&(t&=16383,t+=1,n[C]=t)}function Hg(n,e,t,i){let r=i!==void 0?n[ui]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[ui]+=65536),(a<s||s==-1)&&(LD(n,t,e,c),n[ui]=(n[ui]&4294901760)+c+2),c++}function Ap(n,e){ut(4,n,e);let t=G(null);try{e.call(n)}finally{G(t),ut(5,n,e)}}function LD(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[C]>>14<n[ui]>>16&&(n[C]&3)===e&&(n[C]+=16384,Ap(a,s)):Ap(a,s)}var fi=-1,bn=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function VD(n){return n instanceof bn}function jD(n){return(n.flags&8)!==0}function BD(n){return(n.flags&16)!==0}function $g(n){return n!==fi}function fo(n){return n&32767}function UD(n){return n>>16}function po(n,e){let t=UD(n),i=e;for(;t>0;)i=i[Ci],t--;return i}var ml=!0;function Mp(n){let e=ml;return ml=n,e}var HD=256,Wg=HD-1,Gg=5,$D=0,dt={};function WD(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(sr)&&(i=t[sr]),i==null&&(i=t[sr]=$D++);let r=i&Wg,s=1<<r;e.data[n+(r>>Gg)]|=s}function go(n,e){let t=zg(n,e);if(t!==-1)return t;let i=e[V];i.firstCreatePass&&(n.injectorIndex=e.length,Yc(i.data,n),Yc(e,null),Yc(i.blueprint,null));let r=su(n,e),s=n.injectorIndex;if($g(r)){let o=fo(r),a=po(r,e),c=a[V].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Yc(n,e){n.push(0,0,0,0,0,0,0,0,e)}function zg(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function su(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=Qg(r),i===null)return fi;if(t++,r=r[Ci],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return fi}function _l(n,e,t){WD(n,e,t)}function qg(n,e,t){if(t&L.Optional||n!==void 0)return n;ql(e,"NodeInjector")}function Kg(n,e,t,i){if(t&L.Optional&&i===void 0&&(i=null),!(t&(L.Self|L.Host))){let r=n[_i],s=lt(void 0);try{return r?r.get(e,i,t&L.Optional):sg(e,i,t&L.Optional)}finally{lt(s)}}return qg(i,e,t)}function Yg(n,e,t,i=L.Default,r){if(n!==null){if(e[C]&2048&&!(i&L.Self)){let o=YD(n,e,t,i,dt);if(o!==dt)return o}let s=Zg(n,e,t,i,dt);if(s!==dt)return s}return Kg(e,t,i,r)}function Zg(n,e,t,i,r){let s=qD(t);if(typeof s=="function"){if(!Fg(e,n,i))return i&L.Host?qg(r,t,i):Kg(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&L.Optional))ql(t);else return o}finally{Bg()}}else if(typeof s=="number"){let o=null,a=zg(n,e),c=fi,l=i&L.Host?e[gt][et]:null;for((a===-1||i&L.SkipSelf)&&(c=a===-1?su(n,e):e[a+8],c===fi||!xp(i,!1)?a=-1:(o=e[V],a=fo(c),e=po(c,e)));a!==-1;){let u=e[V];if(Np(s,a,u.data)){let d=GD(a,e,t,o,i,l);if(d!==dt)return d}c=e[a+8],c!==fi&&xp(i,e[V].data[a+8]===l)&&Np(s,a,e)?(o=u,a=fo(c),e=po(c,e)):a=-1}}return r}function GD(n,e,t,i,r,s){let o=e[V],a=o.data[n+8],c=i==null?Mo(a)&&ml:i!=o&&(a.type&3)!==0,l=r&L.Host&&s===a,u=zD(a,o,t,c,l);return u!==null?wi(e,o,u,a):dt}function zD(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let g=o[f];if(f<c&&t===g||f>=c&&g.type===t)return f}if(r){let f=o[c];if(f&&Bt(f)&&f.type===t)return c}return null}function wi(n,e,t,i){let r=n[t],s=e.data;if(VD(r)){let o=r;o.resolving&&yE(_E(s[t]));let a=Mp(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?lt(o.injectImpl):null,u=Fg(n,i,L.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&FD(t,s[t],e)}finally{l!==null&&lt(l),Mp(a),o.resolving=!1,Bg()}}return r}function qD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(sr)?n[sr]:void 0;return typeof e=="number"?e>=0?e&Wg:KD:e}function Np(n,e,t){let i=1<<n;return!!(t[e+(n>>Gg)]&i)}function xp(n,e){return!(n&L.Self)&&!(n&L.Host&&e)}var wn=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Yg(this._tNode,this._lView,e,Co(i),t)}};function KD(){return new wn(Me(),ne())}function ou(n){return mr(()=>{let e=n.prototype.constructor,t=e[ro]||yl(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[ro]||yl(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function yl(n){return eg(n)?()=>{let e=yl(be(n));return e&&e()}:pi(n)}function YD(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[C]&2048&&!(o[C]&512);){let a=Zg(s,o,t,i|L.Self,dt);if(a!==dt)return a;let c=s.parent;if(!c){let l=o[Eg];if(l){let u=l.get(t,dt,i);if(u!==dt)return u}c=Qg(o),o=o[Ci]}s=c}return r}function Qg(n){let e=n[V],t=e.type;return t===2?e.declTNode:t===1?n[et]:null}function Rp(n,e=null,t=null,i){let r=ZD(n,e,t,i);return r.resolveInjectorInitializers(),r}function ZD(n,e=null,t=null,i,r=new Set){let s=[t||Le,YE(n)];return i=i||(typeof n=="object"?void 0:Pe(n)),new co(s,e||To(),i||null,r)}var Oo=(()=>{class n{static{this.THROW_IF_NOT_FOUND=or}static{this.NULL=new ao}static create(t,i){if(Array.isArray(t))return Rp({name:""},i,t,"");{let r=t.name??"";return Rp({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>S(lg)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var QD="ngOriginalError";function Zc(n){return n[QD]}var Tt=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Zc(e);for(;t&&Zc(t);)t=Zc(t);return t||null}},Jg=new R("",{providedIn:"root",factory:()=>ie(Tt).handleError.bind(void 0)}),Xg=(()=>{class n{static{this.__NG_ELEMENT_ID__=JD}static{this.__NG_ENV_ID__=t=>t}}return n})(),vl=class extends Xg{constructor(e){super(),this._lView=e}onDestroy(e){return xg(this._lView,e),()=>vD(this._lView,e)}};function JD(){return new vl(ne())}function XD(){return Fo(Me(),ne())}function Fo(n,e){return new ke(Ue(n,e))}var ke=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=XD}}return n})();var wl=class extends j{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,oD()&&(this.destroyRef=ie(Xg,{optional:!0})??void 0)}emit(e){let t=G(null);try{super.next(e)}finally{G(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Qc(s),r&&(r=Qc(r)),o&&(o=Qc(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof ee&&e.add(a),a}};function Qc(n){return e=>{setTimeout(n,void 0,e)}}var ue=wl;function em(n){return(n.flags&128)===128}var tm=new Map,eC=0;function tC(){return eC++}function nC(n){tm.set(n[Ao],n)}function iC(n){tm.delete(n[Ao])}var Pp="__ngContext__";function Ut(n,e){vn(e)?(n[Pp]=e[Ao],nC(e)):n[Pp]=e}function nm(n){return rm(n[ur])}function im(n){return rm(n[Je])}function rm(n){for(;n!==null&&!Mt(n);)n=n[Je];return n}var Il;function sm(n){Il=n}function rC(){if(Il!==void 0)return Il;if(typeof document<"u")return document;throw new U(210,!1)}var au=new R("",{providedIn:"root",factory:()=>sC}),sC="ng",cu=new R(""),$t=new R("",{providedIn:"platform",factory:()=>"unknown"});var lu=new R("",{providedIn:"root",factory:()=>rC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oC="h",aC="b";var cC=()=>null;function uu(n,e,t=!1){return cC(n,e,t)}var om=!1,lC=new R("",{providedIn:"root",factory:()=>om});var El=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cE})`}};function du(n){return n instanceof El?n.changingThisBreaksApplicationSecurity:n}var uC=/^>|^->|<!--|-->|--!>|<!-$/g,dC=/(<|>)/g,hC="\u200B$1\u200B";function fC(n){return n.replace(uC,e=>e.replace(dC,hC))}var St=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(St||{}),pC;function hu(n,e){return pC(n,e)}function di(n,e,t,i,r){if(i!=null){let s,o=!1;Mt(i)?s=i:vn(i)&&(o=!0,i=i[At]);let a=mt(i);n===0&&t!==null?r==null?dm(e,t,a):mo(e,t,a,r||null,!0):n===1&&t!==null?mo(e,t,a,r||null,!0):n===2?RC(e,a,o):n===3&&e.destroyNode(a),s!=null&&kC(e,n,s,t,r)}}function gC(n,e){return n.createText(e)}function mC(n,e,t){n.setValue(e,t)}function _C(n,e){return n.createComment(fC(e))}function am(n,e,t){return n.createElement(e,t)}function yC(n,e){cm(n,e),e[At]=null,e[et]=null}function vC(n,e,t,i,r,s){i[At]=r,i[et]=e,Vo(n,i,t,1,r,s)}function cm(n,e){e[pt].changeDetectionScheduler?.notify(1),Vo(n,e,e[he],2,null,null)}function wC(n){let e=n[ur];if(!e)return Jc(n[V],n);for(;e;){let t=null;if(vn(e))t=e[ur];else{let i=e[Ve];i&&(t=i)}if(!t){for(;e&&!e[Je]&&e!==n;)vn(e)&&Jc(e[V],e),e=e[ye];e===null&&(e=n),vn(e)&&Jc(e[V],e),t=e&&e[Je]}e=t}}function IC(n,e,t,i){let r=Ve+i,s=t.length;i>0&&(t[r-1][Je]=e),i<s-Ve?(e[Je]=t[r],cg(t,Ve+i,e)):(t.push(e),e[Je]=null),e[ye]=t;let o=e[So];o!==null&&t!==o&&EC(o,e);let a=e[yi];a!==null&&a.insertView(n),pl(e),e[C]|=128}function EC(n,e){let t=n[ho],r=e[ye][ye][gt];e[gt]!==r&&(n[C]|=Ql.HasTransplantedViews),t===null?n[ho]=[e]:t.push(e)}function lm(n,e){let t=n[ho],i=t.indexOf(e);t.splice(i,1)}function Dl(n,e){if(n.length<=Ve)return;let t=Ve+e,i=n[t];if(i){let r=i[So];r!==null&&r!==n&&lm(r,i),e>0&&(n[t-1][Je]=i[Je]);let s=oo(n,Ve+e);yC(i[V],i);let o=s[yi];o!==null&&o.detachView(s[V]),i[ye]=null,i[Je]=null,i[C]&=-129}return i}function um(n,e){if(!(e[C]&256)){let t=e[he];t.destroyNode&&Vo(n,e,t,3,null,null),wC(e)}}function Jc(n,e){if(e[C]&256)return;let t=G(null);try{e[C]&=-129,e[C]|=256,e[En]&&jf(e[En]),CC(n,e),DC(n,e),e[V].type===1&&e[he].destroy();let i=e[So];if(i!==null&&Mt(e[ye])){i!==e[ye]&&lm(i,e);let r=e[yi];r!==null&&r.detachView(n)}iC(e)}finally{G(t)}}function DC(n,e){let t=n.cleanup,i=e[lr];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[t[s+1]];t[s].call(o)}i!==null&&(e[lr]=null);let r=e[jt];if(r!==null){e[jt]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function CC(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof bn)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];ut(4,a,c);try{c.call(a)}finally{ut(5,a,c)}}else{ut(4,r,s);try{s.call(r)}finally{ut(5,r,s)}}}}}function bC(n,e,t){return TC(n,e.parent,t)}function TC(n,e,t){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return t[At];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=n.data[i.directiveStart+r];if(s===ht.None||s===ht.Emulated)return null}return Ue(i,t)}}function mo(n,e,t,i,r){n.insertBefore(e,t,i,r)}function dm(n,e,t){n.appendChild(e,t)}function kp(n,e,t,i,r){i!==null?mo(n,e,t,i,r):dm(n,e,t)}function SC(n,e,t,i){n.removeChild(e,t,i)}function fu(n,e){return n.parentNode(e)}function AC(n,e){return n.nextSibling(e)}function MC(n,e,t){return xC(n,e,t)}function NC(n,e,t){return n.type&40?Ue(n,t):null}var xC=NC,Op;function Lo(n,e,t,i){let r=bC(n,i,e),s=e[he],o=i.parent||e[et],a=MC(o,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)kp(s,r,t[c],a,!1);else kp(s,r,t,a,!1);Op!==void 0&&Op(s,i,e,t,r)}function no(n,e){if(e!==null){let t=e.type;if(t&3)return Ue(e,n);if(t&4)return Cl(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return no(n,i);{let r=n[e.index];return Mt(r)?Cl(-1,r):mt(r)}}else{if(t&32)return hu(e,n)()||mt(n[e.index]);{let i=hm(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=hr(n[gt]);return no(r,i)}else return no(n,e.next)}}}return null}function hm(n,e){if(e!==null){let i=n[gt][et],r=e.projection;return i.projection[r]}return null}function Cl(n,e){let t=Ve+n+1;if(t<e.length){let i=e[t],r=i[V].firstChild;if(r!==null)return no(i,r)}return e[Dn]}function RC(n,e,t){let i=fu(n,e);i&&SC(n,i,e,t)}function pu(n,e,t,i,r,s,o){for(;t!=null;){let a=i[t.index],c=t.type;if(o&&e===0&&(a&&Ut(mt(a),i),t.flags|=2),(t.flags&32)!==32)if(c&8)pu(n,e,t.child,i,r,s,!1),di(e,n,r,a,s);else if(c&32){let l=hu(t,i),u;for(;u=l();)di(e,n,r,u,s);di(e,n,r,a,s)}else c&16?PC(n,e,i,t,r,s):di(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Vo(n,e,t,i,r,s){pu(t,i,n.firstChild,e,r,s,!1)}function PC(n,e,t,i,r,s){let o=t[gt],c=o[et].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];di(e,n,r,u,s)}else{let l=c,u=o[ye];em(i)&&(l.flags|=128),pu(n,e,l,u,r,s,!0)}}function kC(n,e,t,i,r){let s=t[Dn],o=mt(t);s!==o&&di(e,n,i,s,r);for(let a=Ve;a<t.length;a++){let c=t[a];Vo(c[V],c,n,e,i,s)}}function OC(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:St.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=St.Important),n.setStyle(t,i,r,s))}}function FC(n,e,t){n.setAttribute(e,"style",t)}function fm(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function pm(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&ll(n,e,i),r!==null&&fm(n,e,r),s!==null&&FC(n,e,s)}var Ti={};function b(n=1){gm(Te(),ne(),bi()+n,!1)}function gm(n,e,t,i){if(!i)if((e[C]&3)===3){let s=n.preOrderCheckHooks;s!==null&&eo(e,s,t)}else{let s=n.preOrderHooks;s!==null&&to(e,s,0,t)}Cn(t)}function M(n,e=L.Default){let t=ne();if(t===null)return S(n,e);let i=Me();return Yg(i,t,be(n),e)}function mm(n,e,t,i,r,s){let o=G(null);try{let a=null;r&B.SignalBased&&(a=e[i][Sc]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&B.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,i):Cg(e,a,i,s)}finally{G(o)}}function LC(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Cn(~r);else{let s=r,o=t[++i],a=t[++i];ND(o,s);let c=e[s];a(2,c)}}}finally{Cn(-1)}}function jo(n,e,t,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[At]=r,d[C]=i|4|128|8|64,(l!==null||n&&n[C]&2048)&&(d[C]|=2048),Ng(d),d[ye]=d[Ci]=n,d[Xe]=t,d[pt]=o||n&&n[pt],d[he]=a||n&&n[he],d[_i]=c||n&&n[_i]||null,d[et]=s,d[Ao]=tC(),d[lo]=u,d[Eg]=l,d[gt]=e.type==2?n[gt]:d,d}function vr(n,e,t,i,r){let s=n.data[e];if(s===null)s=VC(n,e,t,i,r),MD()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=TD();s.injectorIndex=o===null?-1:o.injectorIndex}return Mn(s,!0),s}function VC(n,e,t,i,r){let s=Pg(),o=tu(),a=o?s:s&&s.parent,c=n.data[e]=$C(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function _m(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function ym(n,e,t,i,r){let s=bi(),o=i&2;try{Cn(-1),o&&e.length>bt&&gm(n,e,bt,!1),ut(o?2:0,r),t(i,r)}finally{Cn(s),ut(o?3:1,r)}}function gu(n,e,t){if(Jl(e)){let i=G(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{G(i)}}}function mu(n,e,t){Rg()&&(YC(n,e,t,Ue(t,e)),(t.flags&64)===64&&Em(n,e,t))}function _u(n,e,t=Ue){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function vm(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=yu(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function yu(n,e,t,i,r,s,o,a,c,l,u){let d=bt+i,h=d+r,f=jC(d,h),g=typeof l=="function"?l():l;return f[V]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function jC(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Ti);return t}function BC(n,e,t,i){let s=i.get(lC,om)||t===ht.ShadowDom,o=n.selectRootElement(e,s);return UC(o),o}function UC(n){HC(n)}var HC=()=>null;function $C(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return DD()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Fp(n,e,t,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,c=B.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(r!==null){if(!r.hasOwnProperty(s))continue;l=r[s]}n===0?Lp(i,t,l,a,c):Lp(i,t,l,a)}return i}function Lp(n,e,t,i,r){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],r!==void 0&&s.push(r)}function WC(n,e,t){let i=e.directiveStart,r=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=s[u],h=t?t.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=Fp(0,d.inputs,u,c,f),l=Fp(1,d.outputs,u,l,g);let _=c!==null&&o!==null&&!Yl(e)?ob(c,u,o):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function GC(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function wm(n,e,t,i,r,s,o,a){let c=Ue(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(wu(n,t,u,i,r),Mo(e)&&zC(t,e.index)):e.type&3?(i=GC(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(c,i,r)):e.type&12}function zC(n,e){let t=Ht(e,n);t[C]&16||(t[C]|=64)}function vu(n,e,t,i){if(Rg()){let r=i===null?null:{"":-1},s=QC(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Im(n,e,t,o,r,a),r&&JC(t,i,r)}t.mergedAttrs=cr(t.mergedAttrs,t.attrs)}function Im(n,e,t,i,r,s){for(let l=0;l<i.length;l++)_l(go(t,e),n,i[l].type);eb(t,n.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=_m(n,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];t.mergedAttrs=cr(t.mergedAttrs,u.hostAttrs),tb(n,t,e,c,u),XC(c,u,r),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}WC(n,t,s)}function qC(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;KC(o)!=a&&o.push(a),o.push(t,i,s)}}function KC(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function YC(n,e,t,i){let r=t.directiveStart,s=t.directiveEnd;Mo(t)&&nb(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||go(t,e),Ut(i,e);let o=t.initialInputs;for(let a=r;a<s;a++){let c=n.data[a],l=wi(e,n,a,t);if(Ut(l,e),o!==null&&sb(e,a-r,l,c,t,o),Bt(c)){let u=Ht(t.index,e);u[Xe]=wi(e,n,a,t)}}}function Em(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=xD();try{Cn(s);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];gl(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ZC(c,l)}}finally{Cn(-1),gl(o)}}function ZC(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function QC(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(jE(e,o.selectors,!1))if(i||(i=[]),Bt(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let c=a.length;bl(n,e,c)}else i.unshift(o),bl(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function bl(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function JC(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new U(-301,!1);i.push(e[r],s)}}}function XC(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Bt(e)&&(t[""]=n)}}function eb(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function tb(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=pi(r.type,!0)),o=new bn(s,Bt(r),M);n.blueprint[i]=o,t[i]=o,qC(n,e,i,_m(n,t,r.hostVars,Ti),r)}function nb(n,e,t){let i=Ue(e,n),r=vm(t),s=n[pt].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Bo(n,jo(n,r,null,o,i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=a}function ib(n,e,t,i,r,s){let o=Ue(n,e);rb(e[he],o,s,n.value,t,i,r)}function rb(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?zl(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function sb(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];mm(i,t,c,l,u,d)}}function ob(n,e,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],t[r+1]);break}}r+=2}return i}function Dm(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Cm(n,e){let t=n.contentQueries;if(t!==null){let i=G(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];Og(s),a.contentQueries(2,e[o],o)}}}finally{G(i)}}}function Bo(n,e){return n[ur]?n[Tp][Je]=e:n[ur]=e,n[Tp]=e,e}function Tl(n,e,t){Og(0);let i=G(null);try{e(n,t)}finally{G(i)}}function ab(n){return n[lr]||(n[lr]=[])}function cb(n){return n.cleanup||(n.cleanup=[])}function bm(n,e){let t=n[_i],i=t?t.get(Tt,null):null;i&&i.handleError(e)}function wu(n,e,t,i,r){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];mm(u,l,i,a,c,r)}}function lb(n,e,t){let i=Ag(e,n);mC(n[he],i,t)}function ub(n,e){let t=Ht(e,n),i=t[V];db(i,t);let r=t[At];r!==null&&t[lo]===null&&(t[lo]=uu(r,t[_i])),Iu(i,t,t[Xe])}function db(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Iu(n,e,t){nu(e);try{let i=n.viewQuery;i!==null&&Tl(1,i,t);let r=n.template;r!==null&&ym(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[yi]?.finishViewCreation(n),n.staticContentQueries&&Cm(n,e),n.staticViewQueries&&Tl(2,n.viewQuery,t);let s=n.components;s!==null&&hb(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[C]&=-5,iu()}}function hb(n,e){for(let t=0;t<e.length;t++)ub(n,e[t])}function fb(n,e,t,i){let r=G(null);try{let s=e.tView,a=n[C]&4096?4096:16,c=jo(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[So]=l;let u=n[yi];return u!==null&&(c[yi]=u.createEmbeddedView(s)),Iu(s,c,t),c}finally{G(r)}}function Vp(n,e){return!e||e.firstChild===null||em(n)}function pb(n,e,t,i=!0){let r=e[V];if(IC(r,e,n,t),i){let o=Cl(t,n),a=e[he],c=fu(a,n[Dn]);c!==null&&vC(r,n[et],a,e,c,o)}let s=e[lo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function _o(n,e,t,i,r=!1){for(;t!==null;){let s=e[t.index];s!==null&&i.push(mt(s)),Mt(s)&&gb(s,i);let o=t.type;if(o&8)_o(n,e,t.child,i);else if(o&32){let a=hu(t,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=hm(e,t);if(Array.isArray(a))i.push(...a);else{let c=hr(e[gt]);_o(c[V],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function gb(n,e){for(let t=Ve;t<n.length;t++){let i=n[t],r=i[V].firstChild;r!==null&&_o(i[V],i,r,e)}n[Dn]!==n[At]&&e.push(n[Dn])}var Tm=[];function mb(n){return n[En]??_b(n)}function _b(n){let e=Tm.pop()??Object.create(vb);return e.lView=n,e}function yb(n){n.lView[En]!==n&&(n.lView=null,Tm.push(n))}var vb=Y(E({},Ff),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{dr(n.lView)},consumerOnSignalRead(){this.lView[En]=this}}),Sm=100;function Am(n,e=!0,t=0){let i=n[pt],r=i.rendererFactory,s=!1;s||r.begin?.();try{wb(n,t)}catch(o){throw e&&bm(n,o),o}finally{s||(r.end?.(),i.inlineEffectRunner?.flush())}}function wb(n,e){Sl(n,e);let t=0;for(;eu(n);){if(t===Sm)throw new U(103,!1);t++,Sl(n,1)}}function Ib(n,e,t,i){let r=e[C];if((r&256)===256)return;let s=!1;!s&&e[pt].inlineEffectRunner?.flush(),nu(e);let o=null,a=null;!s&&Eb(n)&&(a=mb(e),o=Lf(a));try{Ng(e),SD(n.bindingStartIndex),t!==null&&ym(n,e,t,2,i);let c=(r&3)===3;if(!s)if(c){let d=n.preOrderCheckHooks;d!==null&&eo(e,d,null)}else{let d=n.preOrderHooks;d!==null&&to(e,d,0,null),Kc(e,0)}if(Db(e),Mm(e,0),n.contentQueries!==null&&Cm(n,e),!s)if(c){let d=n.contentCheckHooks;d!==null&&eo(e,d)}else{let d=n.contentHooks;d!==null&&to(e,d,1),Kc(e,1)}LC(n,e);let l=n.components;l!==null&&xm(e,l,0);let u=n.viewQuery;if(u!==null&&Tl(2,u,i),!s)if(c){let d=n.viewCheckHooks;d!==null&&eo(e,d)}else{let d=n.viewHooks;d!==null&&to(e,d,2),Kc(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[qc]){for(let d of e[qc])d();e[qc]=null}s||(e[C]&=-73)}catch(c){throw dr(e),c}finally{a!==null&&(Vf(a,o),yb(a)),iu()}}function Eb(n){return n.type!==2}function Mm(n,e){for(let t=nm(n);t!==null;t=im(t))for(let i=Ve;i<t.length;i++){let r=t[i];Nm(r,e)}}function Db(n){for(let e=nm(n);e!==null;e=im(e)){if(!(e[C]&Ql.HasTransplantedViews))continue;let t=e[ho];for(let i=0;i<t.length;i++){let r=t[i],s=r[ye];_D(r)}}}function Cb(n,e,t){let i=Ht(e,n);Nm(i,t)}function Nm(n,e){Xl(n)&&Sl(n,e)}function Sl(n,e){let i=n[V],r=n[C],s=n[En],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&Ac(s)),s&&(s.dirty=!1),n[C]&=-9217,o)Ib(i,n,i.template,n[Xe]);else if(r&8192){Mm(n,1);let a=i.components;a!==null&&xm(n,a,1)}}function xm(n,e,t){for(let i=0;i<e.length;i++)Cb(n,e[i],t)}function Eu(n){for(n[pt].changeDetectionScheduler?.notify();n;){n[C]|=64;let e=hr(n);if(cD(n)&&!e)return n;n=e}return null}var Tn=class{get rootNodes(){let e=this._lView,t=e[V];return _o(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xe]}set context(e){this._lView[Xe]=e}get destroyed(){return(this._lView[C]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ye];if(Mt(e)){let t=e[uo],i=t?t.indexOf(this):-1;i>-1&&(Dl(e,i),oo(t,i))}this._attachedToViewContainer=!1}um(this._lView[V],this._lView)}onDestroy(e){xg(this._lView,e)}markForCheck(){Eu(this._cdRefInjectingView||this._lView)}detach(){this._lView[C]&=-129}reattach(){pl(this._lView),this._lView[C]|=128}detectChanges(){this._lView[C]|=1024,Am(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,cm(this._lView[V],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e,pl(this._lView)}},Si=(()=>{class n{static{this.__NG_ELEMENT_ID__=Sb}}return n})(),bb=Si,Tb=class extends bb{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=fb(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Tn(r)}};function Sb(){return Ab(Me(),ne())}function Ab(n,e){return n.type&4?new Tb(e,n,Fo(n,e)):null}var zL=new RegExp(`^(\\d+)*(${aC}|${oC})*(.*)`);var Mb=()=>null;function jp(n,e){return Mb(n,e)}var Al=class{},Ml=class{},yo=class{};function Nb(n){let e=Error(`No component factory found for ${Pe(n)}.`);return e[xb]=n,e}var xb="ngComponent";var Nl=class{resolveComponentFactory(e){throw Nb(e)}},Du=(()=>{class n{static{this.NULL=new Nl}}return n})(),fr=class{},wr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Rb()}}return n})();function Rb(){let n=ne(),e=Me(),t=Ht(e.index,n);return(vn(t)?t:n)[he]}var Pb=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})(),Xc={};var Bp=new Set;function Rm(n){Bp.has(n)||(Bp.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Up(...n){}function kb(){let n=typeof rr.requestAnimationFrame=="function",e=rr[n?"requestAnimationFrame":"setTimeout"],t=rr[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var se=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ue(!1),this.onMicrotaskEmpty=new ue(!1),this.onStable=new ue(!1),this.onError=new ue(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=kb().nativeRequestAnimationFrame,Lb(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Ob,Up,Up);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},Ob={};function Cu(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Fb(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(rr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,xl(n),n.isCheckStableRunning=!0,Cu(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),xl(n))}function Lb(n){let e=()=>{Fb(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(Vb(a))return t.invokeTask(r,s,o,a);try{return Hp(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),$p(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return Hp(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),$p(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,xl(n),Cu(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function xl(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Hp(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $p(n){n._nesting--,Cu(n)}function Vb(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var Pm=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of t)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();function vo(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=mp(r,a);else if(s==2){let c=a,l=e[++o];i=mp(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var Rl=class extends Du{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=In(e);return new pr(t,this.ngModule)}};function Wp(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let i=n[t];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:t})}return e}function jb(n){let e=n.toLowerCase();return e==="svg"?hD:e==="math"?fD:null}var Pl=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Co(i);let r=this.injector.get(e,Xc,i);return r!==Xc||t===Xc?r:this.parentInjector.get(e,t,i)}},pr=class extends yo{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=Wp(e.inputs);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return Wp(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=$E(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=G(null);try{r=r||this.ngModule;let o=r instanceof ft?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Pl(e,o):e,c=a.get(fr,null);if(c===null)throw new U(407,!1);let l=a.get(Pb,null),u=a.get(Pm,null),d=a.get(Al,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",_=i?BC(f,i,this.componentDef.encapsulation,a):am(f,g,jb(g)),I=512;this.componentDef.signals?I|=4096:this.componentDef.onPush||(I|=16);let x=null;_!==null&&(x=uu(_,a,!0));let ae=yu(0,null,null,1,0,null,null,null,null,null,null),J=jo(null,ae,null,I,null,null,h,f,a,null,x);nu(J);let _e,Zn;try{let Ke=this.componentDef,Qn,Cc=null;Ke.findHostDirectiveDefs?(Qn=[],Cc=new Map,Ke.findHostDirectiveDefs(Ke,Qn,Cc),Qn.push(Ke)):Qn=[Ke];let bI=Bb(J,_),TI=Ub(bI,_,Ke,Qn,J,h,f);Zn=Mg(ae,bt),_&&Wb(f,Ke,_,i),t!==void 0&&Gb(Zn,this.ngContentSelectors,t),_e=$b(TI,Ke,Qn,Cc,J,[zb]),Iu(ae,J,null)}finally{iu()}return new kl(this.componentType,_e,Fo(Zn,J),J,Zn)}finally{G(s)}}},kl=class extends Ml{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Tn(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;wu(s[V],s,r,e,t),this.previousInputValues.set(e,t);let o=Ht(this._tNode.index,s);Eu(o)}}get injector(){return new wn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Bb(n,e){let t=n[V],i=bt;return n[i]=e,vr(t,i,2,"#host",null)}function Ub(n,e,t,i,r,s,o){let a=r[V];Hb(i,n,e,o);let c=null;e!==null&&(c=uu(e,r[_i]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=jo(r,vm(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&bl(a,n,i.length-1),Bo(r,d),r[n.index]=d}function Hb(n,e,t,i){for(let r of n)e.mergedAttrs=cr(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(vo(e,e.mergedAttrs,!0),t!==null&&pm(i,t,e))}function $b(n,e,t,i,r,s){let o=Me(),a=r[V],c=Ue(o,r);Im(a,r,o,t,null,i);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,h=wi(r,a,d,o);Ut(h,r)}Em(a,r,o),c&&Ut(c,r);let l=wi(r,a,o.directiveStart+o.componentOffset,o);if(n[Xe]=r[Xe]=l,s!==null)for(let u of s)u(l,e);return gu(a,o,r),l}function Wb(n,e,t,i){if(i)ll(n,t,["ng-version","17.3.12"]);else{let{attrs:r,classes:s}=WE(e.selectors[0]);r&&ll(n,t,r),s&&s.length>0&&fm(n,t,s.join(" "))}}function Gb(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null?Array.from(s):null)}}function zb(){let n=Me();ko(ne()[V],n)}var Nn=(()=>{class n{static{this.__NG_ELEMENT_ID__=qb}}return n})();function qb(){let n=Me();return Yb(n,ne())}var Kb=Nn,km=class extends Kb{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Fo(this._hostTNode,this._hostLView)}get injector(){return new wn(this._hostTNode,this._hostLView)}get parentInjector(){let e=su(this._hostTNode,this._hostLView);if($g(e)){let t=po(e,this._hostLView),i=fo(e),r=t[V].data[i+8];return new wn(r,t)}else return new wn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Gp(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ve}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=jp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,Vp(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!aD(e),a;if(o)a=t;else{let g=t||{};a=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new pr(In(e)),l=i||this.parentInjector;if(!s&&c.ngModule==null){let _=(o?l:this.parentInjector).get(ft,null);_&&(s=_)}let u=In(c.componentType??{}),d=jp(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,s);return this.insertImpl(f.hostView,a,Vp(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(mD(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[ye],l=new km(c,c[et],c[ye]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return pb(o,r,s,i),e.attachToViewContainerRef(),cg(el(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Gp(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Dl(this._lContainer,t);i&&(oo(el(this._lContainer),t),um(i[V],i))}detach(e){let t=this._adjustIndex(e,-1),i=Dl(this._lContainer,t);return i&&oo(el(this._lContainer),t)!=null?new Tn(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Gp(n){return n[uo]}function el(n){return n[uo]||(n[uo]=[])}function Yb(n,e){let t,i=e[n.index];return Mt(i)?t=i:(t=Dm(i,e,null,n),e[n.index]=t,Bo(e,t)),Qb(t,e,n,i),new km(t,n,e)}function Zb(n,e){let t=n[he],i=t.createComment(""),r=Ue(e,n),s=fu(t,r);return mo(t,s,i,AC(t,r),!1),i}var Qb=eT,Jb=()=>!1;function Xb(n,e,t){return Jb(n,e,t)}function eT(n,e,t,i){if(n[Dn])return;let r;t.type&8?r=mt(i):r=Zb(e,t),n[Dn]=r}function tT(n){return typeof n=="function"&&n[Sc]!==void 0}function Om(n){return tT(n)&&typeof n.set=="function"}function nT(n){return Object.getPrototypeOf(n.prototype).constructor}function Wt(n){let e=nT(n.type),t=!0,i=[n];for(;e;){let r;if(Bt(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=Qs(n.inputs),o.inputTransforms=Qs(n.inputTransforms),o.declaredInputs=Qs(n.declaredInputs),o.outputs=Qs(n.outputs);let a=r.hostBindings;a&&aT(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&sT(n,c),l&&oT(n,l),iT(n,r),uE(n.outputs,r.outputs),Bt(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Wt&&(t=!1)}}e=Object.getPrototypeOf(e)}rT(i)}function iT(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function rT(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=cr(r.hostAttrs,t=cr(t,r.hostAttrs))}}function Qs(n){return n===gi?{}:n===Le?[]:n}function sT(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function oT(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function aT(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Ai(n){let e=n.inputConfig,t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(t[i]=r[3])}n.inputTransforms=t}var Ii=class{};var wo=class extends Ii{constructor(e){super(),this.componentFactoryResolver=new Rl(this),this.instance=null;let t=new co([...e.providers,{provide:Ii,useValue:this},{provide:Du,useValue:this.componentFactoryResolver}],e.parent||To(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function cT(n,e,t=null){return new wo({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Fm=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new mn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Lm(n){return uT(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function lT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function uT(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ir(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function dT(n){return(n.flags&32)===32}function hT(n,e,t,i,r,s,o,a,c){let l=e.consts,u=vr(e,n,4,o||null,vi(l,a));vu(e,t,u,vi(l,c)),ko(e,u);let d=u.tView=yu(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function He(n,e,t,i,r,s,o,a){let c=ne(),l=Te(),u=n+bt,d=l.firstCreatePass?hT(u,l,c,e,t,i,r,s,o):l.data[u];Mn(d,!1);let h=fT(l,c,d,n);Ro()&&Lo(l,c,h,d),Ut(h,c);let f=Dm(h,c,h,d);return c[u]=f,Bo(c,f),Xb(f,d,c),No(d)&&mu(l,c,d),o!=null&&_u(c,d,a),He}var fT=pT;function pT(n,e,t,i){return Po(!0),e[he].createComment("")}function xn(n,e,t,i){let r=ne(),s=xo();if(Ir(r,s,e)){let o=Te(),a=ru();ib(a,r,n,e,t,i)}return xn}function gT(n,e,t,i){return Ir(n,xo(),t)?e+zl(t)+i:Ti}function Js(n,e){return n<<17|e<<2}function Sn(n){return n>>17&32767}function mT(n){return(n&2)==2}function _T(n,e){return n&131071|e<<17}function Ol(n){return n|2}function Ei(n){return(n&131068)>>2}function tl(n,e){return n&-131069|e<<2}function yT(n){return(n&1)===1}function Fl(n){return n|1}function vT(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Sn(o),c=Ei(o);n[i]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||_r(d,u)>0)&&(l=!0)}else u=t;if(r)if(c!==0){let h=Sn(n[a+1]);n[i+1]=Js(h,a),h!==0&&(n[h+1]=tl(n[h+1],i)),n[a+1]=_T(n[a+1],i)}else n[i+1]=Js(a,0),a!==0&&(n[a+1]=tl(n[a+1],i)),a=i;else n[i+1]=Js(c,0),a===0?a=i:n[c+1]=tl(n[c+1],i),c=i;l&&(n[i+1]=Ol(n[i+1])),zp(n,u,i,!0),zp(n,u,i,!1),wT(e,u,n,i,s),o=Js(a,c),s?e.classBindings=o:e.styleBindings=o}function wT(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&_r(s,e)>=0&&(t[i+1]=Fl(t[i+1]))}function zp(n,e,t,i){let r=n[t+1],s=e===null,o=i?Sn(r):Ei(r),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];IT(c,e)&&(a=!0,n[o+1]=i?Fl(l):Ol(l)),o=i?Sn(l):Ei(l)}a&&(n[t+1]=i?Ol(r):Fl(r))}function IT(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?_r(n,e)>=0:!1}function de(n,e,t){let i=ne(),r=xo();if(Ir(i,r,e)){let s=Te(),o=ru();wm(s,o,i,n,e,i[he],t,!1)}return de}function qp(n,e,t,i,r){let s=e.inputs,o=r?"class":"style";wu(n,t,s[o],o,i)}function $e(n,e){return ET(n,e,null,!0),$e}function ET(n,e,t,i){let r=ne(),s=Te(),o=AD(2);if(s.firstUpdatePass&&CT(s,n,o,i),e!==Ti&&Ir(r,o,e)){let a=s.data[bi()];MT(s,a,r,r[he],n,r[o+1]=NT(e,t),i,o)}}function DT(n,e){return e>=n.expandoStartIndex}function CT(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[bi()],o=DT(n,t);xT(s,i)&&e===null&&!o&&(e=!1),e=bT(r,s,e,i),vT(r,s,e,t,o,i)}}function bT(n,e,t,i){let r=RD(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=nl(null,n,e,t,i),t=gr(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=nl(r,n,e,t,i),s===null){let c=TT(n,e,i);c!==void 0&&Array.isArray(c)&&(c=nl(null,n,e,c[1],i),c=gr(c,e.attrs,i),ST(n,e,i,c))}else s=AT(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function TT(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Ei(i)!==0)return n[Sn(i)]}function ST(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Sn(r)]=i}function AT(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=gr(i,o,t)}return gr(i,e.attrs,t)}function nl(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=gr(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function gr(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),NE(n,o,t?!0:e[++s]))}return n===void 0?null:n}function MT(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=yT(l)?Kp(c,e,t,r,Ei(l),o):void 0;if(!Io(u)){Io(s)||mT(l)&&(s=Kp(c,null,t,r,a,o));let d=Ag(bi(),t);OC(i,o,d,r,s)}}function Kp(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[r+1];h===Ti&&(h=d?Le:void 0);let f=d?Gc(h,i):u===i?h:void 0;if(l&&!Io(f)&&(f=Gc(c,i)),Io(f)&&(a=f,o))return a;let g=n[r+1];r=o?Sn(g):Ei(g)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Gc(c,i))}return a}function Io(n){return n!==void 0}function NT(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Pe(du(n)))),n}function xT(n,e){return(n.flags&(e?8:16))!==0}function RT(n,e,t,i,r,s){let o=e.consts,a=vi(o,r),c=vr(e,n,2,i,a);return vu(e,t,c,vi(o,s)),c.attrs!==null&&vo(c,c.attrs,!1),c.mergedAttrs!==null&&vo(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function y(n,e,t,i){let r=ne(),s=Te(),o=bt+n,a=r[he],c=s.firstCreatePass?RT(o,s,r,e,t,i):s.data[o],l=PT(s,r,c,a,e,n);r[o]=l;let u=No(c);return Mn(c,!0),pm(a,l,c),!dT(c)&&Ro()&&Lo(s,r,l,c),wD()===0&&Ut(l,r),ID(),u&&(mu(s,r,c),gu(s,c,r)),i!==null&&_u(r,c),y}function v(){let n=Me();tu()?kg():(n=n.parent,Mn(n,!1));let e=n;CD(e)&&bD(),ED();let t=Te();return t.firstCreatePass&&(ko(t,n),Jl(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&jD(e)&&qp(t,e,ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&BD(e)&&qp(t,e,ne(),e.stylesWithoutHost,!1),v}function Uo(n,e,t,i){return y(n,e,t,i),v(),Uo}var PT=(n,e,t,i,r,s)=>(Po(!0),am(i,r,OD()));function kT(n,e,t,i,r){let s=e.consts,o=vi(s,i),a=vr(e,n,8,"ng-container",o);o!==null&&vo(a,o,!0);let c=vi(s,r);return vu(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function bu(n,e,t){let i=ne(),r=Te(),s=n+bt,o=r.firstCreatePass?kT(s,r,i,e,t):r.data[s];Mn(o,!0);let a=OT(r,i,o,n);return i[s]=a,Ro()&&Lo(r,i,a,o),Ut(a,i),No(o)&&(mu(r,i,o),gu(r,o,i)),t!=null&&_u(i,o),bu}function Tu(){let n=Me(),e=Te();return tu()?kg():(n=n.parent,Mn(n,!1)),e.firstCreatePass&&(ko(e,n),Jl(n)&&e.queries.elementEnd(n)),Tu}var OT=(n,e,t,i)=>(Po(!0),_C(e[he],""));function tt(){return ne()}var Eo="en-US";var FT=Eo;function LT(n){typeof n=="string"&&(FT=n.toLowerCase().replace(/_/g,"-"))}function q(n,e,t,i){let r=ne(),s=Te(),o=Me();return Vm(s,r,r[he],o,n,e,i),q}function VT(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[lr],c=r[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Vm(n,e,t,i,r,s,o){let a=No(i),l=n.firstCreatePass&&cb(n),u=e[Xe],d=ab(e),h=!0;if(i.type&3||o){let _=Ue(i,e),I=o?o(_):_,x=d.length,ae=o?_e=>o(mt(_e[i.index])):i.index,J=null;if(!o&&a&&(J=VT(n,e,r,i.index)),J!==null){let _e=J.__ngLastListenerFn__||J;_e.__ngNextListenerFn__=s,J.__ngLastListenerFn__=s,h=!1}else{s=Zp(i,e,u,s,!1);let _e=t.listen(I,r,s);d.push(s,_e),l&&l.push(r,ae,x,x+1)}}else s=Zp(i,e,u,s,!1);let f=i.outputs,g;if(h&&f!==null&&(g=f[r])){let _=g.length;if(_)for(let I=0;I<_;I+=2){let x=g[I],ae=g[I+1],Zn=e[x][ae].subscribe(s),Ke=d.length;d.push(s,Zn),l&&l.push(r,i.index,Ke,-(Ke+1))}}}function Yp(n,e,t,i){let r=G(null);try{return ut(6,e,t),t(i)!==!1}catch(s){return bm(n,s),!1}finally{ut(7,e,t),G(r)}}function Zp(n,e,t,i,r){return function s(o){if(o===Function)return i;let a=n.componentOffset>-1?Ht(n.index,e):e;Eu(a);let c=Yp(e,t,i,o),l=s.__ngNextListenerFn__;for(;l;)c=Yp(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&o.preventDefault(),c}}function w(n=1){return kD(n)}function D(n,e=""){let t=ne(),i=Te(),r=n+bt,s=i.firstCreatePass?vr(i,r,1,e,null):i.data[r],o=jT(i,t,s,e,n);t[r]=o,Ro()&&Lo(i,t,o,s),Mn(s,!1)}var jT=(n,e,t,i,r)=>(Po(!0),gC(e[he],i));function we(n){return Rn("",n,""),we}function Rn(n,e,t){let i=ne(),r=gT(i,n,e,t);return r!==Ti&&lb(i,bi(),r),Rn}function Gt(n,e,t){Om(e)&&(e=e());let i=ne(),r=xo();if(Ir(i,r,e)){let s=Te(),o=ru();wm(s,o,i,n,e,i[he],t,!1)}return Gt}function Pn(n,e){let t=Om(n);return t&&n.set(e),t}function zt(n,e){let t=ne(),i=Te(),r=Me();return Vm(i,t,t[he],r,n,e),zt}function BT(n,e,t){let i=Te();if(i.firstCreatePass){let r=Bt(n);Ll(t,i.data,i.blueprint,r,!0),Ll(e,i.data,i.blueprint,r,!1)}}function Ll(n,e,t,i,r){if(n=be(n),Array.isArray(n))for(let s=0;s<n.length;s++)Ll(n[s],e,t,i,r);else{let s=Te(),o=ne(),a=Me(),c=mi(n)?n:be(n.provide),l=Ig(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(mi(n)||!n.multi){let f=new bn(l,r,M),g=rl(c,e,r?u:u+h,d);g===-1?(_l(go(a,o),s,c),il(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[g]=f,o[g]=f)}else{let f=rl(c,e,u+h,d),g=rl(c,e,u,u+h),_=f>=0&&t[f],I=g>=0&&t[g];if(r&&!I||!r&&!_){_l(go(a,o),s,c);let x=$T(r?HT:UT,t.length,r,i,l);!r&&I&&(t[g].providerFactory=x),il(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(x),o.push(x)}else{let x=jm(t[r?g:f],l,!r&&i);il(s,n,f>-1?f:g,x)}!r&&i&&I&&t[g].componentProviders++}}}function il(n,e,t,i){let r=mi(e),s=XE(e);if(r||s){let c=(s?be(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function jm(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function rl(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function UT(n,e,t,i){return Vl(this.multi,[])}function HT(n,e,t,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=wi(t,t[V],this.providerFactory.index,i);s=a.slice(0,o),Vl(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Vl(r,s);return s}function Vl(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function $T(n,e,t,i,r){let s=new bn(n,t,M);return s.multi=[],s.index=e,s.componentProviders=0,jm(s,r,i&&!t),s}function _t(n,e=[]){return t=>{t.providersResolver=(i,r)=>BT(i,r?r(n):n,e)}}var WT=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=yg(!1,t.type),r=i.length>0?cT([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(S(ft))})}}return n})();function Er(n){Rm("NgStandalone"),n.getStandaloneInjector=e=>e.get(WT).getOrCreateStandaloneInjector(n)}var Bm=new R("");function Dr(n){return!!n&&typeof n.then=="function"}function Um(n){return!!n&&typeof n.subscribe=="function"}var GT=new R(""),Hm=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=ie(GT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=r();if(Dr(s))t.push(s);else if(Um(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zT=new R("");function qT(){Bf(()=>{throw new U(600,!1)})}function KT(n){return n.isBoundToModule}function YT(n,e,t){try{let i=t();return Dr(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var Cr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ie(Jg),this.afterRenderEffectManager=ie(Pm),this.externalTestViews=new Set,this.beforeRender=new j,this.afterTick=new j,this.componentTypes=[],this.components=[],this.isStable=ie(Fm).hasPendingTasks.pipe(Ze(t=>!t)),this._injector=ie(ft)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof yo;if(!this._injector.get(Hm).done){let h=!r&&qE(t),f=!1;throw new U(405,f)}let o;r?o=t:o=this._injector.get(Du).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=KT(o)?void 0:this._injector.get(Ii),c=i||o.selector,l=o.create(Oo.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Bm,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),sl(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new U(101,!1);let i=G(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,G(i)}}detectChangesInAttachedViews(t){let i=0,r=this.afterRenderEffectManager;for(;;){if(i===Sm)throw new U(103,!1);if(t){let s=i===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)ZT(o,s,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>jl(s))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>jl(s))))break}}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;sl(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(zT,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>sl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZT(n,e,t){!e&&!jl(n)||QT(n,t,e)}function jl(n){return eu(n)}function QT(n,e,t){let i;t?(i=0,n[C]|=1024):n[C]&64?i=0:i=1,Am(n,e,i)}var JT=(()=>{class n{constructor(){this.zone=ie(se),this.applicationRef=ie(Cr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function XT(n){return[{provide:se,useFactory:n},{provide:ar,multi:!0,useFactory:()=>{let e=ie(JT,{optional:!0});return()=>e.initialize()}},{provide:ar,multi:!0,useFactory:()=>{let e=ie(iS);return()=>{e.initialize()}}},{provide:Jg,useFactory:eS}]}function eS(){let n=ie(se),e=ie(Tt);return t=>n.runOutsideAngular(()=>e.handleError(t))}function tS(n){let e=XT(()=>new se(nS(n)));return _g([[],e])}function nS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var iS=(()=>{class n{constructor(){this.subscription=new ee,this.initialized=!1,this.zone=ie(se),this.pendingTasks=ie(Fm)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{se.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{se.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rS(){return typeof $localize<"u"&&$localize.locale||Eo}var Su=new R("",{providedIn:"root",factory:()=>ie(Su,L.Optional|L.SkipSelf)||rS()});var $m=new R("");var io=null;function sS(n=[],e){return Oo.create({name:e,providers:[{provide:bo,useValue:"platform"},{provide:$m,useValue:new Set([()=>io=null])},...n]})}function oS(n=[]){if(io)return io;let e=sS(n);return io=e,qT(),aS(e),e}function aS(n){n.get(cu,null)?.forEach(t=>t())}var qt=(()=>{class n{static{this.__NG_ELEMENT_ID__=cS}}return n})();function cS(n){return lS(Me(),ne(),(n&16)===16)}function lS(n,e,t){if(Mo(n)&&!t){let i=Ht(n.index,e);return new Tn(i,i)}else if(n.type&47){let i=e[gt];return new Tn(i,e)}return null}var Bl=class{constructor(){}supports(e){return Lm(e)}create(e){return new Ul(e)}},uS=(n,e)=>e,Ul=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||uS}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<Qp(i,r,s)?t:i,a=Qp(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let f=h<s.length?s[h]:s[h]=0,g=f+h;u<=g&&g<l&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Lm(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,lT(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Hl(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Do),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Do),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Hl=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},$l=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Do=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new $l,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Qp(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function Jp(){return new Ho([new Bl])}var Ho=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:Jp})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Jp()),deps:[[n,new AE,new ag]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new U(901,!1)}}return n})();function Wm(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=oS(i),s=[tS(),...t||[]],a=new wo({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(se);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Tt,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=r.get($m);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),YT(l,c,()=>{let f=a.get(Hm);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(Su,Eo);LT(g||Eo);let _=a.get(Cr);return e!==void 0&&_.bootstrap(e),_})})})}catch(e){return Promise.reject(e)}}function Nt(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Gm(n,e){let t=In(n),i=e.elementInjector||To();return new pr(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var Ym=null;function Mi(){return Ym}function Zm(n){Ym??=n}var $o=class{};var me=new R("");function Qm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Au=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Jm=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Au(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),zm(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);zm(s,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(M(Nn),M(Si),M(Ho))}}static{this.\u0275dir=ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function zm(n,e){n.context.$implicit=e.item}var Xm=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Mu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qm("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qm("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(M(Nn),M(Si))}}static{this.\u0275dir=ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Mu=class{constructor(){this.$implicit=null,this.ngIf=null}};function qm(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Pe(e)}'.`)}var Nu=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({})}}return n})(),xu="browser",hS="server";function e_(n){return n===xu}function Ru(n){return n===hS}var Wo=class{};var Ou=class extends $o{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Fu=class n extends Ou{static makeCurrent(){Zm(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=gS();return t==null?null:mS(t)}resetBaseElement(){br=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qm(document.cookie,e)}},br=null;function gS(){return br=br||document.querySelector("base"),br?br.getAttribute("href"):null}function mS(n){return new URL(n,document.baseURI).pathname}var _S=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Lu=new R(""),r_=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new U(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(S(Lu),S(se))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Go=class{constructor(e){this._doc=e}},Pu="ng-app-id",s_=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ru(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Pu}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(Pu),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(Pu,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(S(me),S(au),S(lu,8),S($t))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),ku={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ju=/%COMP%/g,o_="%COMP%",yS=`_nghost-${o_}`,vS=`_ngcontent-${o_}`,wS=!0,IS=new R("",{providedIn:"root",factory:()=>wS});function ES(n){return vS.replace(ju,n)}function DS(n){return yS.replace(ju,n)}function a_(n,e){return e.map(t=>t.replace(ju,n))}var t_=(()=>{class n{constructor(t,i,r,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ru(a),this.defaultRenderer=new Tr(t,o,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ht.ShadowDom&&(i=Y(E({},i),{encapsulation:ht.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof zo?r.applyToHost(t):r instanceof Sr&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case ht.Emulated:s=new zo(c,l,i,this.appId,u,o,a,d);break;case ht.ShadowDom:return new Vu(c,l,t,i,o,a,this.nonce,d);default:s=new Sr(c,l,i,u,o,a,d);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(S(r_),S(s_),S(au),S(IS),S(me),S($t),S(se),S(lu))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Tr=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ku[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(n_(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(n_(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new U(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=ku[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=ku[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(St.DashCase|St.Important)?e.style.setProperty(t,i,r&St.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&St.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Mi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function n_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vu=class extends Tr{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=a_(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sr=class extends Tr{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?a_(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},zo=class extends Sr{constructor(e,t,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=ES(l),this.hostAttr=DS(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},CS=(()=>{class n extends Go{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(S(me))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),i_=["alt","control","meta","shift"],bS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TS={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},SS=(()=>{class n extends Go{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mi().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),i_.forEach(l=>{let u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=bS[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),i_.forEach(o=>{if(o!==r){let a=TS[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(S(me))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function c_(n,e){return Wm(E({rootComponent:n},AS(e)))}function AS(n){return{appProviders:[...PS,...n?.providers??[]],platformProviders:RS}}function MS(){Fu.makeCurrent()}function NS(){return new Tt}function xS(){return sm(document),document}var RS=[{provide:$t,useValue:xu},{provide:cu,useValue:MS,multi:!0},{provide:me,useFactory:xS,deps:[]}];var PS=[{provide:bo,useValue:"root"},{provide:Tt,useFactory:NS,deps:[]},{provide:Lu,useClass:CS,multi:!0,deps:[me,se,$t]},{provide:Lu,useClass:SS,multi:!0,deps:[me]},t_,s_,r_,{provide:fr,useExisting:t_},{provide:Wo,useClass:_S,deps:[]},[]];var l_={providers:[]};var __=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(M(wr),M(ke))}}static{this.\u0275dir=ve({type:n})}}return n})(),y_=(()=>{class n extends __{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ou(n)))(r||n)}})()}static{this.\u0275dir=ve({type:n,features:[Wt]})}}return n})(),Wu=new R("");var kS={provide:Wu,useExisting:Di(()=>Zo),multi:!0};function OS(){let n=Mi()?Mi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var FS=new R(""),Zo=(()=>{class n extends __{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!OS())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(M(wr),M(ke),M(FS,8))}}static{this.\u0275dir=ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&q("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[_t([kS]),Wt]})}}return n})();var LS=new R(""),VS=new R("");function v_(n){return n!=null}function w_(n){return Dr(n)?Ct(n):n}function I_(n){let e={};return n.forEach(t=>{e=t!=null?E(E({},e),t):e}),Object.keys(e).length===0?null:e}function E_(n,e){return e.map(t=>t(n))}function jS(n){return!n.validate}function D_(n){return n.map(e=>jS(e)?e:t=>e.validate(t))}function BS(n){if(!n)return null;let e=n.filter(v_);return e.length==0?null:function(t){return I_(E_(t,e))}}function C_(n){return n!=null?BS(D_(n)):null}function US(n){if(!n)return null;let e=n.filter(v_);return e.length==0?null:function(t){let i=E_(t,e).map(w_);return Uc(i).pipe(Ze(I_))}}function b_(n){return n!=null?US(D_(n)):null}function u_(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function HS(n){return n._rawValidators}function $S(n){return n._rawAsyncValidators}function Bu(n){return n?Array.isArray(n)?n:[n]:[]}function Ko(n,e){return Array.isArray(n)?n.includes(e):n===e}function d_(n,e){let t=Bu(e);return Bu(n).forEach(r=>{Ko(t,r)||t.push(r)}),t}function h_(n,e){return Bu(e).filter(t=>!Ko(n,t))}var Yo=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=C_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=b_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Uu=class extends Yo{get formDirective(){return null}get path(){return null}},Nr=class extends Yo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Hu=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},WS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},uj=Y(E({},WS),{"[class.ng-submitted]":"isSubmitted"}),T_=(()=>{class n extends Hu{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(M(Nr,2))}}static{this.\u0275dir=ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&$e("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Wt]})}}return n})();var Ar="VALID",qo="INVALID",Ni="PENDING",Mr="DISABLED";function GS(n){return(Qo(n)?n.validators:n)||null}function zS(n){return Array.isArray(n)?C_(n):n||null}function qS(n,e){return(Qo(e)?e.asyncValidators:n)||null}function KS(n){return Array.isArray(n)?b_(n):n||null}function Qo(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var $u=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ar}get invalid(){return this.status===qo}get pending(){return this.status==Ni}get disabled(){return this.status===Mr}get enabled(){return this.status!==Mr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(d_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(d_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(h_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(h_(e,this._rawAsyncValidators))}hasValidator(e){return Ko(this._rawValidators,e)}hasAsyncValidator(e){return Ko(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ni,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mr,this.errors=null,this._forEachChild(i=>{i.disable(Y(E({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Y(E({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ar,this._forEachChild(i=>{i.enable(Y(E({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Y(E({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ar||this.status===Ni)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mr:Ar}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ni,this._hasOwnPendingAsyncValidator=!0;let t=w_(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ue,this.statusChanges=new ue}_calculateStatus(){return this._allControlsDisabled()?Mr:this.errors?qo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ni)?Ni:this._anyControlsHaveStatus(qo)?qo:Ar}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qo(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=zS(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=KS(this._rawAsyncValidators)}};var S_=new R("CallSetDisabledState",{providedIn:"root",factory:()=>Gu}),Gu="always";function YS(n,e){return[...e.path,n]}function ZS(n,e,t=Gu){JS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),XS(n,e),t0(n,e),e0(n,e),QS(n,e)}function f_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QS(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function JS(n,e){let t=HS(n);e.validator!==null?n.setValidators(u_(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=$S(n);e.asyncValidator!==null?n.setAsyncValidators(u_(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();f_(e._rawValidators,r),f_(e._rawAsyncValidators,r)}function XS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&A_(n,e)})}function e0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&A_(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function A_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function t0(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function n0(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function i0(n){return Object.getPrototypeOf(n.constructor)===y_}function r0(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Zo?t=s:i0(s)?i=s:r=s}),r||i||t||null}function p_(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function g_(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var s0=class extends $u{constructor(e=null,t,i){super(GS(t),qS(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qo(t)&&(t.nonNullable||t.initialValueIsDefault)&&(g_(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){p_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){p_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){g_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var o0={provide:Nr,useExisting:Di(()=>zu)},m_=Promise.resolve(),zu=(()=>{class n extends Nr{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new s0,this._registered=!1,this.name="",this.update=new ue,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=r0(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),n0(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ZS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){m_.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Nt(i);m_.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?YS(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(M(Uu,9),M(LS,10),M(VS,10),M(Wu,10),M(qt,8),M(S_,8))}}static{this.\u0275dir=ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[B.None,"disabled","isDisabled"],model:[B.None,"ngModel","model"],options:[B.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_t([o0]),Wt,An]})}}return n})();var a0={provide:Wu,useExisting:Di(()=>qu),multi:!0},qu=(()=>{class n extends y_{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ou(n)))(r||n)}})()}static{this.\u0275dir=ve({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&q("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[_t([a0]),Wt]})}}return n})();var c0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({})}}return n})();var M_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:S_,useValue:t.callSetDisabledState??Gu}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({imports:[c0]})}}return n})();function Jo(n,e=0){return u0(n)?Number(n):e}function u0(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function N_(n){return Array.isArray(n)?n:[n]}function Ie(n){return n instanceof ke?n.nativeElement:n}var Yu;try{Yu=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Yu=!1}var Zu=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?e_(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Yu)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(S($t))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xr;function d0(){if(xr==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>xr=!0}))}finally{xr=xr||!1}return xr}function Rr(n){return d0()?n:!!n.capture}var Ku;function h0(){if(Ku==null){let n=typeof document<"u"?document.head:null;Ku=!!(n&&(n.createShadowRoot||n.attachShadow))}return Ku}function Qu(n){if(h0()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Pr(n){return n.composedPath?n.composedPath()[0]:n.target}var p0=new R("cdk-dir-doc",{providedIn:"root",factory:g0});function g0(){return ie(me)}var m0=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function _0(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?m0.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Ju=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ue,t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=_0(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(S(p0,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var v0=20,x_=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new j,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=v0){return this._platform.isBrowser?new K(i=>{this._globalSubscription||this._addGlobalListener();let r=t>0?this._scrolled.pipe(qs(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):jc()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe($c(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Ie(i),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return tr(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(S(se),S(Zu),S(me,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var w0=20,R_=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new j,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,a=-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:a}}change(t=w0){return t>0?this._change.pipe(qs(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(S(Zu),S(se),S(me,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var P_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({})}}return n})();function k_(n){return n.buttons===0||n.detail===0}function O_(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function od(n,e,t){for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];r?n.setProperty(i,r,t?.has(i)?"important":""):n.removeProperty(i)}return n}function xi(n,e){let t=e?"":"none";od(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function F_(n,e,t){od(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function na(n,e){return e&&e!="none"?n+" "+e:n}function L_(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=ia(e.left,e.top)}function ia(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function ad(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function ed(n,e,t){let{top:i,bottom:r,left:s,right:o}=n;return t>=i&&t<=r&&e>=s&&e<=o}function Or(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function V_(n,e,t,i){let{top:r,right:s,bottom:o,left:a,width:c,height:l}=n,u=c*e,d=l*e;return i>r-d&&i<o+d&&t>a-u&&t<s+u}var ra=class{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:ad(t)})})}handleScroll(e){let t=Pr(e),i=this.positions.get(t);if(!i)return null;let r=i.scrollPosition,s,o;if(t===this._document){let l=this.getViewportScrollPosition();s=l.top,o=l.left}else s=t.scrollTop,o=t.scrollLeft;let a=r.top-s,c=r.left-o;return this.positions.forEach((l,u)=>{l.clientRect&&t!==u&&t.contains(u)&&Or(l.clientRect,a,c)}),r.top=s,r.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Q_(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<t.length;r++)t[r].removeAttribute("id");return i==="canvas"?U_(n,e):(i==="input"||i==="select"||i==="textarea")&&B_(n,e),j_("canvas",n,e,U_),j_("input, textarea, select",n,e,B_),e}function j_(n,e,t,i){let r=e.querySelectorAll(n);if(r.length){let s=t.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}var E0=0;function B_(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${E0++}`)}function U_(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function J_(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let i=e.createElement("div");return t.forEach(r=>i.appendChild(r)),i}function H_(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function D0(n){let e=getComputedStyle(n),t=Xu(e,"transition-property"),i=t.find(a=>a==="transform"||a==="all");if(!i)return 0;let r=t.indexOf(i),s=Xu(e,"transition-duration"),o=Xu(e,"transition-delay");return H_(s[r])+H_(o[r])}function Xu(n,e){return n.getPropertyValue(e).split(",").map(i=>i.trim())}var C0=new Set(["position"]),td=class{constructor(e,t,i,r,s,o,a,c,l){this._document=e,this._rootElement=t,this._direction=i,this._initialDomRect=r,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=l}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),"showPopover"in this._preview&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return D0(this._preview)}addEventListener(e,t){this._preview.addEventListener(e,t)}removeEventListener(e,t){this._preview.removeEventListener(e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,i=e?e.template:null,r;if(i&&e){let s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(i,e.context);o.detectChanges(),r=J_(o,this._document),this._previewEmbeddedView=o,e.matchSize?L_(r,s):r.style.transform=ia(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Q_(this._rootElement),L_(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return od(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},C0),xi(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>r.classList.add(s)):r.classList.add(t)),r}},$_=Rr({passive:!0}),Xo=Rr({passive:!1}),W_=Rr({passive:!1,capture:!0}),b0=800,G_=new Set(["position"]),nd=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>xi(t,e)))}constructor(e,t,i,r,s,o){this._config=t,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new j,this._pointerMoveSubscription=ee.EMPTY,this._pointerUpSubscription=ee.EMPTY,this._scrollSubscription=ee.EMPTY,this._resizeSubscription=ee.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new j,this.started=new j,this.released=new j,this.ended=new j,this.entered=new j,this.exited=new j,this.dropped=new j,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{let c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){let u=Math.abs(c.x-this._pickupPositionOnPage.x),d=Math.abs(c.y-this._pickupPositionOnPage.y);if(u+d>=this._config.dragStartThreshold){let f=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),g=this._dropContainer;if(!f){this._endDragSequence(a);return}(!g||!g.isDragging()&&!g.isReceiving())&&(a.cancelable&&a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.cancelable&&a.preventDefault();let l=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(l),this._dropContainer)this._updateActiveDropContainer(l,c);else{let u=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,d=this._activeTransform;d.x=l.x-u.x+this._passiveTransform.x,d.y=l.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(d.x,d.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:l,event:a,distance:this._getDragDistance(l),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new ra(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>Ie(i)),this._handles.forEach(i=>xi(i,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=Ie(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,Xo),t.addEventListener("touchstart",this._pointerDown,$_),t.addEventListener("dragstart",this._nativeDragStart,Xo)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Ie(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),xi(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),xi(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",q_,W_)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){kr(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),i=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{t.addEventListener("selectstart",q_,W_)}),i){let r=this._rootElement,s=r.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(a,r),this._initialTransform=r.style.transform||"",this._preview=new td(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(s,t)),F_(r,!1,G_),this._document.body.appendChild(s.replaceChild(o,r)),this.started.next({source:this,event:e}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let i=this.isDragging(),r=kr(t),s=!r&&t.button!==0,o=this._rootElement,a=Pr(t),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+b0>Date.now(),l=r?O_(t):k_(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),i||s||c||l)return;if(this._handles.length){let h=o.style;this._rootElementTapHighlight=h.webkitTapHighlightColor||"",h.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(h=>this._updateOnScroll(h)),this._boundaryElement&&(this._boundaryRect=ad(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let d=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:d.x,y:d.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){F_(this._rootElement,!0,G_),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,i=t.getItemIndex(this),r=this._getPointerPositionOnPage(e),s=this._getDragDistance(r),o=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:e}),t.drop(this,i,this._initialIndex,this._initialContainer,o,s,r,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=o=>{(!o||Pr(o)===this._preview&&o.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,t*1.5);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=J_(this._placeholderRef,this._document)):i=Q_(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,t,i){let r=t===this._rootElement?null:t,s=r?r.getBoundingClientRect():e,o=kr(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,l=o.pageY-s.top-a.top;return{x:s.left-e.left+c,y:s.top-e.top+l}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),i=kr(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=i.pageX-t.left,s=i.pageY-t.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:l}=this._getPreviewRect(),u=a.top+o,d=a.bottom-(l-o),h=a.left+s,f=a.right-(c-s);i=z_(i,h,f),r=z_(r,u,d)}return{x:i,y:r}}_updatePointerDirectionDelta(e){let{x:t,y:i}=e,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,xi(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,Xo),e.removeEventListener("touchstart",this._pointerDown,$_),e.removeEventListener("dragstart",this._nativeDragStart,Xo)}_applyRootElementTransform(e,t){let i=ia(e,t),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=na(i,this._initialTransform)}_applyPreviewTransform(e,t){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=ia(e,t);this._preview.setTransform(na(r,i))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let s=r.left-i.left,o=i.right-r.right,a=r.top-i.top,c=i.bottom-r.bottom;r.width>i.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,r.height>i.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:kr(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let i=Pr(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Or(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Qu(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let i=this._previewContainer||"global";if(i==="parent")return e;if(i==="global"){let r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Ie(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}};function z_(n,e,t){return Math.max(e,Math.min(t,n))}function kr(n){return n.type[0]==="t"}function q_(n){n.preventDefault()}function sa(n,e,t){let i=K_(e,n.length-1),r=K_(t,n.length-1);if(i===r)return;let s=n[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)n[a]=n[a+o];n[r]=s}function K_(n,e){return Math.max(0,Math.min(e,n))}var id=class{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,i,r){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,i,r);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(I=>I.drag===e),l=s[o],u=s[c].clientRect,d=l.clientRect,h=c>o?1:-1,f=this._getItemOffsetPx(u,d,h),g=this._getSiblingOffsetPx(c,s,h),_=s.slice();return sa(s,c,o),s.forEach((I,x)=>{if(_[x]===I)return;let ae=I.drag===e,J=ae?f:g,_e=ae?e.getPlaceholderElement():I.drag.getRootElement();I.offset+=J,a?(_e.style.transform=na(`translate3d(${Math.round(I.offset)}px, 0, 0)`,I.initialTransform),Or(I.clientRect,0,J)):(_e.style.transform=na(`translate3d(0, ${Math.round(I.offset)}px, 0)`,I.initialTransform),Or(I.clientRect,J,0))}),this._previousSwap.overlaps=ed(d,t,i),this._previousSwap.drag=l.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:c,currentIndex:o}}enter(e,t,i,r){let s=r==null||r<0?this._getItemIndexFromPointerPosition(e,t,i):r,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement(),l=o[s];if(l===e&&(l=o[s+1]),!l&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(l=o[0]),a>-1&&o.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){let u=l.getRootElement();u.parentElement.insertBefore(c,u),o.splice(s,0,e)}else Ie(this._element).appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{let t=e.getRootElement();if(t){let i=this._itemPositions.find(r=>r.drag===e)?.initialTransform;t.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:i})=>{Or(i,e,t)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:ad(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_getItemOffsetPx(e,t,i){let r=this.orientation==="horizontal",s=r?t.left-e.left:t.top-e.top;return i===-1&&(s+=r?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,i){let r=this.orientation==="horizontal",s=t[e].clientRect,o=t[e+i*-1],a=s[r?"width":"height"]*i;if(o){let c=r?"left":"top",l=r?"right":"bottom";i===-1?a-=o.clientRect[c]-s[l]:a+=s[c]-o.clientRect[l]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let o=i[i.length-1].clientRect;return r?e>=o.right:t>=o.bottom}else{let o=i[0].clientRect;return r?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,i,r){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(r){let l=s?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&l===this._previousSwap.delta)return!1}return s?t>=Math.floor(c.left)&&t<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,e)?-1:o}},Y_=.05,X_=.05,We=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(We||{}),Se=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(Se||{}),rd=class{constructor(e,t,i,r,s){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new j,this.entered=new j,this.exited=new j,this.dropped=new j,this.sorted=new j,this.receivingStarted=new j,this.receivingStopped=new j,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=ee.EMPTY,this._verticalScrollDirection=We.NONE,this._horizontalScrollDirection=Se.NONE,this._stopScrollTimers=new j,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),Hc(0,Ns).pipe(yn(this._stopScrollTimers)).subscribe(()=>{let o=this._scrollNode,a=this.autoScrollStep;this._verticalScrollDirection===We.UP?o.scrollBy(0,-a):this._verticalScrollDirection===We.DOWN&&o.scrollBy(0,a),this._horizontalScrollDirection===Se.LEFT?o.scrollBy(-a,0):this._horizontalScrollDirection===Se.RIGHT&&o.scrollBy(a,0)})},this.element=Ie(e),this._document=i,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new ra(i),this._sortStrategy=new id(this.element,t),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,r,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(r=>r.isDragging()).every(r=>e.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){let t=Ie(this.element);return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,r){if(this.sortingDisabled||!this._domRect||!V_(this._domRect,Y_,t,i))return;let s=this._sortStrategy.sort(e,t,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,r=We.NONE,s=Se.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||V_(o.clientRect,Y_,e,t)&&([r,s]=T0(a,o.clientRect,this._sortStrategy.direction,e,t),(r||s)&&(i=a))}),!r&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};r=ey(c,t),s=ty(c,e),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=Ie(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){let e=Ie(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;let e=Ie(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return this._domRect!=null&&ed(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(r=>r._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._domRect||!ed(this._domRect,t,i)||!this.enterPredicate(e,this))return!1;let r=this._getShadowRoot().elementFromPoint(t,i);if(!r)return!1;let s=Ie(this.element);return r===s||s.contains(r)}_startReceiving(e,t){let i=this._activeSiblings;!i.has(e)&&t.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Qu(Ie(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function ey(n,e){let{top:t,bottom:i,height:r}=n,s=r*X_;return e>=t-s&&e<=t+s?We.UP:e>=i-s&&e<=i+s?We.DOWN:We.NONE}function ty(n,e){let{left:t,right:i,width:r}=n,s=r*X_;return e>=t-s&&e<=t+s?Se.LEFT:e>=i-s&&e<=i+s?Se.RIGHT:Se.NONE}function T0(n,e,t,i,r){let s=ey(e,r),o=ty(e,i),a=We.NONE,c=Se.NONE;if(s){let l=n.scrollTop;s===We.UP?l>0&&(a=We.UP):n.scrollHeight-l>n.clientHeight&&(a=We.DOWN)}if(o){let l=n.scrollLeft;t==="rtl"?o===Se.RIGHT?l<0&&(c=Se.RIGHT):n.scrollWidth+l>n.clientWidth&&(c=Se.LEFT):o===Se.LEFT?l>0&&(c=Se.LEFT):n.scrollWidth-l>n.clientWidth&&(c=Se.RIGHT)}return[a,c]}var ea=Rr({passive:!1,capture:!0}),ta=new Set,S0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=yr({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[Er],decls:0,vars:0,template:function(i,r){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit}}"],encapsulation:2,changeDetection:0})}}return n})(),A0=(()=>{class n{constructor(t,i){this._ngZone=t,this._appRef=ie(Cr),this._environmentInjector=ie(ft),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new j,this.pointerUp=new j,this.scroll=new j,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,ea)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ea)}startDragging(t,i){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._loadResets(),this._activeDragInstances.push(t),this._activeDragInstances.length===1)){let r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ea}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:ea}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(t){let i=this._activeDragInstances.indexOf(t);i>-1&&(this._activeDragInstances.splice(i,1),this._activeDragInstances.length===0&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){let i=[this.scroll];return t&&t!==this._document&&i.push(new K(r=>this._ngZone.runOutsideAngular(()=>{let o=a=>{this._activeDragInstances.length&&r.next(a)};return t.addEventListener("scroll",o,!0),()=>{t.removeEventListener("scroll",o,!0)}}))),nr(...i)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,i)=>{this._document.removeEventListener(i,t.handler,t.options)}),this._globalListeners.clear()}_loadResets(){if(!ta.has(this._appRef)){ta.add(this._appRef);let t=Gm(S0,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{ta.delete(this._appRef),ta.size===0&&t.destroy()})}}static{this.\u0275fac=function(i){return new(i||n)(S(se),S(me))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),M0={dragStartThreshold:5,pointerDirectionChangeThreshold:5},cd=(()=>{class n{constructor(t,i,r,s){this._document=t,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(t,i=M0){return new nd(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new rd(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(i){return new(i||n)(S(me),S(se),S(R_),S(A0))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sd=new R("CDK_DRAG_PARENT");var ny=new R("CdkDragHandle"),iy=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}constructor(t,i){this.element=t,this._parentDrag=i,this._stateChanges=new j,this._disabled=!1,i?._addHandle(this)}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static{this.\u0275fac=function(i){return new(i||n)(M(ke),M(sd,12))}}static{this.\u0275dir=ve({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[B.HasDecoratorInputTransform,"cdkDragHandleDisabled","disabled",Nt]},standalone:!0,features:[_t([{provide:ny,useExisting:n}]),Ai]})}}return n})(),ry=new R("CDK_DRAG_CONFIG"),N0="cdk-drag",sy=new R("CdkDropList"),oy=(()=>{class n{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}constructor(t,i,r,s,o,a,c,l,u,d,h){this.element=t,this.dropContainer=i,this._ngZone=s,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=u,this._selfHandle=d,this._parentDrag=h,this._destroyed=new j,this._handles=new mn([]),this.started=new ue,this.released=new ue,this.ended=new ue,this.entered=new ue,this.exited=new ue,this.dropped=new ue,this.moved=new K(f=>{let g=this._dragRef.moved.pipe(Ze(_=>({source:this,pointerPosition:_.pointerPosition,event:_.event,delta:_.delta,distance:_.distance}))).subscribe(f);return()=>{g.unsubscribe()}}),this._dragRef=l.createDrag(t,{dragStartThreshold:a&&a.dragStartThreshold!=null?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&a.pointerDirectionChangeThreshold!=null?a.pointerDirectionChangeThreshold:5,zIndex:a?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),a&&this._assignDefaults(a),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ks(1),yn(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){let i=t.rootElementSelector,r=t.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let i=this._handles.getValue();i.push(t),this._handles.next(i)}_removeHandle(t){let i=this._handles.getValue(),r=i.indexOf(t);r>-1&&(i.splice(r,1),this._handles.next(i))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,i=t;this.rootElementSelector&&(i=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):Ie(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let i=this._dir,r=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay=typeof r=="object"&&r?r:Jo(r),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),i&&t.withDirection(i.value)}}),t.beforeStarted.pipe(Ks(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains(N0)){t.withParent(n._dragInstances.find(r=>r.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(t){t.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),t.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(t){let{lockAxis:i,dragStartDelay:r,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:l,previewContainer:u}=t;this.disabled=c??!1,this.dragStartDelay=r||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),l&&(this.rootElementSelector=l),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.pipe(Wc(t=>{let i=t.map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Ys(t=>nr(...t.map(i=>i._stateChanges.pipe(ir(i))))),yn(this._destroyed)).subscribe(t=>{let i=this._dragRef,r=t.element.nativeElement;t.disabled?i.disableHandle(r):i.enableHandle(r)})}static{this.\u0275fac=function(i){return new(i||n)(M(ke),M(sy,12),M(me),M(se),M(Nn),M(ry,8),M(Ju,8),M(cd),M(qt),M(ny,10),M(sd,12))}}static{this.\u0275dir=ve({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,r){i&2&&$e("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:[B.None,"cdkDragData","data"],lockAxis:[B.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[B.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[B.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[B.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[B.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[B.HasDecoratorInputTransform,"cdkDragDisabled","disabled",Nt],constrainPosition:[B.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[B.None,"cdkDragPreviewClass","previewClass"],previewContainer:[B.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[_t([{provide:sd,useExisting:n}]),Ai,An]})}}return n})(),Z_=new R("CdkDropListGroup");var x0=0,ay=(()=>{class n{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}constructor(t,i,r,s,o,a,c){this.element=t,this._changeDetectorRef=r,this._scrollDispatcher=s,this._dir=o,this._group=a,this._destroyed=new j,this.connectedTo=[],this.id=`cdk-drop-list-${x0++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new ue,this.entered=new ue,this.exited=new ue,this.sorted=new ue,this._unsortedItems=new Set,this._dropListRef=i.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(l,u)=>this.enterPredicate(l.data,u.data),this._dropListRef.sortPredicate=(l,u,d)=>this.sortPredicate(l,u.data,d.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),a&&a._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,i)=>t._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(ir(this._dir.value),yn(this._destroyed)).subscribe(i=>t.withDirection(i)),t.beforeStarted.subscribe(()=>{let i=N_(this.connectedTo).map(r=>{if(typeof r=="string"){let s=n._dropLists.find(o=>o.id===r);return s}return r});if(this._group&&this._group._items.forEach(r=>{i.indexOf(r)===-1&&i.push(r)}),!this._scrollableParentsResolved){let r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=Jo(this.autoScrollStep,2),t.connectedTo(i.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),nr(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:i,draggingDisabled:r,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:a}=t;this.disabled=r??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=a||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}static{this.\u0275fac=function(i){return new(i||n)(M(ke),M(cd),M(qt),M(x_),M(Ju,8),M(Z_,12),M(ry,8))}}static{this.\u0275dir=ve({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,r){i&2&&(xn("id",r.id),$e("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:[B.None,"cdkDropListConnectedTo","connectedTo"],data:[B.None,"cdkDropListData","data"],orientation:[B.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[B.None,"cdkDropListLockAxis","lockAxis"],disabled:[B.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",Nt],sortingDisabled:[B.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",Nt],enterPredicate:[B.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[B.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[B.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Nt],autoScrollStep:[B.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[_t([{provide:Z_,useValue:void 0},{provide:sy,useExisting:n}]),Ai]})}}return n})();var cy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({providers:[cd],imports:[P_]})}}return n})();var ly=()=>{};var ud={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(n,e){if(!n)throw kn(e)},kn=function(n){return new Error("Firebase Database ("+ud.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var hy=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},P0=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},aa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),i.push(t[u],t[d],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):P0(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new dd;let h=s<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let g=l<<6&192|d;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},dd=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},fd=function(n){let e=hy(n);return aa.encodeByteArray(e,!0)},Lr=function(n){return fd(n).replace(/\./g,"")},Ri=function(n){try{return aa.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fy(n){return py(void 0,n)}function py(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!k0(t)||(n[t]=py(n[t],e[t]));return n}function k0(n){return n!=="__proto__"}function O0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var F0=()=>O0().__FIREBASE_DEFAULTS__,L0=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},V0=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ri(n[1]);return e&&JSON.parse(e)},pd=()=>{try{return ly()||F0()||L0()||V0()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gd=n=>pd()?.emulatorHosts?.[n],gy=n=>{let e=gd(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},md=()=>pd()?.config,_d=n=>pd()?.[`_${n}`];var xt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function Yt(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function ca(n){return p(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function my(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=E({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Lr(JSON.stringify(t)),Lr(JSON.stringify(o)),""].join(".")}var Fr={};function j0(){let n={prod:[],emulator:[]};for(let e of Object.keys(Fr))Fr[e]?n.emulator.push(e):n.prod.push(e);return n}function B0(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var uy=!1;function la(n,e){if(typeof window>"u"||typeof document>"u"||!Yt(window.location.host)||Fr[n]===e||Fr[n]||uy)return;Fr[n]=e;function t(h){return`__firebase__banner__${h}`}let i="__firebase__banner",s=j0().prod.length>0;function o(){let h=document.getElementById(i);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,f){h.setAttribute("width","24"),h.setAttribute("id",f),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{uy=!0,o()},h}function u(h,f){h.setAttribute("id",f),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){let h=B0(i),f=t("text"),g=document.getElementById(f)||document.createElement("span"),_=t("learnmore"),I=document.getElementById(_)||document.createElement("a"),x=t("preprendIcon"),ae=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let J=h.element;a(J),u(I,_);let _e=l();c(ae,x),J.append(ae,g,I,_e),document.body.appendChild(J)}s?(g.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ee(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function _y(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yy(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ua(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vy(){let n=Ee();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function yt(){return ud.NODE_CLIENT===!0||ud.NODE_ADMIN===!0}function wy(){try{return typeof indexedDB=="object"}catch{return!1}}function Iy(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}var U0="FirebaseError",nt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=U0,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rt.prototype.create)}},Rt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?H0(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new nt(r,a,i)}};function H0(n,e){return n.replace($0,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var $0=/\{\$([^}]+)}/g;function Pi(n){return JSON.parse(n)}function fe(n){return JSON.stringify(n)}var Ey=function(n){let e={},t={},i={},r="";try{let s=n.split(".");e=Pi(Ri(s[0])||""),t=Pi(Ri(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}};var Dy=function(n){let e=Ey(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Cy=function(n){let e=Ey(n).claims;return typeof e=="object"&&e.admin===!0};function Ge(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Zt(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function jr(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Br(n,e,t){let i={};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function vt(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(dy(s)&&dy(o)){if(!vt(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function dy(n){return n!==null&&typeof n=="object"}function On(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}var oa=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(h<<1|h>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(r<<5|r>>>27)+l+c+u+i[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let i=t-this.blockSize,r=0,s=this.buf_,o=this.inbuf_;for(;r<t;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}};function by(n,e){let t=new hd(n,e);return t.subscribe.bind(t)}var hd=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");W0(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=ld),r.error===void 0&&(r.error=ld),r.complete===void 0&&(r.complete=ld);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function W0(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ld(){}function da(n,e){return`${n} failed: ${e} argument `}var Ty=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){let s=r-55296;i++,m(i<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Ur=function(n){let e=0;for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};var fB=4*60*60*1e3;function De(n){return n&&n._delegate?n._delegate:n}var ze=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Fn="[DEFAULT]";var ha=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new xt;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z0(e))try{this.getOrInitializeService({instanceIdentifier:Fn})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Fn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Fn){return this.instances.has(e)}getOptions(e=Fn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){let i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);let s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:G0(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fn){return this.component?this.component.multipleInstances?e:Fn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function G0(n){return n===Fn?void 0:n}function z0(n){return n.instantiationMode==="EAGER"}var Hr=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ha(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var q0=[],Z=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Z||{}),K0={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},Y0=Z.INFO,Z0={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Q0=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Z0[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qt=class{constructor(e){this.name=e,this._logLevel=Y0,this._logHandler=Q0,this._userLogHandler=null,q0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?K0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var J0=(n,e)=>e.some(t=>n instanceof t),Sy,Ay;function X0(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eA(){return Ay||(Ay=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var My=new WeakMap,vd=new WeakMap,Ny=new WeakMap,yd=new WeakMap,Id=new WeakMap;function tA(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(wt(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&My.set(t,n)}).catch(()=>{}),Id.set(e,n),e}function nA(n){if(vd.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});vd.set(n,e)}var wd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ny.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xy(n){wd=n(wd)}function iA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(fa(this),e,...t);return Ny.set(i,e.sort?e.sort():[e]),wt(i)}:eA().includes(n)?function(...e){return n.apply(fa(this),e),wt(My.get(this))}:function(...e){return wt(n.apply(fa(this),e))}}function rA(n){return typeof n=="function"?iA(n):(n instanceof IDBTransaction&&nA(n),J0(n,X0())?new Proxy(n,wd):n)}function wt(n){if(n instanceof IDBRequest)return tA(n);if(yd.has(n))return yd.get(n);let e=rA(n);return e!==n&&(yd.set(n,e),Id.set(e,n)),e}var fa=n=>Id.get(n);function Py(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),a=wt(o);return i&&o.addEventListener("upgradeneeded",c=>{i(wt(o.result),c.oldVersion,c.newVersion,wt(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var sA=["get","getKey","getAll","getAllKeys","count"],oA=["put","add","delete","clear"],Ed=new Map;function Ry(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ed.get(e))return Ed.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=oA.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||sA.includes(t)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),r&&c.done]))[0]})};return Ed.set(e,s),s}xy(n=>Y(E({},n),{get:(e,t,i)=>Ry(e,t)||n.get(e,t,i),has:(e,t)=>!!Ry(e,t)||n.has(e,t)}));var Cd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aA(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function aA(n){return n.getComponent()?.type==="VERSION"}var bd="@firebase/app",ky="0.14.6";var Pt=new Qt("@firebase/app"),cA="@firebase/app-compat",lA="@firebase/analytics-compat",uA="@firebase/analytics",dA="@firebase/app-check-compat",hA="@firebase/app-check",fA="@firebase/auth",pA="@firebase/auth-compat",gA="@firebase/database",mA="@firebase/data-connect",_A="@firebase/database-compat",yA="@firebase/functions",vA="@firebase/functions-compat",wA="@firebase/installations",IA="@firebase/installations-compat",EA="@firebase/messaging",DA="@firebase/messaging-compat",CA="@firebase/performance",bA="@firebase/performance-compat",TA="@firebase/remote-config",SA="@firebase/remote-config-compat",AA="@firebase/storage",MA="@firebase/storage-compat",NA="@firebase/firestore",xA="@firebase/ai",RA="@firebase/firestore-compat",PA="firebase",kA="12.6.0";var Td="[DEFAULT]",OA={[bd]:"fire-core",[cA]:"fire-core-compat",[uA]:"fire-analytics",[lA]:"fire-analytics-compat",[hA]:"fire-app-check",[dA]:"fire-app-check-compat",[fA]:"fire-auth",[pA]:"fire-auth-compat",[gA]:"fire-rtdb",[mA]:"fire-data-connect",[_A]:"fire-rtdb-compat",[yA]:"fire-fn",[vA]:"fire-fn-compat",[wA]:"fire-iid",[IA]:"fire-iid-compat",[EA]:"fire-fcm",[DA]:"fire-fcm-compat",[CA]:"fire-perf",[bA]:"fire-perf-compat",[TA]:"fire-rc",[SA]:"fire-rc-compat",[AA]:"fire-gcs",[MA]:"fire-gcs-compat",[NA]:"fire-fst",[RA]:"fire-fst-compat",[xA]:"fire-vertex","fire-js":"fire-js",[PA]:"fire-js-all"};var pa=new Map,FA=new Map,Sd=new Map;function Oy(n,e){try{n.container.addComponent(e)}catch(t){Pt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xt(n){let e=n.name;if(Sd.has(e))return Pt.debug(`There were multiple attempts to register component ${e}.`),!1;Sd.set(e,n);for(let t of pa.values())Oy(t,n);for(let t of FA.values())Oy(t,n);return!0}function Wr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Oe(n){return n==null?!1:n.settings!==void 0}var LA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jt=new Rt("app","Firebase",LA);var Ad=class{constructor(e,t,i){this._isDeleted=!1,this._options=E({},e),this._config=E({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ze("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jt.create("app-deleted",{appName:this._name})}};var en=kA;function xd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=E({name:Td,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Jt.create("bad-app-name",{appName:String(r)});if(t||(t=md()),!t)throw Jt.create("no-options");let s=pa.get(r);if(s){if(vt(t,s.options)&&vt(i,s.config))return s;throw Jt.create("duplicate-app",{appName:r})}let o=new Hr(r);for(let c of Sd.values())o.addComponent(c);let a=new Ad(t,i,o);return pa.set(r,a),a}function ga(n=Td){let e=pa.get(n);if(!e&&n===Td&&md())return xd();if(!e)throw Jt.create("no-app",{appName:n});return e}function it(n,e,t){let i=OA[n]??n;t&&(i+=`-${t}`);let r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){let o=[`Unable to register library "${i}" with version "${e}":`];r&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pt.warn(o.join(" "));return}Xt(new ze(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var VA="firebase-heartbeat-database",jA=1,$r="firebase-heartbeat-store",Dd=null;function jy(){return Dd||(Dd=Py(VA,jA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($r)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jt.create("idb-open",{originalErrorMessage:n.message})})),Dd}function BA(n){return p(this,null,function*(){try{let t=(yield jy()).transaction($r),i=yield t.objectStore($r).get(By(n));return yield t.done,i}catch(e){if(e instanceof nt)Pt.warn(e.message);else{let t=Jt.create("idb-get",{originalErrorMessage:e?.message});Pt.warn(t.message)}}})}function Fy(n,e){return p(this,null,function*(){try{let i=(yield jy()).transaction($r,"readwrite");yield i.objectStore($r).put(e,By(n)),yield i.done}catch(t){if(t instanceof nt)Pt.warn(t.message);else{let i=Jt.create("idb-set",{originalErrorMessage:t?.message});Pt.warn(i.message)}}})}function By(n){return`${n.name}!${n.options.appId}`}var UA=1024,HA=30,Md=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Nd(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return p(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ly();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>HA){let r=WA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Pt.warn(e)}})}getHeartbeatsHeader(){return p(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Ly(),{heartbeatsToSend:t,unsentEntries:i}=$A(this._heartbeatsCache.heartbeats),r=Lr(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Pt.warn(e),""}})}};function Ly(){return new Date().toISOString().substring(0,10)}function $A(n,e=UA){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Vy(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Vy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Nd=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return wy()?Iy().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield BA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Fy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Fy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Vy(n){return Lr(JSON.stringify({version:2,heartbeats:n})).length}function WA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function GA(n){Xt(new ze("platform-logger",e=>new Cd(e),"PRIVATE")),Xt(new ze("heartbeat",e=>new Md(e),"PRIVATE")),it(bd,ky,n),it(bd,ky,"esm2020"),it("fire-js","")}GA("");var zA="firebase",qA="12.6.0";it(zA,qA,"app");function tv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var nv=tv,iv=new Rt("auth","Firebase",tv());var Ia=new Qt("@firebase/auth");function KA(n,...e){Ia.logLevel<=Z.WARN&&Ia.warn(`Auth (${en}): ${n}`,...e)}function _a(n,...e){Ia.logLevel<=Z.ERROR&&Ia.error(`Auth (${en}): ${n}`,...e)}function sn(n,...e){throw Qd(n,...e)}function Ln(n,...e){return Qd(n,...e)}function rv(n,e,t){let i=Y(E({},nv()),{[e]:t});return new Rt("auth","Firebase",i).create(e,{appName:n.name})}function rn(n){return rv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qd(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return iv.create(n,...e)}function T(n,e,...t){if(!n)throw Qd(e,...t)}function kt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw _a(e),new Error(e)}function on(n,e){n||kt(e)}function Od(){return typeof self<"u"&&self.location?.href||""}function YA(){return Uy()==="http:"||Uy()==="https:"}function Uy(){return typeof self<"u"&&self.location?.protocol||null}function ZA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YA()||yy()||"connection"in navigator)?navigator.onLine:!0}function QA(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Vn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,on(t>e,"Short delay should be less than long delay!"),this.isMobile=Vr()||ua()}get(){return ZA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Jd(n,e){on(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ea=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var JA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var XA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eM=new Vn(3e4,6e4);function Pa(n,e){return n.tenantId&&!e.tenantId?Y(E({},e),{tenantId:n.tenantId}):e}function ki(s,o,a,c){return p(this,arguments,function*(n,e,t,i,r={}){return sv(n,r,()=>p(this,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let d=On(E({key:n.config.apiKey},u)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let f=E({method:e,headers:h},l);return _y()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Yt(n.emulatorConfig.host)&&(f.credentials="include"),Ea.fetch()(yield av(n,n.config.apiHost,t,d),f)}))})}function sv(n,e,t){return p(this,null,function*(){n._canInitEmulator=!1;let i=E(E({},JA),e);try{let r=new Fd(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ma(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ma(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ma(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw ma(n,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rv(n,u,l);sn(n,u)}}catch(r){if(r instanceof nt)throw r;sn(n,"network-request-failed",{message:String(r)})}})}function ov(s,o,a,c){return p(this,arguments,function*(n,e,t,i,r={}){let l=yield ki(n,e,t,i,r);return"mfaPendingCredential"in l&&sn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function av(n,e,t,i){return p(this,null,function*(){let r=`${e}${t}?${i}`,s=n,o=s.config.emulator?Jd(n.config,r):`${n.config.apiScheme}://${r}`;return XA.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var Fd=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ln(this.auth,"network-request-failed")),eM.get())})}};function ma(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Ln(n,e,i);return r.customData._tokenResponse=t,r}function tM(n,e){return p(this,null,function*(){return ki(n,"POST","/v1/accounts:delete",e)})}function Da(n,e){return p(this,null,function*(){return ki(n,"POST","/v1/accounts:lookup",e)})}function Gr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cv(n,e=!1){return p(this,null,function*(){let t=De(n),i=yield t.getIdToken(e),r=Xd(i);T(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Gr(Rd(r.auth_time)),issuedAtTime:Gr(Rd(r.iat)),expirationTime:Gr(Rd(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Rd(n){return Number(n)*1e3}function Xd(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _a("JWT malformed, contained fewer than 3 sections"),null;try{let r=Ri(t);return r?JSON.parse(r):(_a("Failed to decode base64 JWT payload"),null)}catch(r){return _a("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Hy(n){let e=Xd(n);return T(e,"internal-error"),T(typeof e.exp<"u","internal-error"),T(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qr(n,e,t=!1){return p(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof nt&&nM(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function nM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ld=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),t)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Kr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gr(this.lastLoginAt),this.creationTime=Gr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ca(n){return p(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),i=yield qr(n,Da(e,{idToken:t}));T(i?.users.length,e,"internal-error");let r=i.users[0];n._notifyReloadListener(r);let s=r.providerUserInfo?.length?uv(r.providerUserInfo):[],o=iM(n.providerData,s),a=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!o?.length,l=a?c:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Kr(r.createdAt,r.lastLoginAt),isAnonymous:l};Object.assign(n,u)})}function lv(n){return p(this,null,function*(){let e=De(n);yield Ca(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function iM(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function uv(n){return n.map(i=>{var r=i,{providerId:e}=r,t=bc(r,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function rM(n,e){return p(this,null,function*(){let t=yield sv(n,{},()=>p(this,null,function*(){let i=On({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=yield av(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&Yt(n.emulatorConfig.host)&&(c.credentials="include"),Ea.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function sM(n,e){return p(this,null,function*(){return ki(n,"POST","/v2/accounts:revokeToken",Pa(n,e))})}var zr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){T(e.idToken,"internal-error"),T(typeof e.idToken<"u","internal-error"),T(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){T(e.length!==0,"internal-error");let t=Hy(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return p(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(T(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return p(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield rM(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(T(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(T(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(T(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return kt("not implemented")}};function tn(n,e){T(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var nn=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:i}=o,r=bc(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ld(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Kr(r.createdAt||void 0,r.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let t=yield qr(this,this.stsTokenManager.getToken(this.auth,e));return T(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return cv(this,e)}reload(){return lv(this)}_assign(e){this!==e&&(T(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>E({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Y(E({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return p(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Ca(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Oe(this.auth.app))return Promise.reject(rn(this.auth));let e=yield this.getIdToken();return yield qr(this,tM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Y(E({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>E({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:f,providerData:g,stsTokenManager:_}=t;T(d&&_,e,"internal-error");let I=zr.fromJSON(this.name,_);T(typeof d=="string",e,"internal-error"),tn(i,e.name),tn(r,e.name),T(typeof h=="boolean",e,"internal-error"),T(typeof f=="boolean",e,"internal-error"),tn(s,e.name),tn(o,e.name),tn(a,e.name),tn(c,e.name),tn(l,e.name),tn(u,e.name);let x=new n({uid:d,auth:e,email:r,emailVerified:h,displayName:i,isAnonymous:f,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:I,createdAt:l,lastLoginAt:u});return g&&Array.isArray(g)&&(x.providerData=g.map(ae=>E({},ae))),c&&(x._redirectEventId=c),x}static _fromIdTokenResponse(e,t,i=!1){return p(this,null,function*(){let r=new zr;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Ca(s),s})}static _fromGetAccountInfoResponse(e,t,i){return p(this,null,function*(){let r=t.users[0];T(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?uv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new zr;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Kr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var $y=new Map;function Ot(n){on(n instanceof Function,"Expected a class definition");let e=$y.get(n);return e?(on(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$y.set(n,e),e)}var oM=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(t,i){return p(this,null,function*(){this.storage[t]=i})}_get(t){return p(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return p(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Vd=oM;function ya(n,e,t){return`firebase:${n}:${e}:${t}`}var ba=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=ya(this.userKey,r.apiKey,s),this.fullPersistenceKey=ya("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Da(this.auth,{idToken:e}).catch(()=>{});return t?nn._fromGetAccountInfoResponse(this.auth,t,e):null}return nn._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return p(this,null,function*(){if(!t.length)return new n(Ot(Vd),e,i);let r=(yield Promise.all(t.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||Ot(Vd),o=ya(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d;if(typeof u=="string"){let h=yield Da(e,{idToken:u}).catch(()=>{});if(!h)break;d=yield nn._fromGetAccountInfoResponse(e,h,u)}else d=nn._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,i))})}};function Wy(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mv(e))return"Blackberry";if(_v(e))return"Webos";if(hv(e))return"Safari";if((e.includes("chrome/")||fv(e))&&!e.includes("edge/"))return"Chrome";if(gv(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function dv(n=Ee()){return/firefox\//i.test(n)}function hv(n=Ee()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fv(n=Ee()){return/crios\//i.test(n)}function pv(n=Ee()){return/iemobile/i.test(n)}function gv(n=Ee()){return/android/i.test(n)}function mv(n=Ee()){return/blackberry/i.test(n)}function _v(n=Ee()){return/webos/i.test(n)}function eh(n=Ee()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function aM(n=Ee()){return eh(n)&&!!window.navigator?.standalone}function cM(){return vy()&&document.documentMode===10}function yv(n=Ee()){return eh(n)||gv(n)||_v(n)||mv(n)||/windows phone/i.test(n)||pv(n)}function vv(n,e=[]){let t;switch(n){case"Browser":t=Wy(Ee());break;case"Worker":t=`${Wy(Ee())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${en}/${i}`}var jd=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function lM(t){return p(this,arguments,function*(n,e={}){return ki(n,"GET","/v2/passwordPolicy",Pa(n,e))})}var uM=6,Bd=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??uM,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Ud=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ta(this),this.idTokenSubscription=new Ta(this),this.beforeStateQueue=new jd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ot(t)),this._initializationPromise=this.queue(()=>p(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield ba.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let t=yield Da(this,{idToken:e}),i=yield nn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){if(Oe(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),i=t,r=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=i?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return T(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Ca(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=QA()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(Oe(this.app))return Promise.reject(rn(this));let t=e?De(e):null;return t&&T(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return p(this,null,function*(){if(!this._deleted)return e&&T(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Oe(this.app)?Promise.reject(rn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Oe(this.app)?Promise.reject(rn(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Ot(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield lM(this),t=new Bd(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield sM(this,i)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return p(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ot(e)||this._popupRedirectResolver;T(t,this,"argument-error"),this.redirectPersistenceManager=yield ba.create(this,[Ot(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(T(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return T(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=yield this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e})}_getAppCheckToken(){return p(this,null,function*(){if(Oe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&KA(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function ka(n){return De(n)}var Ta=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=by(t=>this.observer=t)}get next(){return T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var th={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dM(n){th=n}function hM(n){return th.loadJS(n)}function fM(){return th.gapiScript}function wv(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Iv(n,e){let t=Wr(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(vt(s,e??{}))return r;sn(r,"already-initialized")}return t.initialize({options:e})}function pM(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ot);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Ev(n,e,t){let i=ka(n);T(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=Dv(e),{host:o,port:a}=gM(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){T(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),T(vt(l,i.config.emulator)&&vt(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=l,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,Yt(o)?(ca(`${s}//${o}${c}`),la("Auth",!0)):r||mM()}function Dv(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gM(n){let e=Dv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:Gy(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:Gy(o)}}}function Gy(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function mM(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Sa=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kt("not implemented")}_getIdTokenResponse(e){return kt("not implemented")}_linkToIdToken(e,t){return kt("not implemented")}_getReauthenticationResolver(e){return kt("not implemented")}};function Pd(n,e){return p(this,null,function*(){return ov(n,"POST","/v1/accounts:signInWithIdp",Pa(n,e))})}var Aa=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Hd=class extends Aa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function _M(n,e){return p(this,null,function*(){return ov(n,"POST","/v1/accounts:signUp",Pa(n,e))})}var jn=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return p(this,null,function*(){let s=yield nn._fromIdTokenResponse(e,i,r),o=zy(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return p(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=zy(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function zy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}function nh(n){return p(this,null,function*(){if(Oe(n.app))return Promise.reject(rn(n));let e=ka(n);if(yield e._initializationPromise,e.currentUser?.isAnonymous)return new jn({user:e.currentUser,providerId:null,operationType:"signIn"});let t=yield _M(e,{returnSecureToken:!0}),i=yield jn._fromIdTokenResponse(e,"signIn",t,!0);return yield e._updateCurrentUser(i.user),i})}var $d=class n extends nt{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function Cv(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$d._fromErrorAndOperation(n,s,e,i):s})}function yM(n,e,t=!1){return p(this,null,function*(){let i=yield qr(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return jn._forOperation(n,"link",i)})}function vM(n,e,t=!1){return p(this,null,function*(){let{auth:i}=n;if(Oe(i.app))return Promise.reject(rn(i));let r="reauthenticate";try{let s=yield qr(n,Cv(i,r,e,n),t);T(s.idToken,i,"internal-error");let o=Xd(s.idToken);T(o,i,"internal-error");let{sub:a}=o;return T(n.uid===a,i,"user-mismatch"),jn._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&sn(i,"user-mismatch"),s}})}function wM(n,e,t=!1){return p(this,null,function*(){if(Oe(n.app))return Promise.reject(rn(n));let i="signIn",r=yield Cv(n,i,e),s=yield jn._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function bv(n,e,t,i){return De(n).onIdTokenChanged(e,t,i)}function Tv(n,e,t){return De(n).beforeAuthStateChanged(e,t)}function ih(n,e,t,i){return De(n).onAuthStateChanged(e,t,i)}var Ma="__sak";var Na=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ma,"1"),this.storage.removeItem(Ma),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var IM=1e3,EM=10,DM=(()=>{class n extends Na{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);cM()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,EM):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},IM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return p(this,null,function*(){yield hn(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return p(this,null,function*(){let i=yield hn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return p(this,null,function*(){yield hn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Sv=DM;var CM=(()=>{class n extends Na{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),rh=CM;function bM(n){return Promise.all(n.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var TM=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return p(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(u=>p(this,null,function*(){return u(i.origin,o)})),l=yield bM(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Av(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Wd=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return p(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=Av("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function It(){return window}function SM(n){It().location.href=n}function Mv(){return typeof It().WorkerGlobalScope<"u"&&typeof It().importScripts=="function"}function AM(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function MM(){return navigator?.serviceWorker?.controller||null}function NM(){return Mv()?self:null}var Nv="firebaseLocalStorageDb",xM=1,xa="firebaseLocalStorage",xv="fbase_key",Bn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Oa(n,e){return n.transaction([xa],e?"readwrite":"readonly").objectStore(xa)}function RM(){let n=indexedDB.deleteDatabase(Nv);return new Bn(n).toPromise()}function Gd(){let n=indexedDB.open(Nv,xM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(xa,{keyPath:xv})}catch(r){t(r)}}),n.addEventListener("success",()=>p(this,null,function*(){let i=n.result;i.objectStoreNames.contains(xa)?e(i):(i.close(),yield RM(),e(yield Gd()))}))})}function qy(n,e,t){return p(this,null,function*(){let i=Oa(n,!0).put({[xv]:e,value:t});return new Bn(i).toPromise()})}function PM(n,e){return p(this,null,function*(){let t=Oa(n,!1).get(e),i=yield new Bn(t).toPromise();return i===void 0?null:i.value})}function Ky(n,e){let t=Oa(n,!0).delete(e);return new Bn(t).toPromise()}var kM=800,OM=3,FM=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield Gd(),this.db)})}_withRetries(t){return p(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>OM)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return Mv()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=TM._getInstance(NM()),this.receiver._subscribe("keyChanged",(t,i)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){if(this.activeServiceWorker=yield AM(),!this.activeServiceWorker)return;this.sender=new Wd(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||MM()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Gd();return yield qy(t,Ma,"1"),yield Ky(t,Ma),!0}catch{}return!1})}_withPendingWrite(t){return p(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>qy(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return p(this,null,function*(){let i=yield this._withRetries(r=>PM(r,t));return this.localCache[t]=i,i})}_remove(t){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>Ky(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return p(this,null,function*(){let t=yield this._withRetries(s=>{let o=Oa(s,!1).getAll();return new Bn(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),kM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Rv=FM;var GB=wv("rcb"),zB=new Vn(3e4,6e4);function LM(n,e){return e?Ot(e):(T(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Yr=class extends Sa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pd(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function VM(n){return wM(n.auth,new Yr(n),n.bypassAuthState)}function jM(n){let{auth:e,user:t}=n;return T(t,e,"internal-error"),vM(t,new Yr(n),n.bypassAuthState)}function BM(n){return p(this,null,function*(){let{auth:e,user:t}=n;return T(t,e,"internal-error"),yM(t,new Yr(n),n.bypassAuthState)})}var zd=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VM;case"linkViaPopup":case"linkViaRedirect":return BM;case"reauthViaPopup":case"reauthViaRedirect":return jM;default:sn(this.auth,"internal-error")}}resolve(e){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var qB=new Vn(2e3,1e4);var UM="pendingRedirect",va=new Map,qd=class n extends zd{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return p(this,null,function*(){let e=va.get(this.auth._key());if(!e){try{let i=(yield HM(this.resolver,this.auth))?yield hn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}va.set(this.auth._key(),e)}return this.bypassAuthState||va.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return hn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,hn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function HM(n,e){return p(this,null,function*(){let t=GM(e),i=WM(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function $M(n,e){va.set(n._key(),e)}function WM(n){return Ot(n._redirectPersistence)}function GM(n){return ya(UM,n.config.apiKey,n.name)}function zM(n,e,t=!1){return p(this,null,function*(){if(Oe(n.app))return Promise.reject(rn(n));let i=ka(n),r=LM(i,e),o=yield new qd(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var qM=10*60*1e3,Kd=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Pv(e)){let i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ln(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yy(e))}saveEventToCache(e){this.cachedEventUids.add(Yy(e)),this.lastProcessedEventTime=Date.now()}};function Yy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Pv({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function KM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pv(n);default:return!1}}function YM(t){return p(this,arguments,function*(n,e={}){return ki(n,"GET","/v1/projects",e)})}var ZM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QM=/^https?/;function JM(n){return p(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield YM(n);for(let t of e)try{if(XM(t))return}catch{}sn(n,"unauthorized-domain")})}function XM(n){let e=Od(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!QM.test(t))return!1;if(ZM.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var eN=new Vn(3e4,6e4);function Zy(){let n=It().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tN(n){return new Promise((e,t)=>{function i(){Zy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zy(),t(Ln(n,"network-request-failed"))},timeout:eN.get()})}if(It().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(It().gapi?.load)i();else{let r=wv("iframefcb");return It()[r]=()=>{gapi.load?i():t(Ln(n,"network-request-failed"))},hM(`${fM()}?onload=${r}`).catch(s=>t(s))}}).catch(e=>{throw wa=null,e})}var wa=null;function nN(n){return wa=wa||tN(n),wa}var iN=new Vn(5e3,15e3),rN="__/auth/iframe",sN="emulator/auth/iframe",oN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cN(n){let e=n.config;T(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Jd(e,sN):`https://${n.config.authDomain}/${rN}`,i={apiKey:e.apiKey,appName:n.name,v:en},r=aN.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${On(i).slice(1)}`}function lN(n){return p(this,null,function*(){let e=yield nN(n),t=It().gapi;return T(t,n,"internal-error"),e.open({where:document.body,url:cN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oN,dontclear:!0},i=>new Promise((r,s)=>p(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Ln(n,"network-request-failed"),a=It().setTimeout(()=>{s(o)},iN.get());function c(){It().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var uN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dN=500,hN=600,fN="_blank",pN="http://localhost",Ra=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function gN(n,e,t,i=dN,r=hN){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Y(E({},uN),{width:i.toString(),height:r.toString(),top:s,left:o}),l=Ee().toLowerCase();t&&(a=fv(l)?fN:t),dv(l)&&(e=e||pN,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(aM(l)&&a!=="_self")return mN(e||"",a),new Ra(null);let d=window.open(e||"",a,u);T(d,n,"popup-blocked");try{d.focus()}catch{}return new Ra(d)}function mN(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var _N="__/auth/handler",yN="emulator/auth/handler",vN=encodeURIComponent("fac");function Qy(n,e,t,i,r,s){return p(this,null,function*(){T(n.config.authDomain,n,"auth-domain-config-required"),T(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:en,eventId:r};if(e instanceof Aa){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",jr(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Hd){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${vN}=${encodeURIComponent(c)}`:"";return`${wN(n)}?${On(a).slice(1)}${l}`})}function wN({config:n}){return n.emulator?Jd(n,yN):`https://${n.authDomain}/${_N}`}var kd="webStorageSupport",Yd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rh,this._completeRedirectFn=zM,this._overrideRedirectResult=$M}_openPopup(e,t,i,r){return p(this,null,function*(){on(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=yield Qy(e,t,i,Od(),r);return gN(e,s,Av())})}_openRedirect(e,t,i,r){return p(this,null,function*(){yield this._originValidation(e);let s=yield Qy(e,t,i,Od(),r);return SM(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(on(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return p(this,null,function*(){let t=yield lN(e),i=new Kd(e);return t.register("authEvent",r=>(T(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kd,{type:kd},r=>{let s=r?.[0]?.[kd];s!==void 0&&t(!!s),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yv()||hv()||eh()}},kv=Yd;var Jy="@firebase/auth",Xy="1.11.1";var Zd=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function IN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EN(n){Xt(new ze("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;T(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vv(n)},l=new Ud(i,r,s,c);return pM(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xt(new ze("auth-internal",e=>{let t=ka(e.getProvider("auth").getImmediate());return(i=>new Zd(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),it(Jy,Xy,IN(n)),it(Jy,Xy,"esm2020")}var DN=5*60,CN=_d("authIdTokenMaxAge")||DN,ev=null,bN=n=>e=>p(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>CN)return;let r=t?.token;ev!==r&&(ev=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function sh(n=ga()){let e=Wr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Iv(n,{popupRedirectResolver:kv,persistence:[Rv,Sv,rh]}),i=_d("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=bN(s.toString());Tv(t,o,()=>o(t.currentUser)),bv(t,a=>o(a))}}let r=gd("auth");return r&&Ev(t,`http://${r}`),t}function TN(){return document.getElementsByTagName("head")?.[0]??document}dM({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Ln("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",TN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EN("Browser");var Ov="@firebase/database",Fv="1.1.0";var cf="";function SN(n){cf=n}var fh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),fe(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Pi(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var ph=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ge(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var pw=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fh(e)}}catch{}return new ph},Hn=pw("localStorage"),gh=pw("sessionStorage");var Li=new Qt("@firebase/database"),gw=function(){let n=1;return function(){return n++}}(),mw=function(n){let e=Ty(n),t=new oa;t.update(e);let i=t.digest();return aa.encodeByteArray(i)},hs=function(...n){let e="";for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=hs.apply(null,i):typeof i=="object"?e+=fe(i):e+=i,e+=" "}return e},Wn=null,Lv=!0,AN=function(n,e){m(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Li.logLevel=Z.VERBOSE,Wn=Li.log.bind(Li),e&&gh.set("logging_enabled",!0)):typeof n=="function"?Wn=n:(Wn=null,gh.remove("logging_enabled"))},Ce=function(...n){if(Lv===!0&&(Lv=!1,Wn===null&&gh.get("logging_enabled")===!0&&AN(!0)),Wn){let e=hs.apply(null,n);Wn(e)}},fs=function(n){return function(...e){Ce(n,...e)}},mh=function(...n){let e="FIREBASE INTERNAL ERROR: "+hs(...n);Li.error(e)},Ft=function(...n){let e=`FIREBASE FATAL ERROR: ${hs(...n)}`;throw Li.error(e),new Error(e)},Ne=function(...n){let e="FIREBASE WARNING: "+hs(...n);Li.warn(e)},MN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ne("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},lf=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},NN=function(n){if(yt()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ji="[MIN_NAME]",Gn="[MAX_NAME]",qi=function(n,e){if(n===e)return 0;if(n===ji||e===Gn)return-1;if(e===ji||n===Gn)return 1;{let t=Vv(n),i=Vv(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},xN=function(n,e){return n===e?0:n<e?-1:1},Zr=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+fe(e))},uf=function(n){if(typeof n!="object"||n===null)return fe(n);let e=[];for(let i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=fe(e[i]),t+=":",t+=uf(n[e[i]]);return t+="}",t},_w=function(n,e){let t=n.length;if(t<=e)return[n];let i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function xe(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var yw=function(n){m(!lf(n),"Invalid JSON number");let e=11,t=52,i=(1<<e-1)-1,r,s,o,a,c;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(r?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},RN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},PN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function kN(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}var ON=new RegExp("^-?(0*)\\d{1,10}$"),FN=-2147483648,LN=2147483647,Vv=function(n){if(ON.test(n)){let e=Number(n);if(e>=FN&&e<=LN)return e}return null},Ki=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Ne("Exception was thrown by user callback.",t),e},Math.floor(0))}},VN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ts=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var _h=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Oe(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Ne(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var yh=class{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Ce("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ne(e)}},ns=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),La="5",vw="v",ww="s",Iw="r",Ew="f",Dw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Cw="ls",bw="p",vh="ac",Tw="websocket",Sw="long_polling";var Va=class{constructor(e,t,i,r,s=!1,o="",a=!1,c=!1,l=null){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function jN(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Aw(n,e,t){m(typeof e=="string","typeof type must == string"),m(typeof t=="object","typeof params must == object");let i;if(e===Tw)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Sw)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);jN(n)&&(t.ns=n.namespace);let r=[];return xe(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var wh=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Ge(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return fy(this.counters_)}};var oh={},ah={};function df(n){let e=n.toString();return oh[e]||(oh[e]=new wh),oh[e]}function BN(n,e){let t=n.toString();return ah[t]||(ah[t]=e()),ah[t]}var Ih=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ki(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var jv="start",UN="close",HN="pLPCommand",$N="pRTLPCB",Mw="id",Nw="pw",xw="ser",WN="cb",GN="seg",zN="ts",qN="d",KN="dframe",Rw=1870,Pw=30,YN=Rw-Pw,ZN=25e3,QN=3e4,Eh=class n{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fs(e),this.stats_=df(t),this.urlFn=c=>(this.appCheckToken&&(c[vh]=this.appCheckToken),Aw(t,Sw,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ih(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(QN)),NN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dh((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===jv)this.id=a,this.password=c;else if(o===UN)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[jv]="t",i[xw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[WN]=this.scriptTagHolder.uniqueCallbackIdentifier),i[vw]=La,this.transportSessionId&&(i[ww]=this.transportSessionId),this.lastSessionId&&(i[Cw]=this.lastSessionId),this.applicationId&&(i[bw]=this.applicationId),this.appCheckToken&&(i[vh]=this.appCheckToken),typeof location<"u"&&location.hostname&&Dw.test(location.hostname)&&(i[Iw]=Ew);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return yt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!RN()&&!PN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=fe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=fd(t),r=_w(i,YN);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(yt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[KN]="t",i[Mw]=e,i[Nw]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=fe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Dh=class n{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,yt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=gw(),window[HN+this.uniqueCallbackIdentifier]=e,window[$N+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ce("frame writing exception"),a.stack&&Ce(a.stack),Ce(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ce("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Mw]=this.myID,e[Nw]=this.myPW,e[xw]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Pw+i.length<=Rw;){let o=this.pendingSegs.shift();i=i+"&"+GN+r+"="+o.seg+"&"+zN+r+"="+o.ts+"&"+qN+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(ZN)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){yt()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Ce("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var JN=16384,XN=45e3,ja=null;typeof MozWebSocket<"u"?ja=MozWebSocket:typeof WebSocket<"u"&&(ja=WebSocket);var Qr=(()=>{class n{constructor(t,i,r,s,o,a,c){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fs(this.connId),this.stats_=df(i),this.connURL=n.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){let a={};return a[vw]=La,!yt()&&typeof location<"u"&&location.hostname&&Dw.test(location.hostname)&&(a[Iw]=Ew),i&&(a[ww]=i),r&&(a[Cw]=r),s&&(a[vh]=s),o&&(a[bw]=o),Aw(t,Tw,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hn.set("previous_websocket_failure",!0);try{let r;if(yt()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${La}/${cf}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new ja(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&ja!==null&&!n.forceDisallow_}static previouslyFailed(){return Hn.isInMemoryStorage||Hn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Pi(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(m(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let i=fe(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=_w(i,JN);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(XN))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),ex=(()=>{class n{static get ALL_TRANSPORTS(){return[Eh,Qr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let i=Qr&&Qr.isAvailable(),r=i&&!Qr.previouslyFailed();if(t.webSocketOnly&&(i||Ne("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Qr];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),tx=6e4,nx=5e3,ix=10*1024,rx=100*1024,ch="t",Bv="d",sx="s",Uv="r",ox="e",Hv="o",$v="a",Wv="n",Gv="p",ax="h",Ch=class{constructor(e,t,i,r,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fs("c:"+this.id+":"),this.transportManager_=new ex(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=ts(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>ix?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ch in e){let t=e[ch];t===$v?this.upgradeIfSecondaryHealthy_():t===Uv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Hv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Zr("t",e),i=Zr("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Gv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$v,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Wv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Zr("t",e),i=Zr("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Zr(ch,e);if(Bv in e){let i=e[Bv];if(t===ax){let r=E({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===Wv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===sx?this.onConnectionShutdown_(i):t===Uv?this.onReset_(i):t===ox?mh("Server Error: "+i):t===Hv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mh("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),La!==i&&Ne("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),ts(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ts(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Gv,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ba=class{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}};var Ua=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Ha=class n extends Ua{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vr()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var zv=32,qv=768,Q=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function W(){return new Q("")}function P(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ln(n){return n.pieces_.length-n.pieceNum_}function X(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Q(n.pieces_,e)}function kw(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function cx(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Ow(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Fw(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Q(e,0)}function ge(n,e){let t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Q)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Q(t,0)}function O(n){return n.pieceNum_>=n.pieces_.length}function Ae(n,e){let t=P(n),i=P(e);if(t===null)return e;if(t===i)return Ae(X(n),X(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function hf(n,e){if(ln(n)!==ln(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function st(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(ln(n)>ln(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}var bh=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Ow(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Ur(this.parts_[i]);Lw(this)}};function lx(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Ur(e),Lw(n)}function ux(n){let e=n.parts_.pop();n.byteLength_-=Ur(e),n.parts_.length>0&&(n.byteLength_-=1)}function Lw(n){if(n.byteLength_>qv)throw new Error(n.errorPrefix_+"has a key path longer than "+qv+" bytes ("+n.byteLength_+").");if(n.parts_.length>zv)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+zv+") or object contains a cycle "+Un(n))}function Un(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Th=class n extends Ua{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var Jr=1e3,dx=60*5*1e3,Kv=30*1e3,hx=1.3,fx=3e4,px="server_kill",Yv=3,ff=(()=>{class n extends Ba{constructor(t,i,r,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=fs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jr,this.maxReconnectDelay_=dx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!yt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Th.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ha.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){let s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(fe(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();let i=new xt,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(t,i,r,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){let i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Ge(t,"w")){let r=Zt(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Ne(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Cy(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Kv)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=Dy(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){let r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),m(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);let o={p:t},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+fe(t));let i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):mh("Unrecognized action received from server: "+fe(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Jr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>fx&&(this.reconnectDelay_=Jr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hx)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,r())},u=function(h){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ce("getToken() completed but was canceled"):(Ce("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new Ch(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,g=>{Ne(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(px)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Ne(h),l())}}})}interrupt(t){Ce("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ce("Resuming connection for reason: "+t),delete this.interruptReasons_[t],jr(this.interruptReasons_)&&(this.reconnectDelay_=Jr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(o=>uf(o)).join("$"):r="default";let s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){let r=new Q(t).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Ce("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Yv&&(this.reconnectDelay_=Kv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Ce("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Yv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";yt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+cf.replace(/\./g,"-")]=1,Vr()?t["framework.cordova"]=1:ua()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Ha.getInstance().currentlyOnline();return jr(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),k=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Bi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new k(ji,e),r=new k(ji,t);return this.compare(i,r)!==0}minPost(){return k.MIN}};var Fa,$a=class extends Bi{static get __EMPTY_NODE(){return Fa}static set __EMPTY_NODE(e){Fa=e}compare(e,t){return qi(e.name,t.name)}isDefinedOn(e){throw kn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return k.MIN}maxPost(){return new k(Gn,Fa)}makePost(e,t){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new k(e,Fa)}toString(){return".key"}},Vi=new $a;var Fi=class{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},rt=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??qe.EMPTY_NODE,this.right=o??qe.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this,o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return qe.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return qe.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Sh=class{copy(e,t,i,r,s){return this}insert(e,t,i){return new rt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},qe=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,rt.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Fi(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Fi(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Fi(this.root_,null,this.comparator_,!0,e)}};qe.EMPTY_NODE=new Sh;function gx(n,e){return qi(n.name,e.name)}function pf(n,e){return qi(n,e)}var Ah;function mx(n){Ah=n}var Vw=function(n){return typeof n=="number"?"number:"+yw(n):"string:"+n},jw=function(n){if(n.isLeafNode()){let e=n.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ge(e,".sv"),"Priority must be a string or number.")}else m(n===Ah||n.isEmpty(),"priority of unexpected type.");m(n===Ah||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Zv,Ui=(()=>{class n{static set __childrenNodeConstructor(t){Zv=t}static get __childrenNodeConstructor(){return Zv}constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),jw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return O(t)?this:P(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let r=P(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(m(r!==".priority"||ln(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(X(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Vw(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=yw(this.value_):t+=this.value_,this.lazyHash_=mw(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(m(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return m(s>=0,"Unknown leaf type: "+i),m(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Bw,Uw;function _x(n){Bw=n}function yx(n){Uw=n}var Mh=class extends Bi{compare(e,t){let i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?qi(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return k.MIN}maxPost(){return new k(Gn,new Ui("[PRIORITY-POST]",Uw))}makePost(e,t){let i=Bw(e);return new k(t,new Ui("[PRIORITY-POST]",i))}toString(){return".priority"}},oe=new Mh;var vx=Math.log(2),Nh=class{constructor(e){let t=s=>parseInt(Math.log(s)/vx,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Wa=function(n,e,t,i){n.sort(e);let r=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=n[c],h=t?t(d):d,new rt(h,d.node,rt.BLACK,null,null);{let f=parseInt(u/2,10)+c,g=r(c,f),_=r(f+1,l);return d=n[f],h=t?t(d):d,new rt(h,d.node,rt.BLACK,g,_)}},s=function(c){let l=null,u=null,d=n.length,h=function(g,_){let I=d-g,x=d;d-=g;let ae=r(I+1,x),J=n[I],_e=t?t(J):J;f(new rt(_e,J.node,_,null,ae))},f=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),I=Math.pow(2,c.count-(g+1));_?h(I,rt.BLACK):(h(I,rt.BLACK),h(I,rt.RED))}return u},o=new Nh(n.length),a=s(o);return new qe(i||e,a)};var lh,Oi={},Hi=class n{static get Default(){return m(Oi&&oe,"ChildrenNode.ts has not been loaded"),lh=lh||new n({".priority":Oi},{".priority":oe}),lh}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Zt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qe?t:null}hasIndex(e){return Ge(this.indexSet_,e.toString())}addIndex(e,t){m(e!==Vi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(k.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Wa(i,e.getCompare()):a=Oi;let c=e.toString(),l=E({},this.indexSet_);l[c]=e;let u=E({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let i=Br(this.indexes_,(r,s)=>{let o=Zt(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),r===Oi)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(k.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Wa(a,o.getCompare())}else return Oi;else{let a=t.get(e.name),c=r;return a&&(c=c.remove(new k(e.name,a))),c.insert(e,e.node)}});return new n(i,this.indexSet_)}removeFromIndexes(e,t){let i=Br(this.indexes_,r=>{if(r===Oi)return r;{let s=t.get(e.name);return s?r.remove(new k(e.name,s)):r}});return new n(i,this.indexSet_)}};var Xr,N=(()=>{class n{static get EMPTY_NODE(){return Xr||(Xr=new n(new qe(pf),null,Hi.Default))}constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&jw(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xr}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?Xr:i}}getChild(t){let i=P(t);return i===null?this:this.getImmediateChild(i).getChild(X(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(m(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let r=new k(t,i),s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?Xr:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){let r=P(t);if(r===null)return i;{m(P(t)!==".priority"||ln(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(X(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(oe,(a,c)=>{i[a]=c.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Vw(this.getPriority().val())+":"),this.forEachChild(oe,(i,r)=>{let s=r.hash();s!==""&&(t+=":"+i+":"+s)}),this.lazyHash_=t===""?"":mw(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new k(t,i));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new k(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new k(i,this.children_.get(i)):null}forEachChild(t,i){let r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,k.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,k.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ps?-1:0}withIndex(t){if(t===Vi||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Vi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(oe),s=i.getIterator(oe),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Vi?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),xh=class extends N{constructor(){super(new qe(pf),N.EMPTY_NODE,Hi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return N.EMPTY_NODE}isEmpty(){return!1}},ps=new xh;Object.defineProperties(k,{MIN:{value:new k(ji,N.EMPTY_NODE)},MAX:{value:new k(Gn,ps)}});$a.__EMPTY_NODE=N.EMPTY_NODE;Ui.__childrenNodeConstructor=N;mx(ps);yx(ps);var wx=!0;function pe(n,e=null){if(n===null)return N.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Ui(t,pe(e))}if(!(n instanceof Array)&&wx){let t=[],i=!1;if(xe(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=pe(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),t.push(new k(o,c)))}}),t.length===0)return N.EMPTY_NODE;let s=Wa(t,gx,o=>o.name,pf);if(i){let o=Wa(t,oe.getCompare());return new N(s,pe(e),new Hi({".priority":o},{".priority":oe}))}else return new N(s,pe(e),Hi.Default)}else{let t=N.EMPTY_NODE;return xe(n,(i,r)=>{if(Ge(n,i)&&i.substring(0,1)!=="."){let s=pe(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(pe(e))}}_x(pe);var Rh=class extends Bi{constructor(e){super(),this.indexPath_=e,m(!O(e)&&P(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?qi(e.name,t.name):s}makePost(e,t){let i=pe(e),r=N.EMPTY_NODE.updateChild(this.indexPath_,i);return new k(t,r)}maxPost(){let e=N.EMPTY_NODE.updateChild(this.indexPath_,ps);return new k(Gn,e)}toString(){return Ow(this.indexPath_,0).join("/")}};var Ph=class extends Bi{compare(e,t){let i=e.node.compareTo(t.node);return i===0?qi(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return k.MIN}maxPost(){return k.MAX}makePost(e,t){let i=pe(e);return new k(t,i)}toString(){return".value"}},Ix=new Ph;function Hw(n){return{type:"value",snapshotNode:n}}function $i(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function os(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function as(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Ex(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var cs=class{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(os(t,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange($i(t,i)):o.trackChildChange(as(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(oe,(r,s)=>{t.hasChild(r)||i.trackChildChange(os(r,s))}),t.isLeafNode()||t.forEachChild(oe,(r,s)=>{if(e.hasChild(r)){let o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(as(r,s,o))}else i.trackChildChange($i(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?N.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Ga=class n{constructor(e){this.indexedFilter_=new cs(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new k(t,i))||(i=N.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=N.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(N.EMPTY_NODE);let s=this;return t.forEachChild(oe,(o,a)=>{s.matches(new k(o,a))||(r=r.updateImmediateChild(o,N.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var kh=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{let i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Ga(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new k(t,i))||(i=N.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=N.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=N.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(N.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,N.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let c=new k(t,i),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let d=a.getImmediateChild(t),h=r.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===t||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(u&&!i.isEmpty()&&f>=0)return s?.trackChildChange(as(t,i,d)),a.updateImmediateChild(t,i);{s?.trackChildChange(os(t,d));let _=a.updateImmediateChild(t,N.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange($i(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return i.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(os(l.name,l.node)),s.trackChildChange($i(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(l.name,N.EMPTY_NODE)):e}};var Oh=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ji}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Dx(n){return n.loadsAllData()?new cs(n.getIndex()):n.hasLimit()?new kh(n):new Ga(n)}function Qv(n){let e={};if(n.isDefault())return e;let t;if(n.index_===oe?t="$priority":n.index_===Ix?t="$value":n.index_===Vi?t="$key":(m(n.index_ instanceof Rh,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=fe(t),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";e[i]=fe(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+fe(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";e[i]=fe(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+fe(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Jv(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==oe&&(e.i=n.index_.toString()),e}var Fh=class n extends Ba{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=fs("p:rest:"),this.listens_={}}listen(e,t,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,i),a={};this.listens_[o]=a;let c=Qv(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,i),Zt(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",r(h,null)}})}unlisten(e,t){let i=n.getListenId_(e,t);delete this.listens_[i]}get(e){let t=Qv(e._queryParams),i=e._path.toString(),r=new xt;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+On(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Pi(a.responseText)}catch{Ne("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&Ne("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var Lh=class{constructor(){this.rootNode_=N.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function za(){return{value:null,children:new Map}}function $w(n,e,t){if(O(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let i=P(e);n.children.has(i)||n.children.set(i,za());let r=n.children.get(i);e=X(e),$w(r,e,t)}}function Vh(n,e,t){n.value!==null?t(e,n.value):Cx(n,(i,r)=>{let s=new Q(e.toString()+"/"+i);Vh(r,s,t)})}function Cx(n,e){n.children.forEach((t,i)=>{e(i,t)})}var jh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=E({},e);return this.last_&&xe(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}};var Xv=10*1e3,bx=30*1e3,Tx=5*60*1e3,Bh=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new jh(e);let i=Xv+(bx-Xv)*Math.random();ts(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;xe(e,(r,s)=>{s>0&&Ge(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),ts(this.reportStats_.bind(this),Math.floor(Math.random()*2*Tx))}};var Et=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Et||{});function Ww(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mf(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Uh=class n{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Et.ACK_USER_WRITE,this.source=Ww()}operationForChild(e){if(O(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Q(e));return new n(W(),t,this.revert)}}else return m(P(this.path)===e,"operationForChild called for unrelated child."),new n(X(this.path),this.affectedTree,this.revert)}};var qa=class n{constructor(e,t){this.source=e,this.path=t,this.type=Et.LISTEN_COMPLETE}operationForChild(e){return O(this.path)?new n(this.source,W()):new n(this.source,X(this.path))}};var Wi=class n{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Et.OVERWRITE}operationForChild(e){return O(this.path)?new n(this.source,W(),this.snap.getImmediateChild(e)):new n(this.source,X(this.path),this.snap)}};var Ka=class n{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Et.MERGE}operationForChild(e){if(O(this.path)){let t=this.children.subtree(new Q(e));return t.isEmpty()?null:t.value?new Wi(this.source,W(),t.value):new n(this.source,W(),t)}else return m(P(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,X(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Dt=class{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(O(e))return this.isFullyInitialized()&&!this.filtered_;let t=P(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Hh=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Sx(n,e,t,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Ex(o.childName,o.snapshotNode))}),es(n,r,"child_removed",e,i,t),es(n,r,"child_added",e,i,t),es(n,r,"child_moved",s,i,t),es(n,r,"child_changed",e,i,t),es(n,r,"value",e,i,t),r}function es(n,e,t,i,r,s){let o=i.filter(a=>a.type===t);o.sort((a,c)=>Mx(n,a,c)),o.forEach(a=>{let c=Ax(n,a,s);r.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function Ax(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Mx(n,e,t){if(e.childName==null||t.childName==null)throw kn("Should only compare child_ events.");let i=new k(e.childName,e.snapshotNode),r=new k(t.childName,t.snapshotNode);return n.index_.compare(i,r)}function cc(n,e){return{eventCache:n,serverCache:e}}function is(n,e,t,i){return cc(new Dt(e,t,i),n.serverCache)}function Gw(n,e,t,i){return cc(n.eventCache,new Dt(e,t,i))}function Ya(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function zn(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var uh,Nx=()=>(uh||(uh=new qe(xN)),uh),Re=class n{static fromObject(e){let t=new n(null);return xe(e,(i,r)=>{t=t.set(new Q(i),r)}),t}constructor(e,t=Nx()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:W(),value:this.value};if(O(e))return null;{let i=P(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(X(e),t);return s!=null?{path:ge(new Q(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(O(e))return this;{let t=P(e),i=this.children.get(t);return i!==null?i.subtree(X(e)):new n(null)}}set(e,t){if(O(e))return new n(t,this.children);{let i=P(e),s=(this.children.get(i)||new n(null)).set(X(e),t),o=this.children.insert(i,s);return new n(this.value,o)}}remove(e){if(O(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=P(e),i=this.children.get(t);if(i){let r=i.remove(X(e)),s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(O(e))return this.value;{let t=P(e),i=this.children.get(t);return i?i.get(X(e)):null}}setTree(e,t){if(O(e))return t;{let i=P(e),s=(this.children.get(i)||new n(null)).setTree(X(e),t),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(e){return this.fold_(W(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ge(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,W(),t)}findOnPath_(e,t,i){let r=this.value?i(t,this.value):!1;if(r)return r;if(O(e))return null;{let s=P(e),o=this.children.get(s);return o?o.findOnPath_(X(e),ge(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,W(),t)}foreachOnPath_(e,t,i){if(O(e))return this;{this.value&&i(t,this.value);let r=P(e),s=this.children.get(r);return s?s.foreachOnPath_(X(e),ge(t,r),i):new n(null)}}foreach(e){this.foreach_(W(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(ge(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}};var ot=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Re(null))}};function rs(n,e,t){if(O(e))return new ot(new Re(t));{let i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=Ae(r,e);return s=s.updateChild(o,t),new ot(n.writeTree_.set(r,s))}else{let r=new Re(t),s=n.writeTree_.setTree(e,r);return new ot(s)}}}function ew(n,e,t){let i=n;return xe(t,(r,s)=>{i=rs(i,ge(e,r),s)}),i}function tw(n,e){if(O(e))return ot.empty();{let t=n.writeTree_.setTree(e,new Re(null));return new ot(t)}}function $h(n,e){return Kn(n,e)!=null}function Kn(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Ae(t.path,e)):null}function nw(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(oe,(i,r)=>{e.push(new k(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new k(i,r.value))}),e}function an(n,e){if(O(e))return n;{let t=Kn(n,e);return t!=null?new ot(new Re(t)):new ot(n.writeTree_.subtree(e))}}function Wh(n){return n.writeTree_.isEmpty()}function Gi(n,e){return zw(W(),n.writeTree_,e)}function zw(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=zw(ge(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(ge(n,".priority"),i)),t}}function lc(n,e){return Zw(e,n)}function xx(n,e,t,i,r){m(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=rs(n.visibleWrites,e,t)),n.lastWriteId=i}function Rx(n,e){for(let t=0;t<n.allWrites.length;t++){let i=n.allWrites[t];if(i.writeId===e)return i}return null}function Px(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);m(t>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&kx(a,i.path)?r=!1:st(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return Ox(n),!0;if(i.snap)n.visibleWrites=tw(n.visibleWrites,i.path);else{let a=i.children;xe(a,c=>{n.visibleWrites=tw(n.visibleWrites,ge(i.path,c))})}return!0}else return!1}function kx(n,e){if(n.snap)return st(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&st(ge(n.path,t),e))return!0;return!1}function Ox(n){n.visibleWrites=qw(n.allWrites,Fx,W()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Fx(n){return n.visible}function qw(n,e,t){let i=ot.empty();for(let r=0;r<n.length;++r){let s=n[r];if(e(s)){let o=s.path,a;if(s.snap)st(t,o)?(a=Ae(t,o),i=rs(i,a,s.snap)):st(o,t)&&(a=Ae(o,t),i=rs(i,W(),s.snap.getChild(a)));else if(s.children){if(st(t,o))a=Ae(t,o),i=ew(i,a,s.children);else if(st(o,t))if(a=Ae(o,t),O(a))i=ew(i,W(),s.children);else{let c=Zt(s.children,P(a));if(c){let l=c.getChild(X(a));i=rs(i,W(),l)}}}else throw kn("WriteRecord should have .snap or .children")}}return i}function Kw(n,e,t,i,r){if(!i&&!r){let s=Kn(n.visibleWrites,e);if(s!=null)return s;{let o=an(n.visibleWrites,e);if(Wh(o))return t;if(t==null&&!$h(o,W()))return null;{let a=t||N.EMPTY_NODE;return Gi(o,a)}}}else{let s=an(n.visibleWrites,e);if(!r&&Wh(s))return t;if(!r&&t==null&&!$h(s,W()))return null;{let o=function(l){return(l.visible||r)&&(!i||!~i.indexOf(l.writeId))&&(st(l.path,e)||st(e,l.path))},a=qw(n.allWrites,o,e),c=t||N.EMPTY_NODE;return Gi(a,c)}}}function Lx(n,e,t){let i=N.EMPTY_NODE,r=Kn(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(oe,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){let s=an(n.visibleWrites,e);return t.forEachChild(oe,(o,a)=>{let c=Gi(an(s,new Q(o)),a);i=i.updateImmediateChild(o,c)}),nw(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=an(n.visibleWrites,e);return nw(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Vx(n,e,t,i,r){m(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=ge(e,t);if($h(n.visibleWrites,s))return null;{let o=an(n.visibleWrites,s);return Wh(o)?r.getChild(t):Gi(o,r.getChild(t))}}function jx(n,e,t,i){let r=ge(e,t),s=Kn(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){let o=an(n.visibleWrites,r);return Gi(o,i.getNode().getImmediateChild(t))}else return null}function Bx(n,e){return Kn(n.visibleWrites,e)}function Ux(n,e,t,i,r,s,o){let a,c=an(n.visibleWrites,e),l=Kn(c,W());if(l!=null)a=l;else if(t!=null)a=Gi(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),f=h.getNext();for(;f&&u.length<r;)d(f,i)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Hx(){return{visibleWrites:ot.empty(),allWrites:[],lastWriteId:-1}}function Za(n,e,t,i){return Kw(n.writeTree,n.treePath,e,t,i)}function _f(n,e){return Lx(n.writeTree,n.treePath,e)}function iw(n,e,t,i){return Vx(n.writeTree,n.treePath,e,t,i)}function Qa(n,e){return Bx(n.writeTree,ge(n.treePath,e))}function $x(n,e,t,i,r,s){return Ux(n.writeTree,n.treePath,e,t,i,r,s)}function yf(n,e,t){return jx(n.writeTree,n.treePath,e,t)}function Yw(n,e){return Zw(ge(n.treePath,e),n.writeTree)}function Zw(n,e){return{treePath:n,writeTree:e}}var Gh=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;m(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),m(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,as(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,os(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,$i(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,as(i,e.snapshotNode,r.oldSnap));else throw kn("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var zh=class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}},Qw=new zh,ls=class{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new Dt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yf(this.writes_,e,i)}}getChildAfterChild(e,t,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zn(this.viewCache_),s=$x(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}};function Wx(n){return{filter:n}}function Gx(n,e){m(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function zx(n,e,t,i,r){let s=new Gh,o,a;if(t.type===Et.OVERWRITE){let l=t;l.source.fromUser?o=qh(n,e,l.path,l.snap,i,r,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!O(l.path),o=Ja(n,e,l.path,l.snap,i,r,a,s))}else if(t.type===Et.MERGE){let l=t;l.source.fromUser?o=Kx(n,e,l.path,l.children,i,r,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Kh(n,e,l.path,l.children,i,r,a,s))}else if(t.type===Et.ACK_USER_WRITE){let l=t;l.revert?o=Qx(n,e,l.path,i,r,s):o=Yx(n,e,l.path,l.affectedTree,i,r,s)}else if(t.type===Et.LISTEN_COMPLETE)o=Zx(n,e,t.path,i,s);else throw kn("Unknown operation type: "+t.type);let c=s.getChanges();return qx(e,o,c),{viewCache:o,changes:c}}function qx(n,e,t){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Ya(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Hw(Ya(e)))}}function Jw(n,e,t,i,r,s){let o=e.eventCache;if(Qa(i,t)!=null)return e;{let a,c;if(O(t))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=zn(e),u=l instanceof N?l:N.EMPTY_NODE,d=_f(i,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Za(i,zn(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=P(t);if(l===".priority"){m(ln(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=iw(i,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=X(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=iw(i,t,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=yf(i,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,r,s):a=o.getNode()}}return is(e,a,o.isFullyInitialized()||O(t),n.filter.filtersNodes())}}function Ja(n,e,t,i,r,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(O(t))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(t,i);l=u.updateFullNode(c.getNode(),f,null)}else{let f=P(t);if(!c.isCompleteForPath(t)&&ln(t)>1)return e;let g=X(t),I=c.getNode().getImmediateChild(f).updateChild(g,i);f===".priority"?l=u.updatePriority(c.getNode(),I):l=u.updateChild(c.getNode(),f,I,g,Qw,null)}let d=Gw(e,l,c.isFullyInitialized()||O(t),u.filtersNodes()),h=new ls(r,d,s);return Jw(n,d,t,r,h,a)}function qh(n,e,t,i,r,s,o){let a=e.eventCache,c,l,u=new ls(r,e,s);if(O(t))l=n.filter.updateFullNode(e.eventCache.getNode(),i,o),c=is(e,l,!0,n.filter.filtersNodes());else{let d=P(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),i),c=is(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=X(t),f=a.getNode().getImmediateChild(d),g;if(O(h))g=i;else{let _=u.getCompleteChild(d);_!=null?kw(h)===".priority"&&_.getChild(Fw(h)).isEmpty()?g=_:g=_.updateChild(h,i):g=N.EMPTY_NODE}if(f.equals(g))c=e;else{let _=n.filter.updateChild(a.getNode(),d,g,h,u,o);c=is(e,_,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function rw(n,e){return n.eventCache.isCompleteForChild(e)}function Kx(n,e,t,i,r,s,o){let a=e;return i.foreach((c,l)=>{let u=ge(t,c);rw(e,P(u))&&(a=qh(n,a,u,l,r,s,o))}),i.foreach((c,l)=>{let u=ge(t,c);rw(e,P(u))||(a=qh(n,a,u,l,r,s,o))}),a}function sw(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Kh(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;O(t)?l=i:l=new Re(null).setTree(t,i);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),g=sw(n,f,h);c=Ja(n,c,new Q(d),g,r,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let g=e.serverCache.getNode().getImmediateChild(d),_=sw(n,g,h);c=Ja(n,c,new Q(d),_,r,s,o,a)}}),c}function Yx(n,e,t,i,r,s,o){if(Qa(r,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(O(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Ja(n,e,t,c.getNode().getChild(t),r,s,a,o);if(O(t)){let l=new Re(null);return c.getNode().forEachChild(Vi,(u,d)=>{l=l.set(new Q(u),d)}),Kh(n,e,t,l,r,s,a,o)}else return e}else{let l=new Re(null);return i.foreach((u,d)=>{let h=ge(t,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),Kh(n,e,t,l,r,s,a,o)}}function Zx(n,e,t,i,r){let s=e.serverCache,o=Gw(e,s.getNode(),s.isFullyInitialized()||O(t),s.isFiltered());return Jw(n,o,t,i,Qw,r)}function Qx(n,e,t,i,r,s){let o;if(Qa(i,t)!=null)return e;{let a=new ls(i,e,r),c=e.eventCache.getNode(),l;if(O(t)||P(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Za(i,zn(e));else{let d=e.serverCache.getNode();m(d instanceof N,"serverChildren would be complete if leaf node"),u=_f(i,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=P(t),d=yf(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,X(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,N.EMPTY_NODE,X(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Za(i,zn(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Qa(i,W())!=null,is(e,l,o,n.filter.filtersNodes())}}var Yh=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new cs(i.getIndex()),s=Dx(i);this.processor_=Wx(s);let o=t.serverCache,a=t.eventCache,c=r.updateFullNode(N.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(N.EMPTY_NODE,a.getNode(),null),u=new Dt(c,o.isFullyInitialized(),r.filtersNodes()),d=new Dt(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=cc(d,u),this.eventGenerator_=new Hh(this.query_)}get query(){return this.query_}};function Jx(n){return n.viewCache_.serverCache.getNode()}function Xx(n){return Ya(n.viewCache_)}function eR(n,e){let t=zn(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!O(e)&&!t.getImmediateChild(P(e)).isEmpty())?t.getChild(e):null}function ow(n){return n.eventRegistrations_.length===0}function tR(n,e){n.eventRegistrations_.push(e)}function aw(n,e,t){let i=[];if(t){m(e==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function cw(n,e,t,i){e.type===Et.MERGE&&e.source.queryId!==null&&(m(zn(n.viewCache_),"We should always have a full cache before handling merges"),m(Ya(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=zx(n.processor_,r,e,t,i);return Gx(n.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Xw(n,s.changes,s.viewCache.eventCache.getNode(),null)}function nR(n,e){let t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(oe,(s,o)=>{i.push($i(s,o))}),t.isFullyInitialized()&&i.push(Hw(t.getNode())),Xw(n,i,t.getNode(),e)}function Xw(n,e,t,i){let r=i?[i]:n.eventRegistrations_;return Sx(n.eventGenerator_,e,t,r)}var Xa,ec=class{constructor(){this.views=new Map}};function iR(n){m(!Xa,"__referenceConstructor has already been defined"),Xa=n}function rR(){return m(Xa,"Reference.ts has not been loaded"),Xa}function sR(n){return n.views.size===0}function vf(n,e,t,i){let r=e.source.queryId;if(r!==null){let s=n.views.get(r);return m(s!=null,"SyncTree gave us an op for an invalid query."),cw(s,e,t,i)}else{let s=[];for(let o of n.views.values())s=s.concat(cw(o,e,t,i));return s}}function eI(n,e,t,i,r){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Za(t,r?i:null),c=!1;a?c=!0:i instanceof N?(a=_f(t,i),c=!1):(a=N.EMPTY_NODE,c=!1);let l=cc(new Dt(a,c,!1),new Dt(i,r,!1));return new Yh(e,l)}return o}function oR(n,e,t,i,r,s){let o=eI(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),tR(o,t),nR(o,t)}function aR(n,e,t,i){let r=e._queryIdentifier,s=[],o=[],a=un(n);if(r==="default")for(let[c,l]of n.views.entries())o=o.concat(aw(l,t,i)),ow(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(r);c&&(o=o.concat(aw(c,t,i)),ow(c)&&(n.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!un(n)&&s.push(new(rR())(e._repo,e._path)),{removed:s,events:o}}function tI(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function cn(n,e){let t=null;for(let i of n.views.values())t=t||eR(i,e);return t}function nI(n,e){if(e._queryParams.loadsAllData())return uc(n);{let i=e._queryIdentifier;return n.views.get(i)}}function iI(n,e){return nI(n,e)!=null}function un(n){return uc(n)!=null}function uc(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var tc;function cR(n){m(!tc,"__referenceConstructor has already been defined"),tc=n}function lR(){return m(tc,"Reference.ts has not been loaded"),tc}var uR=1,nc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Re(null),this.pendingWriteTree_=Hx(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function wf(n,e,t,i,r){return xx(n.pendingWriteTree_,e,t,i,r),r?ms(n,new Wi(Ww(),e,t)):[]}function $n(n,e,t=!1){let i=Rx(n.pendingWriteTree_,e);if(Px(n.pendingWriteTree_,e)){let s=new Re(null);return i.snap!=null?s=s.set(W(),!0):xe(i.children,o=>{s=s.set(new Q(o),!0)}),ms(n,new Uh(i.path,s,t))}else return[]}function gs(n,e,t){return ms(n,new Wi(gf(),e,t))}function dR(n,e,t){let i=Re.fromObject(t);return ms(n,new Ka(gf(),e,i))}function hR(n,e){return ms(n,new qa(gf(),e))}function fR(n,e,t){let i=If(n,t);if(i){let r=Ef(i),s=r.path,o=r.queryId,a=Ae(s,e),c=new qa(mf(o),a);return Df(n,s,c)}else return[]}function ic(n,e,t,i,r=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||iI(o,e))){let c=aR(o,e,t,i);sR(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!r){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(h,f)=>un(f));if(u&&!d){let h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=mR(h);for(let g=0;g<f.length;++g){let _=f[g],I=_.query,x=aI(n,_);n.listenProvider_.startListening(ss(I),us(n,I),x.hashFn,x.onComplete)}}}!d&&l.length>0&&!i&&(u?n.listenProvider_.stopListening(ss(e),null):l.forEach(h=>{let f=n.queryToTagMap.get(hc(h));n.listenProvider_.stopListening(ss(h),f)}))}_R(n,l)}return a}function rI(n,e,t,i){let r=If(n,i);if(r!=null){let s=Ef(r),o=s.path,a=s.queryId,c=Ae(o,e),l=new Wi(mf(a),c,t);return Df(n,o,l)}else return[]}function pR(n,e,t,i){let r=If(n,i);if(r){let s=Ef(r),o=s.path,a=s.queryId,c=Ae(o,e),l=Re.fromObject(t),u=new Ka(mf(a),c,l);return Df(n,o,u)}else return[]}function Zh(n,e,t,i=!1){let r=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(h,f)=>{let g=Ae(h,r);s=s||cn(f,g),o=o||un(f)});let a=n.syncPointTree_.get(r);a?(o=o||un(a),s=s||cn(a,W())):(a=new ec,n.syncPointTree_=n.syncPointTree_.set(r,a));let c;s!=null?c=!0:(c=!1,s=N.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((f,g)=>{let _=cn(g,W());_&&(s=s.updateImmediateChild(f,_))}));let l=iI(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=hc(e);m(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=yR();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let u=lc(n.pendingWriteTree_,r),d=oR(a,e,t,u,s,c);if(!l&&!o&&!i){let h=nI(a,e);d=d.concat(vR(n,e,h))}return d}function dc(n,e,t){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ae(o,e),l=cn(a,c);if(l)return l});return Kw(r,e,s,t,!0)}function gR(n,e){let t=e._path,i=null;n.syncPointTree_.foreachOnPath(t,(l,u)=>{let d=Ae(l,t);i=i||cn(u,d)});let r=n.syncPointTree_.get(t);r?i=i||cn(r,W()):(r=new ec,n.syncPointTree_=n.syncPointTree_.set(t,r));let s=i!=null,o=s?new Dt(i,!0,!1):null,a=lc(n.pendingWriteTree_,e._path),c=eI(r,e,a,s?o.getNode():N.EMPTY_NODE,s);return Xx(c)}function ms(n,e){return sI(e,n.syncPointTree_,null,lc(n.pendingWriteTree_,W()))}function sI(n,e,t,i){if(O(n.path))return oI(n,e,t,i);{let r=e.get(W());t==null&&r!=null&&(t=cn(r,W()));let s=[],o=P(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=Yw(i,o);s=s.concat(sI(a,c,l,u))}return r&&(s=s.concat(vf(r,n,i,t))),s}}function oI(n,e,t,i){let r=e.get(W());t==null&&r!=null&&(t=cn(r,W()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=Yw(i,o),u=n.operationForChild(o);u&&(s=s.concat(oI(u,a,c,l)))}),r&&(s=s.concat(vf(r,n,i,t))),s}function aI(n,e){let t=e.query,i=us(n,t);return{hashFn:()=>(Jx(e)||N.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?fR(n,t._path,i):hR(n,t._path);{let s=kN(r,t);return ic(n,t,null,s)}}}}function us(n,e){let t=hc(e);return n.queryToTagMap.get(t)}function hc(n){return n._path.toString()+"$"+n._queryIdentifier}function If(n,e){return n.tagToQueryMap.get(e)}function Ef(n){let e=n.indexOf("$");return m(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Q(n.substr(0,e))}}function Df(n,e,t){let i=n.syncPointTree_.get(e);m(i,"Missing sync point for query tag that we're tracking");let r=lc(n.pendingWriteTree_,e);return vf(i,t,r,null)}function mR(n){return n.fold((e,t,i)=>{if(t&&un(t))return[uc(t)];{let r=[];return t&&(r=tI(t)),xe(i,(s,o)=>{r=r.concat(o)}),r}})}function ss(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(lR())(n._repo,n._path):n}function _R(n,e){for(let t=0;t<e.length;++t){let i=e[t];if(!i._queryParams.loadsAllData()){let r=hc(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function yR(){return uR++}function vR(n,e,t){let i=e._path,r=us(n,e),s=aI(n,t),o=n.listenProvider_.startListening(ss(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)m(!un(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!O(l)&&u&&un(u))return[uc(u).query];{let h=[];return u&&(h=h.concat(tI(u).map(f=>f.query))),xe(d,(f,g)=>{h=h.concat(g)}),h}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening(ss(u),us(n,u))}}return o}var Qh=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},Jh=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=ge(this.path_,e);return new n(this.syncTree_,t)}node(){return dc(this.syncTree_,this.path_)}},wR=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},lw=function(n,e,t){if(!n||typeof n!="object")return n;if(m(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return IR(n[".sv"],e,t);if(typeof n[".sv"]=="object")return ER(n[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},IR=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:m(!1,"Unexpected server value: "+n)}},ER=function(n,e,t){n.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&m(!1,"Unexpected increment value: "+i);let r=e.node();if(m(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},DR=function(n,e,t,i){return bf(e,new Jh(t,n),i)},Cf=function(n,e,t){return bf(n,new Qh(e),t)};function bf(n,e,t){let i=n.getPriority().val(),r=lw(i,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=lw(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new Ui(a,pe(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Ui(r))),o.forEachChild(oe,(a,c)=>{let l=bf(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var ds=class{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}};function fc(n,e){let t=e instanceof Q?e:new Q(e),i=n,r=P(t);for(;r!==null;){let s=Zt(i.node.children,r)||{children:{},childCount:0};i=new ds(r,i,s),t=X(t),r=P(t)}return i}function Yn(n){return n.node.value}function Tf(n,e){n.node.value=e,Xh(n)}function cI(n){return n.node.childCount>0}function CR(n){return Yn(n)===void 0&&!cI(n)}function pc(n,e){xe(n.node.children,(t,i)=>{e(new ds(t,n,i))})}function lI(n,e,t,i){t&&!i&&e(n),pc(n,r=>{lI(r,e,!0,i)}),t&&i&&e(n)}function bR(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function _s(n){return new Q(n.parent===null?n.name:_s(n.parent)+"/"+n.name)}function Xh(n){n.parent!==null&&TR(n.parent,n.name,n)}function TR(n,e,t){let i=CR(t),r=Ge(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,Xh(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,Xh(n))}var SR=/[\[\].#$\/\u0000-\u001F\u007F]/,AR=/[\[\].#$\u0000-\u001F\u007F]/,dh=10*1024*1024,uI=function(n){return typeof n=="string"&&n.length!==0&&!SR.test(n)},dI=function(n){return typeof n=="string"&&n.length!==0&&!AR.test(n)},MR=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dI(n)},NR=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!lf(n)||n&&typeof n=="object"&&Ge(n,".sv")},xR=function(n,e,t,i){i&&e===void 0||gc(da(n,"value"),e,t)},gc=function(n,e,t){let i=t instanceof Q?new bh(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Un(i));if(typeof e=="function")throw new Error(n+"contains a function "+Un(i)+" with contents = "+e.toString());if(lf(e))throw new Error(n+"contains "+e.toString()+" "+Un(i));if(typeof e=="string"&&e.length>dh/3&&Ur(e)>dh)throw new Error(n+"contains a string greater than "+dh+" utf8 bytes "+Un(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(xe(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!uI(o)))throw new Error(n+" contains an invalid key ("+o+") "+Un(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);lx(i,o),gc(n,a,i),ux(i)}),r&&s)throw new Error(n+' contains ".value" child '+Un(i)+" in addition to actual children.")}};var hI=function(n,e,t,i){if(!(i&&t===void 0)&&!dI(t))throw new Error(da(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},RR=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hI(n,e,t,i)},fI=function(n,e){if(P(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},PR=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!uI(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!MR(t))throw new Error(da(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var ef=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Sf(n,e){let t=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();t!==null&&!hf(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function pI(n,e,t){Sf(n,t),gI(n,i=>hf(i,e))}function at(n,e,t){Sf(n,t),gI(n,i=>st(i,e)||st(e,i))}function gI(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;e(s)?(kR(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function kR(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let i=t.getEventRunner();Wn&&Ce("event: "+t.toString()),Ki(i)}}}var OR="repo_interrupt",FR=25,tf=class{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ef,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=za(),this.transactionQueueTree_=new ds,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function LR(n,e,t){if(n.stats_=df(n.repoInfo_),n.forceRestClient_||VN())n.server_=new Fh(n.repoInfo_,(i,r,s,o)=>{uw(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dw(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{fe(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ff(n.repoInfo_,e,(i,r,s,o)=>{uw(n,i,r,s,o)},i=>{dw(n,i)},i=>{jR(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=BN(n.repoInfo_,()=>new Bh(n.stats_,n.server_)),n.infoData_=new Lh,n.infoSyncTree_=new nc({startListening:(i,r,s,o)=>{let a=[],c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=gs(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Af(n,"connected",!1),n.serverSyncTree_=new nc({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{let l=o(a,c);at(n.eventQueue_,i._path,l)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function VR(n){let t=n.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function mc(n){return wR({timestamp:VR(n)})}function uw(n,e,t,i,r){n.dataUpdateCount++;let s=new Q(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){let c=Br(t,l=>pe(l));o=pR(n.serverSyncTree_,s,c,r)}else{let c=pe(t);o=rI(n.serverSyncTree_,s,c,r)}else if(i){let c=Br(t,l=>pe(l));o=dR(n.serverSyncTree_,s,c)}else{let c=pe(t);o=gs(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=yc(n,s)),at(n.eventQueue_,a,o)}function dw(n,e){Af(n,"connected",e),e===!1&&HR(n)}function jR(n,e){xe(e,(t,i)=>{Af(n,t,i)})}function Af(n,e,t){let i=new Q("/.info/"+e),r=pe(t);n.infoData_.updateSnapshot(i,r);let s=gs(n.infoSyncTree_,i,r);at(n.eventQueue_,i,s)}function Mf(n){return n.nextWriteId_++}function BR(n,e,t){let i=gR(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(r=>{let s=pe(r).withIndex(e._queryParams.getIndex());Zh(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=gs(n.serverSyncTree_,e._path,s);else{let a=us(n.serverSyncTree_,e);o=rI(n.serverSyncTree_,e._path,s,a)}return at(n.eventQueue_,e._path,o),ic(n.serverSyncTree_,e,t,null,!0),s},r=>(ys(n,"get for query "+fe(e)+" failed: "+r),Promise.reject(new Error(r))))}function UR(n,e,t,i,r){ys(n,"set",{path:e.toString(),value:t,priority:i});let s=mc(n),o=pe(t,i),a=dc(n.serverSyncTree_,e),c=Cf(o,a,s),l=Mf(n),u=wf(n.serverSyncTree_,e,c,l,!0);Sf(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{let g=h==="ok";g||Ne("set at "+e+" failed: "+h);let _=$n(n.serverSyncTree_,l,!g);at(n.eventQueue_,e,_),GR(n,r,h,f)});let d=vI(n,e);yc(n,d),at(n.eventQueue_,d,[])}function HR(n){ys(n,"onDisconnectEvents");let e=mc(n),t=za();Vh(n.onDisconnect_,W(),(r,s)=>{let o=DR(r,s,n.serverSyncTree_,e);$w(t,r,o)});let i=[];Vh(t,W(),(r,s)=>{i=i.concat(gs(n.serverSyncTree_,r,s));let o=vI(n,r);yc(n,o)}),n.onDisconnect_=za(),at(n.eventQueue_,W(),i)}function $R(n,e,t){let i;P(e._path)===".info"?i=Zh(n.infoSyncTree_,e,t):i=Zh(n.serverSyncTree_,e,t),pI(n.eventQueue_,e._path,i)}function hw(n,e,t){let i;P(e._path)===".info"?i=ic(n.infoSyncTree_,e,t):i=ic(n.serverSyncTree_,e,t),pI(n.eventQueue_,e._path,i)}function WR(n){n.persistentConnection_&&n.persistentConnection_.interrupt(OR)}function ys(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ce(t,...e)}function GR(n,e,t,i){e&&Ki(()=>{if(t==="ok")e(null);else{let r=(t||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,e(o)}})}function zR(n,e,t,i,r,s){ys(n,"transaction on "+e);let o={path:e,update:t,onComplete:i,status:null,order:gw(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Nf(n,e,void 0);o.currentInputSnapshot=a;let c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{gc("transaction failed: Data returned ",c,o.path),o.status=0;let l=fc(n.transactionQueueTree_,e),u=Yn(l)||[];u.push(o),Tf(l,u);let d;typeof c=="object"&&c!==null&&Ge(c,".priority")?(d=Zt(c,".priority"),m(NR(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(dc(n.serverSyncTree_,e)||N.EMPTY_NODE).getPriority().val();let h=mc(n),f=pe(c,d),g=Cf(f,a,h);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=g,o.currentWriteId=Mf(n);let _=wf(n.serverSyncTree_,e,g,o.currentWriteId,o.applyLocally);at(n.eventQueue_,e,_),_c(n,n.transactionQueueTree_)}}function Nf(n,e,t){return dc(n.serverSyncTree_,e,t)||N.EMPTY_NODE}function _c(n,e=n.transactionQueueTree_){if(e||vc(n,e),Yn(e)){let t=_I(n,e);m(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&qR(n,_s(e),t)}else cI(e)&&pc(e,t=>{_c(n,t)})}function qR(n,e,t){let i=t.map(l=>l.currentWriteId),r=Nf(n,e,i),s=r,o=r.hash();for(let l=0;l<t.length;l++){let u=t[l];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ae(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{ys(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat($n(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();vc(n,fc(n.transactionQueueTree_,e)),_c(n,n.transactionQueueTree_),at(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)Ki(d[h])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Ne("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}yc(n,e)}},o)}function yc(n,e){let t=mI(n,e),i=_s(t),r=_I(n,t);return KR(n,r,i),i}function KR(n,e,t){if(e.length===0)return;let i=[],r=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ae(t,c.path),u=!1,d;if(m(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,r=r.concat($n(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=FR)u=!0,d="maxretry",r=r.concat($n(n.serverSyncTree_,c.currentWriteId,!0));else{let h=Nf(n,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){gc("transaction failed: Data returned ",f,c.path);let g=pe(f);typeof f=="object"&&f!=null&&Ge(f,".priority")||(g=g.updatePriority(h.getPriority()));let I=c.currentWriteId,x=mc(n),ae=Cf(g,h,x);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=ae,c.currentWriteId=Mf(n),o.splice(o.indexOf(I),1),r=r.concat(wf(n.serverSyncTree_,c.path,ae,c.currentWriteId,c.applyLocally)),r=r.concat($n(n.serverSyncTree_,I,!0))}else u=!0,d="nodata",r=r.concat($n(n.serverSyncTree_,c.currentWriteId,!0))}at(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}vc(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Ki(i[a]);_c(n,n.transactionQueueTree_)}function mI(n,e){let t,i=n.transactionQueueTree_;for(t=P(e);t!==null&&Yn(i)===void 0;)i=fc(i,t),e=X(e),t=P(e);return i}function _I(n,e){let t=[];return yI(n,e,t),t.sort((i,r)=>i.order-r.order),t}function yI(n,e,t){let i=Yn(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);pc(e,r=>{yI(n,r,t)})}function vc(n,e){let t=Yn(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,Tf(e,t.length>0?t:void 0)}pc(e,i=>{vc(n,i)})}function vI(n,e){let t=_s(mI(n,e)),i=fc(n.transactionQueueTree_,e);return bR(i,r=>{hh(n,r)}),hh(n,i),lI(i,r=>{hh(n,r)}),t}function hh(n,e){let t=Yn(e);if(t){let i=[],r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(m(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat($n(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Tf(e,void 0):t.length=s+1,at(n.eventQueue_,_s(e),r);for(let o=0;o<i.length;o++)Ki(i[o])}}function YR(n){let e="",t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function ZR(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ne(`Invalid query segment '${t}' in query '${n}'`)}return e}var fw=function(n,e){let t=QR(n),i=t.namespace;t.domain==="firebase.com"&&Ft(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Ft("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||MN();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Va(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new Q(t.pathString)}},QR=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(r=YR(n.substring(u,d)));let h=ZR(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")t="localhost";else if(f.split(".").length<=2)t=f;else{let g=e.indexOf(".");i=e.substring(0,g).toLowerCase(),t=e.substring(g+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var rc=class{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+fe(this.snapshot.exportVal())}},sc=class{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var oc=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var nf=class n{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return O(this._path)?null:kw(this._path)}get ref(){return new ct(this._repo,this._path)}get _queryIdentifier(){let e=Jv(this._queryParams),t=uf(e);return t==="{}"?"default":t}get _queryObject(){return Jv(this._queryParams)}isEqual(e){if(e=De(e),!(e instanceof n))return!1;let t=this._repo===e._repo,i=hf(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+cx(this._path)}};var ct=class n extends nf{constructor(e,t){super(e,t,new Oh,!1)}get parent(){let e=Fw(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},zi=class n{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new Q(e),i=qn(this.ref,e);return new n(this._node.getChild(t),i,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new n(r,qn(this.ref,i),oe)))}hasChild(e){let t=new Q(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function dn(n,e){return n=De(n),n._checkNotDeleted("ref"),e!==void 0?qn(n._root,e):n._root}function qn(n,e){return n=De(n),P(n._path)===null?RR("child","path",e,!1):hI("child","path",e,!1),new ct(n._repo,ge(n._path,e))}function wI(n,e){n=De(n),fI("set",n._path),xR("set",e,n._path,!1);let t=new xt;return UR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function wc(n){n=De(n);let e=new oc(()=>{}),t=new ac(e);return BR(n._repo,n,t).then(i=>new zi(i,new ct(n._repo,n._path),n._queryParams.getIndex()))}var ac=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let i=t._queryParams.getIndex();return new rc("value",this,new zi(e.snapshotNode,new ct(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sc(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},rf=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sc(this,e,t):null}createEvent(e,t){m(e.childName!=null,"Child events should have a childName.");let i=qn(new ct(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new rc(e.type,this,new zi(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function JR(n,e,t,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let c=t,l=(u,d)=>{hw(n._repo,n,a),c(u,d)};l.userCallback=t.userCallback,l.context=t.context,t=l}let o=new oc(t,s||void 0),a=e==="value"?new ac(o):new rf(e,o);return $R(n._repo,n,a),()=>hw(n._repo,n,a)}function Ic(n,e,t,i){return JR(n,"value",e,t,i)}iR(ct);cR(ct);var XR="FIREBASE_DATABASE_EMULATOR_HOST",sf={},eP=!1;function tP(n,e,t,i){let r=e.lastIndexOf(":"),s=e.substring(0,r),o=Yt(s);n.repoInfo_=new Va(e,o,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function nP(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||Ft("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ce("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=fw(s,r),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[XR]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=fw(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let u=r&&c?new ns(ns.OWNER):new yh(n.name,n.options,e);PR("Invalid Firebase Database URL",o),O(o.path)||Ft("Database URL must point to the root of a Firebase Database (not including a child path).");let d=rP(a,n,u,new _h(n,t));return new of(d,n)}function iP(n,e){let t=sf[e];(!t||t[n.key]!==n)&&Ft(`Database ${e}(${n.repoInfo_}) has already been deleted.`),WR(n),delete t[n.key]}function rP(n,e,t,i){let r=sf[e.name];r||(r={},sf[e.name]=r);let s=r[n.toURLString()];return s&&Ft("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new tf(n,eP,t,i),r[n.toURLString()]=s,s}var of=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(LR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ct(this._repo,W())),this._rootInternal}_delete(){return this._rootInternal!==null&&(iP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ft("Cannot call "+e+" on a deleted database.")}};function II(n=ga(),e){let t=Wr(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let i=gy("database");i&&sP(t,...i)}return t}function sP(n,e,t,i={}){n=De(n),n._checkNotDeleted("useEmulator");let r=`${e}:${t}`,s=n._repoInternal;if(n._instanceStarted){if(r===n._repoInternal.repoInfo_.host&&vt(i,s.repoInfo_.emulatorOptions))return;Ft("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Ft('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ns(ns.OWNER);else if(i.mockUserToken){let a=typeof i.mockUserToken=="string"?i.mockUserToken:my(i.mockUserToken,n.app.options.projectId);o=new ns(a)}Yt(e)&&(ca(e),la("Database",!0)),tP(s,r,i,o)}function oP(n){SN(en),Xt(new ze("database",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return nP(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),it(Ov,Fv,n),it(Ov,Fv,"esm2020")}var af=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function xf(n,e,t){if(n=De(n),fI("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let i=t?.applyLocally??!0,r=new xt,s=(a,c,l)=>{let u=null;a?r.reject(a):(u=new zi(l,new ct(n._repo,n._path),oe),r.resolve(new af(c,u)))},o=Ic(n,()=>{});return zR(n._repo,n._path,e,s,o,i),r.promise}ff.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ff.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};oP();function aP(n,e){if(n&1){let t=tt();y(0,"button",8),q("click",function(){let r=H(t).$implicit,s=w();return $(s.selectedTab=r.key)}),D(1),v()}if(n&2){let t=e.$implicit,i=w();$e("active",i.selectedTab===t.key),xn("aria-selected",i.selectedTab===t.key),b(),Rn(" ",t.label," ")}}function cP(n,e){if(n&1&&(y(0,"div",9),D(1),v()),n&2){let t=w();b(),we(t.bannerText)}}function lP(n,e){if(n&1){let t=tt();y(0,"div",27),q("click",function(){H(t);let r=w().$implicit,s=w(2);return $(s.toggleAction(r))}),y(1,"div",28)(2,"div",29),D(3),v(),y(4,"div",30),D(5),v()()()}if(n&2){let t=w().$implicit,i=w(2);$e("active",i.pointsDayStates[t.id]),b(3),we(t.name),b(2),Rn("",t.points," points")}}function uP(n,e){if(n&1){let t=tt();y(0,"div",27),q("click",function(){let r=H(t).$implicit,s=w(4);return $(s.toggleAction(r))}),y(1,"div",28)(2,"div",29),D(3),v(),y(4,"div",30),D(5),v()()()}if(n&2){let t=e.$implicit,i=w(4);$e("active",i.pointsDayStates[t.id]),b(3),we(t.name),b(2),Rn("",t.points," points")}}function dP(n,e){if(n&1&&(y(0,"div",31)(1,"div",32),D(2),v(),y(3,"div",33),He(4,uP,6,4,"div",34),v()()),n&2){let t=w().$implicit;b(2),we(t.name),b(2),de("ngForOf",t.children)}}function hP(n,e){if(n&1&&(bu(0),He(1,lP,6,4,"div",25)(2,dP,5,2,"div",26),Tu()),n&2){let t=e.$implicit,i=w(2);b(),de("ngIf",i.isAction(t)),b(),de("ngIf",i.isGroup(t))}}function fP(n,e){n&1&&(y(0,"div",35),D(1,"No actions configured. Add items in Configuration."),v())}function pP(n,e){if(n&1){let t=tt();y(0,"div",36),q("click",function(){let r=H(t).$implicit,s=w(2);return $(s.selectPointsDay(r.key))}),y(1,"div",37),D(2),v(),y(3,"div",38),D(4),v()()}if(n&2){let t=e.$implicit,i=w(2);$e("selected",t.key===i.ymd(i.selectedPointsDay)),b(2),we(t.label),b(2),we(t.count)}}function gP(n,e){if(n&1){let t=tt();y(0,"section",10)(1,"div",11)(2,"div",12),D(3),v(),y(4,"div",13),D(5),v(),y(6,"div",14),D(7,"Total points"),v()(),y(8,"div",15),He(9,hP,3,2,"ng-container",16)(10,fP,2,0,"div",17),v(),y(11,"section",18)(12,"div",12),D(13,"This Week"),v(),y(14,"div",19),D(15),v(),y(16,"div",20),He(17,pP,5,4,"div",21),v()(),y(18,"div",22)(19,"button",23),q("click",function(){H(t);let r=w();return $(r.prevPointsWeek())}),D(20,"\u2039"),v(),y(21,"button",24),q("click",function(){H(t);let r=w();return $(r.nextPointsWeek())}),D(22,"\u203A"),v()()()}if(n&2){let t=w();b(3),Rn("Points for ",t.selectedPointsDayLabel,""),b(2),we(t.pointsDayTotal),b(4),de("ngForOf",t.pointItems),b(),de("ngIf",t.pointItems.length===0),b(5),we(t.pointsRangeLabel),b(2),de("ngForOf",t.pointsWeekDays),b(4),de("disabled",!t.canGoNextPointsWeek)}}function mP(n,e){if(n&1&&(y(0,"div",46)(1,"div",37),D(2),v(),y(3,"div",38),D(4),v()()),n&2){let t=e.$implicit;b(2),we(t.label),b(2),we(t.count)}}function _P(n,e){if(n&1){let t=tt();y(0,"section",10)(1,"section",39)(2,"div",12),D(3),v(),y(4,"div",13),D(5),v(),y(6,"button",40),q("click",function(){H(t);let r=w();return $(r.tap())}),D(7,"+1"),v(),y(8,"div",41),D(9),v()(),y(10,"section",42),Uo(11,"div",43),y(12,"div",19),D(13),v(),y(14,"div",44),He(15,mP,5,2,"div",45),v()(),y(16,"div",22)(17,"button",23),q("click",function(){H(t);let r=w();return $(r.prevWeek())}),D(18,"\u2039"),v(),y(19,"button",24),q("click",function(){H(t);let r=w();return $(r.nextWeek())}),D(20,"\u203A"),v()()()}if(n&2){let t=w();b(3),we(t.todayLabel),b(2),we(t.todayCount),b(),de("disabled",t.tapBusy||!t.uid),b(3),we(t.status||" "),b(4),we(t.rangeLabel),b(2),de("ngForOf",t.weekDays),b(4),de("disabled",!t.canGoNextWeek)}}function yP(n,e){if(n&1){let t=tt();y(0,"div",61)(1,"div",62),D(2,"Standalone Action"),v(),y(3,"div",63)(4,"label")(5,"span"),D(6,"Name"),v(),y(7,"input",64),zt("ngModelChange",function(r){H(t);let s=w().$implicit;return Pn(s.name,r)||(s.name=r),$(r)}),q("ngModelChange",function(r){H(t);let s=w().$implicit,o=w(2);return $(o.updateActionName(s,r))}),v()(),y(8,"label")(9,"span"),D(10,"Points"),v(),y(11,"input",65),zt("ngModelChange",function(r){H(t);let s=w().$implicit;return Pn(s.points,r)||(s.points=r),$(r)}),q("ngModelChange",function(r){H(t);let s=w().$implicit,o=w(2);return $(o.updateActionPoints(s,r))}),v()()(),y(12,"div",66)(13,"button",55),q("click",function(){H(t);let r=w(),s=r.$implicit,o=r.index,a=w(2);return $(a.duplicateAction(s,o))}),D(14,"Duplicate"),v(),y(15,"button",67),q("click",function(){H(t);let r=w().index,s=w(2);return $(s.removeRootAction(r))}),D(16,"Delete"),v()()()}if(n&2){let t=w().$implicit;b(7),Gt("ngModel",t.name),b(4),Gt("ngModel",t.points)}}function vP(n,e){if(n&1){let t=tt();y(0,"div",71)(1,"div",59),D(2,"\u2630"),v(),y(3,"div",63)(4,"label")(5,"span"),D(6,"Name"),v(),y(7,"input",64),zt("ngModelChange",function(r){let s=H(t).$implicit;return Pn(s.name,r)||(s.name=r),$(r)}),q("ngModelChange",function(r){let s=H(t).$implicit,o=w(4);return $(o.updateActionName(s,r))}),v()(),y(8,"label")(9,"span"),D(10,"Points"),v(),y(11,"input",65),zt("ngModelChange",function(r){let s=H(t).$implicit;return Pn(s.points,r)||(s.points=r),$(r)}),q("ngModelChange",function(r){let s=H(t).$implicit,o=w(4);return $(o.updateActionPoints(s,r))}),v()()(),y(12,"div",66)(13,"button",55),q("click",function(){let r=H(t),s=r.$implicit,o=r.index,a=w(2).$implicit,c=w(2);return $(c.duplicateAction(s,o,a))}),D(14,"Duplicate"),v(),y(15,"button",67),q("click",function(){let r=H(t).index,s=w(2).$implicit,o=w(2);return $(o.removeChildAction(s,r))}),D(16,"Delete"),v()()()}if(n&2){let t=e.$implicit;b(7),Gt("ngModel",t.name),b(4),Gt("ngModel",t.points)}}function wP(n,e){if(n&1){let t=tt();y(0,"div",61)(1,"div",62),D(2,"Group"),v(),y(3,"label",68)(4,"span"),D(5,"Group name"),v(),y(6,"input",64),zt("ngModelChange",function(r){H(t);let s=w().$implicit;return Pn(s.name,r)||(s.name=r),$(r)}),q("ngModelChange",function(r){H(t);let s=w().$implicit,o=w(2);return $(o.updateGroupName(s,r))}),v()(),y(7,"div",66)(8,"button",55),q("click",function(){H(t);let r=w().index,s=w(2);return $(s.duplicateGroup(r))}),D(9,"Duplicate group"),v(),y(10,"button",67),q("click",function(){H(t);let r=w().index,s=w(2);return $(s.removeGroup(r))}),D(11,"Delete group"),v()(),y(12,"div",69),q("cdkDropListDropped",function(r){H(t);let s=w().$implicit,o=w(2);return $(o.dropChild(s,r))}),He(13,vP,17,2,"div",70),v(),y(14,"button",55),q("click",function(){H(t);let r=w().$implicit,s=w(2);return $(s.addChildAction(r))}),D(15,"+ Add action"),v()()}if(n&2){let t=w().$implicit;b(6),Gt("ngModel",t.name),b(6),de("cdkDropListData",t.children),b(),de("ngForOf",t.children)}}function IP(n,e){if(n&1&&(y(0,"div",58)(1,"div",59),D(2,"\u2630"),v(),He(3,yP,17,2,"div",60)(4,wP,16,3,"div",60),v()),n&2){let t=e.$implicit,i=w(2);b(3),de("ngIf",i.isAction(t)),b(),de("ngIf",i.isGroup(t))}}function EP(n,e){if(n&1){let t=tt();y(0,"section",47)(1,"div",48)(2,"div",49)(3,"div")(4,"div",50),D(5,"Global Banner"),v(),y(6,"div",51),D(7,"Leave empty to hide the message bar."),v()(),y(8,"button",52),q("click",function(){H(t);let r=w();return $(r.persistBanner())}),D(9,"Save"),v()(),y(10,"textarea",53),zt("ngModelChange",function(r){H(t);let s=w();return Pn(s.bannerText,r)||(s.bannerText=r),$(r)}),v()(),y(11,"div",48)(12,"div",49)(13,"div",50),D(14,"Points Structure"),v(),y(15,"div",54)(16,"button",55),q("click",function(){H(t);let r=w();return $(r.addRootAction())}),D(17,"+ Action"),v(),y(18,"button",55),q("click",function(){H(t);let r=w();return $(r.addGroup())}),D(19,"+ Group"),v()()(),y(20,"div",56),q("cdkDropListDropped",function(r){H(t);let s=w();return $(s.dropRoot(r))}),He(21,IP,5,2,"div",57),v()()()}if(n&2){let t=w();b(10),Gt("ngModel",t.bannerText),b(11),de("ngForOf",t.pointItems)}}var DP={apiKey:"AIzaSyBjDvBqWHphOtEiI94ruYeRTXdaeeMRTQs",authDomain:"bettermescratchpad.firebaseapp.com",databaseURL:"https://bettermescratchpad-default-rtdb.firebaseio.com",projectId:"bettermescratchpad",storageBucket:"bettermescratchpad.firebasestorage.app",messagingSenderId:"516986845541",appId:"1:516986845541:web:75cd67831a7cc9d8f1498c",measurementId:"G-QLQBD1T7YC"},DI=!1,EI=n=>String(n).padStart(2,"0"),Yi=n=>`${n.getFullYear()}-${EI(n.getMonth()+1)}-${EI(n.getDate())}`,Ec=n=>n.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"}),Dc=n=>{let e=new Date(n);return e.setHours(0,0,0,0),e},Lt=(n,e)=>{let t=new Date(n);return t.setDate(t.getDate()+e),t},Zi=n=>{let e=n.getDay(),t=DI?e:e===0?6:e-1,i=new Date(n);return i.setHours(0,0,0,0),i.setDate(i.getDate()-t),i},CP=n=>{let[e,t,i]=n.split("-").map(Number);return Dc(new Date(e,(t||1)-1,i||1))},CI=(()=>{class n{constructor(){this.tabs=[{key:"points",label:"Points Earned"},{key:"times",label:"Times Gained Control"},{key:"config",label:"Configuration"}],this.selectedTab="points",this.status="Connecting\u2026",this.todayLabel="",this.todayCount="\u2014",this.rangeLabel="",this.weekDays=[],this.tapBusy=!1,this.enableRealtime=!0,this.bannerText="",this.pointItems=[],this.pointsDayStates={},this.pointsDayTotal=0,this.selectedPointsDay=Dc(new Date),this.selectedPointsDayLabel="",this.pointsWeekDays=[],this.pointsRangeLabel="",this.ymd=Yi,this.today=Dc(new Date),this.viewingWeekStart=Zi(this.today),this.pointsViewingWeekStart=Zi(this.today),this.app=xd(DP),this.auth=sh(this.app),this.db=II(this.app),this.uid=null,this.dayNames=DI?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.todayLabel=`Today \u2022 ${Ec(this.today)}`,this.selectedPointsDayLabel=Ec(this.selectedPointsDay),this.prepareWeekDays(),this.preparePointsWeekDays()}ngOnInit(){if(!this.enableRealtime){this.status="";return}this.authUnsubscribe=ih(this.auth,t=>p(this,null,function*(){if(!t){yield nh(this.auth);return}this.uid=t.uid,this.status="",this.attachTodayListener(),this.attachPointsDayListener(),yield this.loadPointsConfig(),this.renderWeek(),this.renderPointsWeek()}))}ngOnDestroy(){this.todayUnsubscribe?.(),this.pointsDayUnsubscribe?.(),this.authUnsubscribe?.()}get canGoNextWeek(){return Zi(this.today).getTime()>this.viewingWeekStart.getTime()}get canGoNextPointsWeek(){return Zi(this.today).getTime()>this.pointsViewingWeekStart.getTime()}isGroup(t){return t.type==="group"}isAction(t){return t.type==="action"}tap(){return p(this,null,function*(){if(!(!this.todayRef||!this.uid)){this.tapBusy=!0;try{yield xf(this.todayRef,t=>(t||0)+1)}catch(t){console.error("Increment failed",t),this.status="Increment failed. Please try again."}finally{this.tapBusy=!1}}})}toggleAction(t){return p(this,null,function*(){if(!this.uid)return;let i=Yi(this.selectedPointsDay),r=dn(this.db,`users/${this.uid}/points/days/${i}`),s=!!this.pointsDayStates[t.id],o=this.pointsDayStates,a=this.pointsDayTotal,c=E({},this.pointsDayStates);s?delete c[t.id]:c[t.id]=!0;let l=Math.max(0,this.pointsDayTotal+(s?-t.points:t.points));this.pointsDayStates=c,this.pointsDayTotal=l,this.pointsWeekDays=this.pointsWeekDays.map(u=>u.key===i?Y(E({},u),{count:l}):u);try{let u=yield xf(r,d=>{let h=d&&typeof d=="object"?{total:Number(d.total)||0,actions:d.actions||{}}:{total:0,actions:{}};return!!h.actions[t.id]?(h.total=Math.max(0,h.total-t.points),delete h.actions[t.id]):(h.total+=t.points,h.actions[t.id]=!0),h});if(u.committed&&u.snapshot?.exists()){let d=u.snapshot.val();this.pointsDayTotal=Number(d.total)||0,this.pointsDayStates=d.actions||{},this.pointsWeekDays=this.pointsWeekDays.map(h=>h.key===i?Y(E({},h),{count:this.pointsDayTotal}):h)}}catch(u){console.error("Toggle failed",u),this.pointsDayStates=o,this.pointsDayTotal=a,this.pointsWeekDays=this.pointsWeekDays.map(d=>d.key===i?Y(E({},d),{count:a}):d)}})}prevWeek(){this.setViewingWeek(Lt(this.viewingWeekStart,-7))}nextWeek(){if(!this.canGoNextWeek)return;let t=Lt(this.viewingWeekStart,7),i=Zi(this.today);this.setViewingWeek(t>i?i:t)}prevPointsWeek(){this.setPointsViewingWeek(Lt(this.pointsViewingWeekStart,-7))}nextPointsWeek(){if(!this.canGoNextPointsWeek)return;let t=Lt(this.pointsViewingWeekStart,7),i=Zi(this.today);this.setPointsViewingWeek(t>i?i:t)}selectPointsDay(t){this.selectedPointsDay=CP(t),this.selectedPointsDayLabel=Ec(this.selectedPointsDay),this.attachPointsDayListener()}addRootAction(){this.pointItems=[...this.pointItems,this.createAction("New action",1)],this.persistPointsConfig()}addGroup(){this.pointItems=[...this.pointItems,{id:this.generateId(),type:"group",name:"New group",children:[this.createAction("New action",1)]}],this.persistPointsConfig()}addChildAction(t){t.children=[...t.children,this.createAction("New action",1)],this.persistPointsConfig()}duplicateAction(t,i,r){let s=this.createAction(`${t.name} (Copy)`,t.points);if(r){let o=typeof i=="number"?i+1:r.children.indexOf(t)+1;r.children=this.insertAt(r.children,o,s)}else{let o=typeof i=="number"?i+1:this.pointItems.indexOf(t)+1;this.pointItems=this.insertAt(this.pointItems,o,s)}this.persistPointsConfig()}duplicateGroup(t){let i=this.pointItems[t];if(!this.isGroup(i))return;let r={id:this.generateId(),type:"group",name:`${i.name} (Copy)`,children:i.children.map(s=>this.createAction(s.name,s.points))};this.pointItems=this.insertAt(this.pointItems,t+1,r),this.persistPointsConfig()}removeRootAction(t){confirm("Delete this action?")&&(this.pointItems=this.pointItems.filter((i,r)=>r!==t),this.persistPointsConfig())}removeGroup(t){confirm("Delete this group and all of its actions?")&&(this.pointItems=this.pointItems.filter((i,r)=>r!==t),this.persistPointsConfig())}removeChildAction(t,i){confirm("Delete this action?")&&(t.children=t.children.filter((r,s)=>s!==i),this.persistPointsConfig())}dropRoot(t){t.previousIndex!==t.currentIndex&&(sa(this.pointItems,t.previousIndex,t.currentIndex),this.persistPointsConfig())}dropChild(t,i){i.previousIndex!==i.currentIndex&&(sa(t.children,i.previousIndex,i.currentIndex),this.persistPointsConfig())}updateActionName(t,i){t.name=i,this.persistPointsConfig()}updateActionPoints(t,i){let r=typeof i=="number"?i:Number(i);t.points=Number.isFinite(r)?r:0,this.persistPointsConfig()}updateGroupName(t,i){t.name=i,this.persistPointsConfig()}persistBanner(){return p(this,null,function*(){yield this.persistPointsConfig()})}createAction(t,i){return{id:this.generateId(),type:"action",name:t,points:i}}insertAt(t,i,r){let s=[...t];return s.splice(i,0,r),s}setViewingWeek(t){this.viewingWeekStart=t,this.prepareWeekDays(),this.renderWeek()}setPointsViewingWeek(t){this.pointsViewingWeekStart=t,this.preparePointsWeekDays();let i=this.pointsViewingWeekStart.getTime(),r=Lt(this.pointsViewingWeekStart,6).getTime(),s=this.selectedPointsDay.getTime();(s<i||s>r)&&(this.selectedPointsDay=Dc(this.pointsViewingWeekStart),this.selectedPointsDayLabel=Ec(this.selectedPointsDay),this.attachPointsDayListener()),this.renderPointsWeek()}prepareWeekDays(){this.updateRangeLabel(),this.weekDays=Array.from({length:7},(t,i)=>{let r=Lt(this.viewingWeekStart,i);return{label:this.dayNames[i],key:Yi(r),count:"\u2014"}})}preparePointsWeekDays(){this.updatePointsRangeLabel(),this.pointsWeekDays=Array.from({length:7},(t,i)=>{let r=Lt(this.pointsViewingWeekStart,i);return{label:this.dayNames[i],key:Yi(r),count:0}})}renderWeek(){return p(this,null,function*(){if(!this.uid)return;let t=dn(this.db,`users/${this.uid}/daily`),i=yield Promise.all(this.weekDays.map(r=>wc(qn(t,`${r.key}/count`))));this.weekDays=this.weekDays.map((r,s)=>Y(E({},r),{count:i[s].exists()?i[s].val():0}))})}renderPointsWeek(){return p(this,null,function*(){if(!this.uid)return;let t=dn(this.db,`users/${this.uid}/points/days`),i=yield Promise.all(this.pointsWeekDays.map(r=>wc(qn(t,`${r.key}/total`))));this.pointsWeekDays=this.pointsWeekDays.map((r,s)=>Y(E({},r),{count:i[s].exists()?i[s].val():0}))})}attachTodayListener(){return p(this,null,function*(){if(!this.uid)return;let t=Yi(this.today);this.todayRef=dn(this.db,`users/${this.uid}/daily/${t}/count`),this.todayUnsubscribe?.(),this.todayUnsubscribe=Ic(this.todayRef,i=>{let r=i.exists()?i.val():0;this.todayCount=r;let s=this.weekDays.findIndex(o=>o.key===t);s>=0&&(this.weekDays=this.weekDays.map((o,a)=>a===s?Y(E({},o),{count:r}):o))})})}attachPointsDayListener(){if(!this.uid)return;let t=Yi(this.selectedPointsDay);this.pointsDayRef=dn(this.db,`users/${this.uid}/points/days/${t}`),this.pointsDayUnsubscribe?.(),this.pointsDayUnsubscribe=Ic(this.pointsDayRef,i=>{let r=i.exists()?i.val():{total:0,actions:{}};this.pointsDayTotal=Number(r.total)||0,this.pointsDayStates=r.actions||{};let s=this.pointsWeekDays.findIndex(o=>o.key===t);s>=0&&(this.pointsWeekDays=this.pointsWeekDays.map((o,a)=>a===s?Y(E({},o),{count:this.pointsDayTotal}):o))})}loadPointsConfig(){return p(this,null,function*(){if(!this.uid)return;let t=dn(this.db,`users/${this.uid}/points/config`),i=yield wc(t);if(i.exists()){let r=i.val(),s=Array.isArray(r?.items)?r.items:[];this.pointItems=s.map(o=>o.type==="group"?{id:o.id||this.generateId(),type:"group",name:o.name||"Group",children:o.children?.map(a=>this.createAction(a.name,a.points))||[]}:{id:o.id||this.generateId(),type:"action",name:o.name||"Action",points:Number(o.points)||0}),this.bannerText=r?.banner||""}else this.pointItems=[this.createAction("Wake up on time",5),{id:this.generateId(),type:"group",name:"Healthy choices",children:[this.createAction("Drink water",3),this.createAction("Take a walk",4)]},this.createAction("Reflect on the day",2)],yield this.persistPointsConfig()})}persistPointsConfig(){return p(this,null,function*(){if(!this.uid)return;let t=dn(this.db,`users/${this.uid}/points/config`);yield wI(t,{items:this.pointItems,banner:this.bannerText})})}updateRangeLabel(){let t=this.viewingWeekStart,i=Lt(t,6);this.rangeLabel=`${t.toLocaleDateString(void 0,{month:"short",day:"numeric"})} \u2013 ${i.toLocaleDateString(void 0,{month:"short",day:"numeric"})}`}updatePointsRangeLabel(){let t=this.pointsViewingWeekStart,i=Lt(t,6);this.pointsRangeLabel=`${t.toLocaleDateString(void 0,{month:"short",day:"numeric"})} \u2013 ${i.toLocaleDateString(void 0,{month:"short",day:"numeric"})}`}generateId(){return Math.random().toString(36).slice(2,10)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=yr({type:n,selectors:[["app-root"]],standalone:!0,features:[Er],decls:10,vars:5,consts:[[1,"app"],[1,"app-header"],[1,"title"],["role","tablist","aria-label","Main navigation",1,"tabs"],["class","tab","role","tab",3,"active","click",4,"ngFor","ngForOf"],["class","banner",4,"ngIf"],["class","panel",4,"ngIf"],["class","panel config",4,"ngIf"],["role","tab",1,"tab",3,"click"],[1,"banner"],[1,"panel"],[1,"section-head"],[1,"week-label"],[1,"count"],[1,"status","muted"],[1,"points-list"],[4,"ngFor","ngForOf"],["class","empty muted",4,"ngIf"],[1,"week","points-week"],[1,"range-label"],[1,"week-strip","points-week-strip"],["class","day",3,"selected","click",4,"ngFor","ngForOf"],[1,"week-nav"],["aria-label","Previous week",1,"btn",3,"click"],["aria-label","Next week",1,"btn",3,"click","disabled"],["class","action-row",3,"active","click",4,"ngIf"],["class","group-block",4,"ngIf"],[1,"action-row",3,"click"],[1,"text"],[1,"name"],[1,"meta"],[1,"group-block"],[1,"group-title"],[1,"group-actions"],["class","action-row",3,"active","click",4,"ngFor","ngForOf"],[1,"empty","muted"],[1,"day",3,"click"],[1,"dow"],[1,"mini"],[1,"today"],[1,"tap",3,"click","disabled"],[1,"status"],[1,"week"],["aria-hidden","true",1,"week-label"],[1,"week-strip"],["class","day",4,"ngFor","ngForOf"],[1,"day"],[1,"panel","config"],[1,"card"],[1,"card-head"],[1,"title-sm"],[1,"muted"],[1,"btn","primary",3,"click"],["rows","2","placeholder","Type an announcement",3,"ngModelChange","ngModel"],[1,"actions"],[1,"btn",3,"click"],["cdkDropList","",1,"config-list",3,"cdkDropListDropped"],["cdkDrag","","class","config-item",4,"ngFor","ngForOf"],["cdkDrag","",1,"config-item"],["cdkDragHandle","","aria-hidden","true",1,"drag-handle"],["class","config-body",4,"ngIf"],[1,"config-body"],[1,"config-title"],[1,"fields"],["type","text",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[1,"row-actions"],[1,"btn","danger",3,"click"],[1,"wide"],["cdkDropList","",1,"child-list",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","","class","config-child",4,"ngFor","ngForOf"],["cdkDrag","",1,"config-child"]],template:function(i,r){i&1&&(y(0,"main",0)(1,"header",1)(2,"div",2),D(3,"Daily Progress"),v(),y(4,"div",3),He(5,aP,2,4,"button",4),v()(),He(6,cP,2,1,"div",5)(7,gP,23,7,"section",6)(8,_P,21,7,"section",6)(9,EP,22,2,"section",7),v()),i&2&&(b(5),de("ngForOf",r.tabs),b(),de("ngIf",r.bannerText),b(),de("ngIf",r.selectedTab==="points"),b(),de("ngIf",r.selectedTab==="times"),b(),de("ngIf",r.selectedTab==="config"))},dependencies:[Nu,Jm,Xm,M_,Zo,qu,T_,zu,cy,ay,oy,iy]})}}return n})();c_(CI,l_).catch(n=>console.error(n));
