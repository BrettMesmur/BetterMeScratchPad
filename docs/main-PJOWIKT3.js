var AI=Object.defineProperty,MI=Object.defineProperties;var NI=Object.getOwnPropertyDescriptors;var Is=Object.getOwnPropertySymbols,xI=Object.getPrototypeOf,Pf=Object.prototype.hasOwnProperty,kf=Object.prototype.propertyIsEnumerable,RI=Reflect.get;var Rf=(n,e,t)=>e in n?AI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,E=(n,e)=>{for(var t in e||={})Pf.call(e,t)&&Rf(n,t,e[t]);if(Is)for(var t of Is(e))kf.call(e,t)&&Rf(n,t,e[t]);return n},Y=(n,e)=>MI(n,NI(e));var Of=n=>typeof n=="symbol"?n:n+"",Qi=(n,e)=>{var t={};for(var i in n)Pf.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Is)for(var i of Is(n))e.indexOf(i)<0&&kf.call(n,i)&&(t[i]=n[i]);return t};var hn=(n,e,t)=>RI(xI(n),t,e);var p=(n,e,t)=>new Promise((i,r)=>{var s=c=>{try{a(t.next(c))}catch(l){r(l)}},o=c=>{try{a(t.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var Ff=null;var Sc=1,Ac=Symbol("SIGNAL");function G(n){let e=Ff;return Ff=n,e}var Lf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function PI(n){if(!(xc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Sc)){if(!n.producerMustRecompute(n)&&!Mc(n)){n.dirty=!1,n.lastCleanEpoch=Sc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Sc}}function Vf(n){return n&&(n.nextProducerIndex=0),G(n)}function jf(n,e){if(G(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(xc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Nc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Mc(n){Es(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(PI(t),i!==t.version))return!0}return!1}function Bf(n){if(Es(n),xc(n))for(let e=0;e<n.producerNode.length;e++)Nc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Nc(n,e){if(kI(n),Es(n),n.liveConsumerNode.length===1)for(let i=0;i<n.producerNode.length;i++)Nc(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Es(r),r.producerIndexOfThis[i]=e}}function xc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Es(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function kI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function OI(){throw new Error}var FI=OI;function Uf(n){FI=n}function A(n){return typeof n=="function"}function Ds(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Cs=Ds(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fn(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ee=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(A(i))try{i()}catch(s){e=s instanceof Cs?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{Hf(s)}catch(o){e=e??[],o instanceof Cs?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Cs(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Hf(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fn(t,e)}remove(e){let{_finalizers:t}=this;t&&fn(t,e),e instanceof n&&e._removeParent(this)}};ee.EMPTY=(()=>{let n=new ee;return n.closed=!0,n})();var Rc=ee.EMPTY;function bs(n){return n instanceof ee||n&&"closed"in n&&A(n.remove)&&A(n.add)&&A(n.unsubscribe)}function Hf(n){A(n)?n():n.unsubscribe()}var Ye={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xn={setTimeout(n,e,...t){let{delegate:i}=Xn;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Xn;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ts(n){Xn.setTimeout(()=>{let{onUnhandledError:e}=Ye;if(e)e(n);else throw n})}function Ji(){}var $f=Pc("C",void 0,void 0);function Wf(n){return Pc("E",void 0,n)}function Gf(n){return Pc("N",n,void 0)}function Pc(n,e,t){return{kind:n,value:e,error:t}}var pn=null;function ei(n){if(Ye.useDeprecatedSynchronousErrorHandling){let e=!pn;if(e&&(pn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=pn;if(pn=null,t)throw i}}else n()}function zf(n){Ye.useDeprecatedSynchronousErrorHandling&&pn&&(pn.errorThrown=!0,pn.error=n)}var gn=class extends ee{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,bs(e)&&e.add(this)):this.destination=jI}static create(e,t,i){return new ti(e,t,i)}next(e){this.isStopped?Oc(Gf(e),this):this._next(e)}error(e){this.isStopped?Oc(Wf(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Oc($f,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},LI=Function.prototype.bind;function kc(n,e){return LI.call(n,e)}var Fc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Ss(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Ss(i)}else Ss(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ss(t)}}},ti=class extends gn{constructor(e,t,i){super();let r;if(A(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Ye.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&kc(e.next,s),error:e.error&&kc(e.error,s),complete:e.complete&&kc(e.complete,s)}):r=e}this.destination=new Fc(r)}};function Ss(n){Ye.useDeprecatedSynchronousErrorHandling?zf(n):Ts(n)}function VI(n){throw n}function Oc(n,e){let{onStoppedNotification:t}=Ye;t&&Xn.setTimeout(()=>t(n,e))}var jI={closed:!0,next:Ji,error:VI,complete:Ji};var ni=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ii(n){return n}function qf(n){return n.length===0?ii:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var K=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=UI(t)?t:new ti(t,i,r);return ei(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=Kf(i),new i((r,s)=>{let o=new ti({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[ni](){return this}pipe(...t){return qf(t)(this)}toPromise(t){return t=Kf(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Kf(n){var e;return(e=n??Ye.Promise)!==null&&e!==void 0?e:Promise}function BI(n){return n&&A(n.next)&&A(n.error)&&A(n.complete)}function UI(n){return n&&n instanceof gn||BI(n)&&bs(n)}function HI(n){return A(n?.lift)}function ce(n){return e=>{if(HI(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(n,e,t,i,r){return new Lc(n,e,t,i,r)}var Lc=class extends gn{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var ri={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:i}=ri;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);let r=e(s=>{t=void 0,n(s)});return new ee(()=>t?.(r))},requestAnimationFrame(...n){let{delegate:e}=ri;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=ri;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var Yf=Ds(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var j=(()=>{class n extends K{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new As(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Yf}next(t){ei(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){ei(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ei(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?Rc:(this.currentObservers=null,s.push(t),new ee(()=>{this.currentObservers=null,fn(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new K;return t.source=this,t}}return n.create=(e,t)=>new As(e,t),n})(),As=class extends j{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:Rc}};var mn=class extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Vc={now(){return(Vc.delegate||Date).now()},delegate:void 0};var Ms=class extends ee{constructor(e,t){super()}schedule(e,t=0){return this}};var Xi={setInterval(n,e,...t){let{delegate:i}=Xi;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xi;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var si=class extends Ms{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Xi.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Xi.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fn(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var oi=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};oi.now=Vc.now;var ai=class extends oi{constructor(e,t=oi.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var er=new ai(si),Zf=er;var Ns=class extends si{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return i!==null&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ri.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);let{actions:s}=e;t!=null&&t===e._scheduled&&((r=s[s.length-1])===null||r===void 0?void 0:r.id)!==t&&(ri.cancelAnimationFrame(t),e._scheduled=void 0)}};var xs=class extends ai{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:i}=this,r;e=e||i.shift();do if(r=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}};var Rs=new xs(Ns);var Ps=new K(n=>n.complete());function ks(n){return n&&A(n.schedule)}function jc(n){return n[n.length-1]}function Qf(n){return A(jc(n))?n.pop():void 0}function Vt(n){return ks(jc(n))?n.pop():void 0}function Jf(n,e){return typeof jc(n)=="number"?n.pop():e}function ep(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function Xf(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _n(n){return this instanceof _n?(this.v=n,this):new _n(n)}function tp(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(g){return Promise.resolve(g).then(f,d)}}function a(f,g){i[f]&&(r[f]=function(_){return new Promise(function(I,x){s.push([f,_,I,x])>1||c(f,_)})},g&&(r[f]=g(r[f])))}function c(f,g){try{l(i[f](g))}catch(_){h(s[0][3],_)}}function l(f){f.value instanceof _n?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,g){f(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function np(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Xf=="function"?Xf(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var ci=n=>n&&typeof n.length=="number"&&typeof n!="function";function Os(n){return A(n?.then)}function Fs(n){return A(n[ni])}function Ls(n){return Symbol.asyncIterator&&A(n?.[Symbol.asyncIterator])}function Vs(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $I(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var js=$I();function Bs(n){return A(n?.[js])}function Us(n){return tp(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield _n(t.read());if(r)return yield _n(void 0);yield yield _n(i)}}finally{t.releaseLock()}})}function Hs(n){return A(n?.getReader)}function le(n){if(n instanceof K)return n;if(n!=null){if(Fs(n))return WI(n);if(ci(n))return GI(n);if(Os(n))return zI(n);if(Ls(n))return ip(n);if(Bs(n))return qI(n);if(Hs(n))return KI(n)}throw Vs(n)}function WI(n){return new K(e=>{let t=n[ni]();if(A(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GI(n){return new K(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function zI(n){return new K(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ts)})}function qI(n){return new K(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ip(n){return new K(e=>{YI(n,e).catch(t=>e.error(t))})}function KI(n){return ip(Us(n))}function YI(n,e){var t,i,r,s;return ep(this,void 0,void 0,function*(){try{for(t=np(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function Fe(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function $s(n,e=0){return ce((t,i)=>{t.subscribe(re(i,r=>Fe(i,n,()=>i.next(r),e),()=>Fe(i,n,()=>i.complete(),e),r=>Fe(i,n,()=>i.error(r),e)))})}function Ws(n,e=0){return ce((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function rp(n,e){return le(n).pipe(Ws(e),$s(e))}function sp(n,e){return le(n).pipe(Ws(e),$s(e))}function op(n,e){return new K(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function ap(n,e){return new K(t=>{let i;return Fe(t,e,()=>{i=n[js](),Fe(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>A(i?.return)&&i.return()})}function Gs(n,e){if(!n)throw new Error("Iterable cannot be null");return new K(t=>{Fe(t,e,()=>{let i=n[Symbol.asyncIterator]();Fe(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function cp(n,e){return Gs(Us(n),e)}function lp(n,e){if(n!=null){if(Fs(n))return rp(n,e);if(ci(n))return op(n,e);if(Os(n))return sp(n,e);if(Ls(n))return Gs(n,e);if(Bs(n))return ap(n,e);if(Hs(n))return cp(n,e)}throw Vs(n)}function Ct(n,e){return e?lp(n,e):le(n)}function Bc(...n){let e=Vt(n);return Ct(n,e)}function up(n){return n instanceof Date&&!isNaN(n)}function Ze(n,e){return ce((t,i)=>{let r=0;t.subscribe(re(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:ZI}=Array;function QI(n,e){return ZI(e)?n(...e):n(e)}function zs(n){return Ze(e=>QI(n,e))}var{isArray:JI}=Array,{getPrototypeOf:XI,prototype:eE,keys:tE}=Object;function dp(n){if(n.length===1){let e=n[0];if(JI(e))return{args:e,keys:null};if(nE(e)){let t=tE(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function nE(n){return n&&typeof n=="object"&&XI(n)===eE}function hp(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function fp(n,e,t,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=_=>l<i?g(_):c.push(_),g=_=>{s&&e.next(_),l++;let I=!1;le(t(_,u++)).subscribe(re(e,x=>{r?.(x),s?f(x):e.next(x)},()=>{I=!0},void 0,()=>{if(I)try{for(l--;c.length&&l<i;){let x=c.shift();o?Fe(e,o,()=>g(x)):g(x)}h()}catch(x){e.error(x)}}))};return n.subscribe(re(e,f,()=>{d=!0,h()})),()=>{a?.()}}function tr(n,e,t=1/0){return A(e)?tr((i,r)=>Ze((s,o)=>e(i,s,r,o))(le(n(i,r))),t):(typeof e=="number"&&(t=e),ce((i,r)=>fp(i,r,n,t)))}function qs(n=1/0){return tr(ii,n)}function pp(){return qs(1)}function Uc(...n){return pp()(Ct(n,Vt(n)))}function Hc(...n){let e=Qf(n),{args:t,keys:i}=dp(n),r=new K(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;le(t[u]).subscribe(re(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?hp(i,a):a),s.complete())}))}});return e?r.pipe(zs(e)):r}var iE=["addListener","removeListener"],rE=["addEventListener","removeEventListener"],sE=["on","off"];function nr(n,e,t,i){if(A(t)&&(i=t,t=void 0),i)return nr(n,e,t).pipe(zs(i));let[r,s]=cE(n)?rE.map(o=>a=>n[o](e,a,t)):oE(n)?iE.map(gp(n,e)):aE(n)?sE.map(gp(n,e)):[];if(!r&&ci(n))return tr(o=>nr(o,e,t))(le(n));if(!r)throw new TypeError("Invalid event target");return new K(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function gp(n,e){return t=>i=>n[t](e,i)}function oE(n){return A(n.addListener)&&A(n.removeListener)}function aE(n){return A(n.on)&&A(n.off)}function cE(n){return A(n.addEventListener)&&A(n.removeEventListener)}function Ks(n=0,e,t=Zf){let i=-1;return e!=null&&(ks(e)?t=e:i=e),new K(r=>{let s=up(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function $c(n=0,e=er){return n<0&&(n=0),Ks(n,n,e)}function ir(...n){let e=Vt(n),t=Jf(n,1/0),i=n;return i.length?i.length===1?le(i[0]):qs(t)(Ct(i,e)):Ps}function Wc(n,e){return ce((t,i)=>{let r=0;t.subscribe(re(i,s=>n.call(e,s,r++)&&i.next(s)))})}function mp(n){return ce((e,t)=>{let i=!1,r=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(re(t,l=>{i=!0,r=l,s||le(n(l)).subscribe(s=re(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}function Ys(n,e=er){return mp(()=>Ks(n,e))}function Zs(n){return n<=0?()=>Ps:ce((e,t)=>{let i=0;e.subscribe(re(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function rr(...n){let e=Vt(n);return ce((t,i)=>{(e?Uc(n,t,e):Uc(n,t)).subscribe(i)})}function Qs(n,e){return ce((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(re(i,c=>{r?.unsubscribe();let l=0,u=s++;le(n(c,u)).subscribe(r=re(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function yn(n){return ce((e,t)=>{le(n).subscribe(re(t,()=>t.complete(),Ji)),!t.closed&&e.subscribe(t)})}function Gc(n,e,t){let i=A(n)||e||t?{next:n,error:e,complete:t}:n;return i?ce((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(re(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):ii}var lE="https://g.co/ng/security#xss",U=class extends Error{constructor(e,t){super(Gl(e,t)),this.code=e}};function Gl(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function _r(n){return{toString:n}.toString()}var Js="__parameters__";function uE(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function eg(n,e,t){return _r(()=>{let i=uE(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Js)?c[Js]:Object.defineProperty(c,Js,{value:[]})[Js];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var sr=globalThis;function te(n){for(let e in n)if(n[e]===te)return e;throw Error("Could not find renamed property on target object.")}function dE(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Pe(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Pe).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function _p(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var hE=te({__forward_ref__:te});function Ci(n){return n.__forward_ref__=Ci,n.toString=function(){return Pe(this())},n}function be(n){return tg(n)?n():n}function tg(n){return typeof n=="function"&&n.hasOwnProperty(hE)&&n.__forward_ref__===Ci}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function je(n){return{providers:n.providers||[],imports:n.imports||[]}}function zl(n){return yp(n,ng)||yp(n,ig)}function yp(n,e){return n.hasOwnProperty(e)?n[e]:null}function fE(n){let e=n&&(n[ng]||n[ig]);return e||null}function vp(n){return n&&(n.hasOwnProperty(wp)||n.hasOwnProperty(pE))?n[wp]:null}var ng=te({\u0275prov:te}),wp=te({\u0275inj:te}),ig=te({ngInjectableDef:te}),pE=te({ngInjectorDef:te}),R=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function rg(n){return n&&!!n.\u0275providers}var gE=te({\u0275cmp:te}),mE=te({\u0275dir:te}),_E=te({\u0275pipe:te});var oo=te({\u0275fac:te}),or=te({__NG_ELEMENT_ID__:te}),Ip=te({__NG_ENV_ID__:te});function ql(n){return typeof n=="string"?n:n==null?"":String(n)}function yE(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ql(n)}function vE(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new U(-200,n)}function Kl(n,e){throw new U(-201,!1)}var L=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(L||{}),al;function sg(){return al}function lt(n){let e=al;return al=n,e}function og(n,e,t){let i=zl(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&L.Optional)return null;if(e!==void 0)return e;Kl(n,"Injector")}var wE={},ar=wE,cl="__NG_DI_FLAG__",ao="ngTempTokenPath",IE="ngTokenPath",EE=/\n/gm,DE="\u0275",Ep="__source",fi;function CE(){return fi}function li(n){let e=fi;return fi=n,e}function bE(n,e=L.Default){if(fi===void 0)throw new U(-203,!1);return fi===null?og(n,void 0,e):fi.get(n,e&L.Optional?null:void 0,e)}function S(n,e=L.Default){return(sg()||bE)(be(n),e)}function ie(n,e=L.Default){return S(n,To(e))}function To(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ll(n){let e=[];for(let t=0;t<n.length;t++){let i=be(n[t]);if(Array.isArray(i)){if(i.length===0)throw new U(900,!1);let r,s=L.Default;for(let o=0;o<i.length;o++){let a=i[o],c=TE(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(S(r,s))}else e.push(S(i))}return e}function ag(n,e){return n[cl]=e,n.prototype[cl]=e,n}function TE(n){return n[cl]}function SE(n,e,t,i){let r=n[ao];throw e[Ep]&&r.unshift(e[Ep]),n.message=AE(`
`+n.message,r,t,i),n[IE]=r,n[ao]=null,n}function AE(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==DE?n.slice(2):n;let r=Pe(e);if(Array.isArray(e))r=e.map(Pe).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Pe(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(EE,`
  `)}`}var cg=ag(eg("Optional"),8);var ME=ag(eg("SkipSelf"),4);function gi(n,e){let t=n.hasOwnProperty(oo);return t?n[oo]:null}function Yl(n,e){n.forEach(t=>Array.isArray(t)?Yl(t,e):e(t))}function lg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function co(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function NE(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function xE(n,e,t){let i=yr(n,e);return i>=0?n[i|1]=t:(i=~i,NE(n,i,e,t)),i}function zc(n,e){let t=yr(n,e);if(t>=0)return n[t|1]}function yr(n,e){return RE(n,e,1)}function RE(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var mi={},Le=[],cr=new R(""),ug=new R("",-1),dg=new R(""),lo=class{get(e,t=ar){if(t===ar){let i=new Error(`NullInjectorError: No provider for ${Pe(e)}!`);throw i.name="NullInjectorError",i}return t}},hg=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(hg||{}),ht=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ht||{}),B=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(B||{});function PE(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function ul(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];OE(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function kE(n){return n===3||n===4||n===6}function OE(n){return n.charCodeAt(0)===64}function lr(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?Dp(n,t,r,null,e[++i]):Dp(n,t,r,null,null))}}return n}function Dp(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[s+1]=r);return}else if(i===n[s+1]){n[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),r!==null&&n.splice(s++,0,r)}var fg="ng-template";function FE(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&PE(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(Zl(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Zl(n){return n.type===4&&n.value!==fg}function LE(n,e,t){let i=n.type===4&&!t?fg:n.value;return e===i}function VE(n,e,t){let i=4,r=n.attrs,s=r!==null?UE(r):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Qe(i)&&!Qe(c))return!1;if(o&&Qe(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!LE(n,c,t)||c===""&&e.length===1){if(Qe(i))return!1;o=!0}}else if(i&8){if(r===null||!FE(n,r,c,t)){if(Qe(i))return!1;o=!0}}else{let l=e[++a],u=jE(c,r,Zl(n),t);if(u===-1){if(Qe(i))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&l!==d){if(Qe(i))return!1;o=!0}}}}return Qe(i)||o}function Qe(n){return(n&1)===0}function jE(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return HE(e,n)}function BE(n,e,t=!1){for(let i=0;i<e.length;i++)if(VE(n,e[i],t))return!0;return!1}function UE(n){for(let e=0;e<n.length;e++){let t=n[e];if(kE(t))return e}return n.length}function HE(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function Cp(n,e){return n?":not("+e.trim()+")":e}function $E(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Qe(o)&&(e+=Cp(s,r),r=""),i=o,s=s||!Qe(i);t++}return r!==""&&(e+=Cp(s,r)),e}function WE(n){return n.map($E).join(",")}function GE(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!Qe(r))break;r=s}i++}return{attrs:e,classes:t}}function vr(n){return _r(()=>{let e=mg(n),t=Y(E({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===hg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ht.Emulated,styles:n.styles||Le,_:null,schemas:n.schemas||null,tView:null,id:""});_g(t);let i=n.dependencies;return t.directiveDefs=Tp(i,!1),t.pipeDefs=Tp(i,!0),t.id=YE(t),t})}function zE(n){return In(n)||pg(n)}function qE(n){return n!==null}function Be(n){return _r(()=>({type:n.type,bootstrap:n.bootstrap||Le,declarations:n.declarations||Le,imports:n.imports||Le,exports:n.exports||Le,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function bp(n,e){if(n==null)return mi;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a=B.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(t[s]=a!==B.None?[i,a]:i,e[s]=o):t[s]=i}return t}function ve(n){return _r(()=>{let e=mg(n);return _g(e),e})}function In(n){return n[gE]||null}function pg(n){return n[mE]||null}function gg(n){return n[_E]||null}function KE(n){let e=In(n)||pg(n)||gg(n);return e!==null?e.standalone:!1}function mg(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||mi,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Le,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bp(n.inputs,e),outputs:bp(n.outputs),debugInfo:null}}function _g(n){n.features?.forEach(e=>e(n))}function Tp(n,e){if(!n)return null;let t=e?gg:zE;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(qE)}function YE(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yg(n){return{\u0275providers:n}}function ZE(...n){return{\u0275providers:vg(!0,n),\u0275fromNgModule:!0}}function vg(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return Yl(e,o=>{let a=o;dl(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&wg(r,s),t}function wg(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Ql(r,s=>{e(s,i)})}}function dl(n,e,t,i){if(n=be(n),!n)return!1;let r=null,s=vp(n),o=!s&&In(n);if(!s&&!o){let c=n.ngModule;if(s=vp(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)dl(l,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{Yl(s.imports,u=>{dl(u,e,t,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&wg(l,e)}if(!a){let l=gi(r)||(()=>new r);e({provide:r,useFactory:l,deps:Le},r),e({provide:dg,useValue:r,multi:!0},r),e({provide:cr,useValue:()=>S(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=n;Ql(c,u=>{e(u,l)})}}else return!1;return r!==n&&n.providers!==void 0}function Ql(n,e){for(let t of n)rg(t)&&(t=t.\u0275providers),Array.isArray(t)?Ql(t,e):e(t)}var QE=te({provide:String,useValue:te});function Ig(n){return n!==null&&typeof n=="object"&&QE in n}function JE(n){return!!(n&&n.useExisting)}function XE(n){return!!(n&&n.useFactory)}function _i(n){return typeof n=="function"}function eD(n){return!!n.useClass}var So=new R(""),to={},tD={},qc;function Ao(){return qc===void 0&&(qc=new lo),qc}var ft=class{},uo=class extends ft{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fl(e,o=>this.processProvider(o)),this.records.set(ug,ui(void 0,this)),r.has("environment")&&this.records.set(ft,ui(void 0,this));let s=this.records.get(So);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(dg,Le,L.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=li(this),i=lt(void 0),r;try{return e()}finally{li(t),lt(i)}}get(e,t=ar,i=L.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ip))return e[Ip](this);i=To(i);let r,s=li(this),o=lt(void 0);try{if(!(i&L.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=oD(e)&&zl(e);l&&this.injectableDefInScope(l)?c=ui(hl(e),to):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&L.Self?Ao():this.parent;return t=i&L.Optional&&t===ar?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ao]=a[ao]||[]).unshift(Pe(e)),s)throw a;return SE(a,e,"R3InjectorError",this.source)}else throw a}finally{lt(o),li(s)}}resolveInjectorInitializers(){let e=G(null),t=li(this),i=lt(void 0),r;try{let s=this.get(cr,Le,L.Self);for(let o of s)o()}finally{li(t),lt(i),G(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Pe(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(e){e=be(e);let t=_i(e)?e:be(e&&e.provide),i=iD(e);if(!_i(e)&&e.multi===!0){let r=this.records.get(t);r||(r=ui(void 0,to,!0),r.factory=()=>ll(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=G(null);try{return t.value===to&&(t.value=tD,t.value=t.factory()),typeof t.value=="object"&&t.value&&sD(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{G(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=be(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function hl(n){let e=zl(n),t=e!==null?e.factory:gi(n);if(t!==null)return t;if(n instanceof R)throw new U(204,!1);if(n instanceof Function)return nD(n);throw new U(204,!1)}function nD(n){if(n.length>0)throw new U(204,!1);let t=fE(n);return t!==null?()=>t.factory(n):()=>new n}function iD(n){if(Ig(n))return ui(void 0,n.useValue);{let e=Eg(n);return ui(e,to)}}function Eg(n,e,t){let i;if(_i(n)){let r=be(n);return gi(r)||hl(r)}else if(Ig(n))i=()=>be(n.useValue);else if(XE(n))i=()=>n.useFactory(...ll(n.deps||[]));else if(JE(n))i=()=>S(be(n.useExisting));else{let r=be(n&&(n.useClass||n.provide));if(rD(n))i=()=>new r(...ll(n.deps));else return gi(r)||hl(r)}return i}function ui(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rD(n){return!!n.deps}function sD(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function oD(n){return typeof n=="function"||typeof n=="object"&&n instanceof R}function fl(n,e){for(let t of n)Array.isArray(t)?fl(t,e):t&&rg(t)?fl(t.\u0275providers,e):e(t)}function aD(){return sg()!==void 0||CE()!=null}function cD(n){return typeof n=="function"}var At=0,V=1,C=2,ye=3,Je=4,et=5,ho=6,ur=7,Xe=8,yi=9,pt=10,he=11,dr=12,Sp=13,bi=14,gt=15,Mo=16,di=17,vi=18,No=19,Dg=20,jt=21,Kc=22,En=23,bt=25,Cg=1;var Dn=7,fo=8,po=9,Ve=10,Jl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Jl||{});function vn(n){return Array.isArray(n)&&typeof n[Cg]=="object"}function Mt(n){return Array.isArray(n)&&n[Cg]===!0}function Xl(n){return(n.flags&4)!==0}function xo(n){return n.componentOffset>-1}function Ro(n){return(n.flags&1)===1}function Bt(n){return!!n.template}function lD(n){return(n[C]&512)!==0}var pl=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function bg(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function An(){return Tg}function Tg(n){return n.type.prototype.ngOnChanges&&(n.setInput=dD),uD}An.ngInherit=!0;function uD(){let n=Ag(this),e=n?.current;if(e){let t=n.previous;if(t===mi)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function dD(n,e,t,i,r){let s=this.declaredInputs[i],o=Ag(n)||hD(n,{previous:mi,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new pl(l&&l.currentValue,t,c===mi),bg(n,e,r,t)}var Sg="__ngSimpleChanges__";function Ag(n){return n[Sg]||null}function hD(n,e){return n[Sg]=e}var Ap=null;var ut=function(n,e,t){Ap?.(n,e,t)},fD="svg",pD="math",gD=!1;function mD(){return gD}function mt(n){for(;Array.isArray(n);)n=n[At];return n}function Mg(n,e){return mt(e[n])}function Ue(n,e){return mt(e[n.index])}function Ng(n,e){return n.data[e]}function Ht(n,e){let t=e[n];return vn(t)?t:t[At]}function eu(n){return(n[C]&128)===128}function _D(n){return Mt(n[ye])}function wi(n,e){return e==null?null:n[e]}function xg(n){n[di]=0}function yD(n){n[C]&1024||(n[C]|=1024,eu(n)&&hr(n))}function vD(n,e){for(;n>0;)e=e[bi],n--;return e}function tu(n){return!!(n[C]&9216||n[En]?.dirty)}function gl(n){n[pt].changeDetectionScheduler?.notify(1),tu(n)?hr(n):n[C]&64&&(mD()?(n[C]|=1024,hr(n)):n[pt].changeDetectionScheduler?.notify())}function hr(n){n[pt].changeDetectionScheduler?.notify();let e=fr(n);for(;e!==null&&!(e[C]&8192||(e[C]|=8192,!eu(e)));)e=fr(e)}function Rg(n,e){if((n[C]&256)===256)throw new U(911,!1);n[jt]===null&&(n[jt]=[]),n[jt].push(e)}function wD(n,e){if(n[jt]===null)return;let t=n[jt].indexOf(e);t!==-1&&n[jt].splice(t,1)}function fr(n){let e=n[ye];return Mt(e)?e[ye]:e}var F={lFrame:jg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ID(){return F.lFrame.elementDepthCount}function ED(){F.lFrame.elementDepthCount++}function DD(){F.lFrame.elementDepthCount--}function Pg(){return F.bindingsEnabled}function CD(){return F.skipHydrationRootTNode!==null}function bD(n){return F.skipHydrationRootTNode===n}function TD(){F.skipHydrationRootTNode=null}function ne(){return F.lFrame.lView}function Te(){return F.lFrame.tView}function H(n){return F.lFrame.contextLView=n,n[Xe]}function $(n){return F.lFrame.contextLView=null,n}function Me(){let n=kg();for(;n!==null&&n.type===64;)n=n.parent;return n}function kg(){return F.lFrame.currentTNode}function SD(){let n=F.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Mn(n,e){let t=F.lFrame;t.currentTNode=n,t.isParent=e}function nu(){return F.lFrame.isParent}function Og(){F.lFrame.isParent=!1}function AD(n){return F.lFrame.bindingIndex=n}function Po(){return F.lFrame.bindingIndex++}function MD(n){let e=F.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ND(){return F.lFrame.inI18n}function xD(n,e){let t=F.lFrame;t.bindingIndex=t.bindingRootIndex=n,ml(e)}function RD(){return F.lFrame.currentDirectiveIndex}function ml(n){F.lFrame.currentDirectiveIndex=n}function PD(n){let e=F.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Fg(n){F.lFrame.currentQueryIndex=n}function kD(n){let e=n[V];return e.type===2?e.declTNode:e.type===1?n[et]:null}function Lg(n,e,t){if(t&L.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&L.Host);)if(r=kD(s),r===null||(s=s[bi],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=F.lFrame=Vg();return i.currentTNode=e,i.lView=n,!0}function iu(n){let e=Vg(),t=n[V];F.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Vg(){let n=F.lFrame,e=n===null?null:n.child;return e===null?jg(n):e}function jg(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Bg(){let n=F.lFrame;return F.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ug=Bg;function ru(){let n=Bg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function OD(n){return(F.lFrame.contextLView=vD(n,F.lFrame.contextLView))[Xe]}function Ti(){return F.lFrame.selectedIndex}function Cn(n){F.lFrame.selectedIndex=n}function su(){let n=F.lFrame;return Ng(n.tView,n.selectedIndex)}function FD(){return F.lFrame.currentNamespace}var Hg=!0;function ko(){return Hg}function Oo(n){Hg=n}function LD(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=Tg(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Fo(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function no(n,e,t){$g(n,e,3,t)}function io(n,e,t,i){(n[C]&3)===t&&$g(n,e,t,i)}function Yc(n,e){let t=n[C];(t&3)===e&&(t&=16383,t+=1,n[C]=t)}function $g(n,e,t,i){let r=i!==void 0?n[di]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[di]+=65536),(a<s||s==-1)&&(VD(n,t,e,c),n[di]=(n[di]&4294901760)+c+2),c++}function Mp(n,e){ut(4,n,e);let t=G(null);try{e.call(n)}finally{G(t),ut(5,n,e)}}function VD(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[C]>>14<n[di]>>16&&(n[C]&3)===e&&(n[C]+=16384,Mp(a,s)):Mp(a,s)}var pi=-1,bn=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function jD(n){return n instanceof bn}function BD(n){return(n.flags&8)!==0}function UD(n){return(n.flags&16)!==0}function Wg(n){return n!==pi}function go(n){return n&32767}function HD(n){return n>>16}function mo(n,e){let t=HD(n),i=e;for(;t>0;)i=i[bi],t--;return i}var _l=!0;function Np(n){let e=_l;return _l=n,e}var $D=256,Gg=$D-1,zg=5,WD=0,dt={};function GD(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(or)&&(i=t[or]),i==null&&(i=t[or]=WD++);let r=i&Gg,s=1<<r;e.data[n+(r>>zg)]|=s}function _o(n,e){let t=qg(n,e);if(t!==-1)return t;let i=e[V];i.firstCreatePass&&(n.injectorIndex=e.length,Zc(i.data,n),Zc(e,null),Zc(i.blueprint,null));let r=ou(n,e),s=n.injectorIndex;if(Wg(r)){let o=go(r),a=mo(r,e),c=a[V].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Zc(n,e){n.push(0,0,0,0,0,0,0,0,e)}function qg(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ou(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=Jg(r),i===null)return pi;if(t++,r=r[bi],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return pi}function yl(n,e,t){GD(n,e,t)}function Kg(n,e,t){if(t&L.Optional||n!==void 0)return n;Kl(e,"NodeInjector")}function Yg(n,e,t,i){if(t&L.Optional&&i===void 0&&(i=null),!(t&(L.Self|L.Host))){let r=n[yi],s=lt(void 0);try{return r?r.get(e,i,t&L.Optional):og(e,i,t&L.Optional)}finally{lt(s)}}return Kg(i,e,t)}function Zg(n,e,t,i=L.Default,r){if(n!==null){if(e[C]&2048&&!(i&L.Self)){let o=ZD(n,e,t,i,dt);if(o!==dt)return o}let s=Qg(n,e,t,i,dt);if(s!==dt)return s}return Yg(e,t,i,r)}function Qg(n,e,t,i,r){let s=KD(t);if(typeof s=="function"){if(!Lg(e,n,i))return i&L.Host?Kg(r,t,i):Yg(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&L.Optional))Kl(t);else return o}finally{Ug()}}else if(typeof s=="number"){let o=null,a=qg(n,e),c=pi,l=i&L.Host?e[gt][et]:null;for((a===-1||i&L.SkipSelf)&&(c=a===-1?ou(n,e):e[a+8],c===pi||!Rp(i,!1)?a=-1:(o=e[V],a=go(c),e=mo(c,e)));a!==-1;){let u=e[V];if(xp(s,a,u.data)){let d=zD(a,e,t,o,i,l);if(d!==dt)return d}c=e[a+8],c!==pi&&Rp(i,e[V].data[a+8]===l)&&xp(s,a,e)?(o=u,a=go(c),e=mo(c,e)):a=-1}}return r}function zD(n,e,t,i,r,s){let o=e[V],a=o.data[n+8],c=i==null?xo(a)&&_l:i!=o&&(a.type&3)!==0,l=r&L.Host&&s===a,u=qD(a,o,t,c,l);return u!==null?Ii(e,o,u,a):dt}function qD(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let g=o[f];if(f<c&&t===g||f>=c&&g.type===t)return f}if(r){let f=o[c];if(f&&Bt(f)&&f.type===t)return c}return null}function Ii(n,e,t,i){let r=n[t],s=e.data;if(jD(r)){let o=r;o.resolving&&vE(yE(s[t]));let a=Np(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?lt(o.injectImpl):null,u=Lg(n,i,L.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&LD(t,s[t],e)}finally{l!==null&&lt(l),Np(a),o.resolving=!1,Ug()}}return r}function KD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(or)?n[or]:void 0;return typeof e=="number"?e>=0?e&Gg:YD:e}function xp(n,e,t){let i=1<<n;return!!(t[e+(n>>zg)]&i)}function Rp(n,e){return!(n&L.Self)&&!(n&L.Host&&e)}var wn=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Zg(this._tNode,this._lView,e,To(i),t)}};function YD(){return new wn(Me(),ne())}function au(n){return _r(()=>{let e=n.prototype.constructor,t=e[oo]||vl(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[oo]||vl(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function vl(n){return tg(n)?()=>{let e=vl(be(n));return e&&e()}:gi(n)}function ZD(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[C]&2048&&!(o[C]&512);){let a=Qg(s,o,t,i|L.Self,dt);if(a!==dt)return a;let c=s.parent;if(!c){let l=o[Dg];if(l){let u=l.get(t,dt,i);if(u!==dt)return u}c=Jg(o),o=o[bi]}s=c}return r}function Jg(n){let e=n[V],t=e.type;return t===2?e.declTNode:t===1?n[et]:null}function Pp(n,e=null,t=null,i){let r=QD(n,e,t,i);return r.resolveInjectorInitializers(),r}function QD(n,e=null,t=null,i,r=new Set){let s=[t||Le,ZE(n)];return i=i||(typeof n=="object"?void 0:Pe(n)),new uo(s,e||Ao(),i||null,r)}var Lo=(()=>{class n{static{this.THROW_IF_NOT_FOUND=ar}static{this.NULL=new lo}static create(t,i){if(Array.isArray(t))return Pp({name:""},i,t,"");{let r=t.name??"";return Pp({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>S(ug)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var JD="ngOriginalError";function Qc(n){return n[JD]}var Tt=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Qc(e);for(;t&&Qc(t);)t=Qc(t);return t||null}},Xg=new R("",{providedIn:"root",factory:()=>ie(Tt).handleError.bind(void 0)}),em=(()=>{class n{static{this.__NG_ELEMENT_ID__=XD}static{this.__NG_ENV_ID__=t=>t}}return n})(),wl=class extends em{constructor(e){super(),this._lView=e}onDestroy(e){return Rg(this._lView,e),()=>wD(this._lView,e)}};function XD(){return new wl(ne())}function eC(){return Vo(Me(),ne())}function Vo(n,e){return new ke(Ue(n,e))}var ke=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=eC}}return n})();var Il=class extends j{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,aD()&&(this.destroyRef=ie(em,{optional:!0})??void 0)}emit(e){let t=G(null);try{super.next(e)}finally{G(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Jc(s),r&&(r=Jc(r)),o&&(o=Jc(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof ee&&e.add(a),a}};function Jc(n){return e=>{setTimeout(n,void 0,e)}}var ue=Il;function tm(n){return(n.flags&128)===128}var nm=new Map,tC=0;function nC(){return tC++}function iC(n){nm.set(n[No],n)}function rC(n){nm.delete(n[No])}var kp="__ngContext__";function Ut(n,e){vn(e)?(n[kp]=e[No],iC(e)):n[kp]=e}function im(n){return sm(n[dr])}function rm(n){return sm(n[Je])}function sm(n){for(;n!==null&&!Mt(n);)n=n[Je];return n}var El;function om(n){El=n}function sC(){if(El!==void 0)return El;if(typeof document<"u")return document;throw new U(210,!1)}var cu=new R("",{providedIn:"root",factory:()=>oC}),oC="ng",lu=new R(""),$t=new R("",{providedIn:"platform",factory:()=>"unknown"});var uu=new R("",{providedIn:"root",factory:()=>sC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var aC="h",cC="b";var lC=()=>null;function du(n,e,t=!1){return lC(n,e,t)}var am=!1,uC=new R("",{providedIn:"root",factory:()=>am});var Dl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lE})`}};function hu(n){return n instanceof Dl?n.changingThisBreaksApplicationSecurity:n}var dC=/^>|^->|<!--|-->|--!>|<!-$/g,hC=/(<|>)/g,fC="\u200B$1\u200B";function pC(n){return n.replace(dC,e=>e.replace(hC,fC))}var St=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(St||{}),gC;function fu(n,e){return gC(n,e)}function hi(n,e,t,i,r){if(i!=null){let s,o=!1;Mt(i)?s=i:vn(i)&&(o=!0,i=i[At]);let a=mt(i);n===0&&t!==null?r==null?hm(e,t,a):yo(e,t,a,r||null,!0):n===1&&t!==null?yo(e,t,a,r||null,!0):n===2?PC(e,a,o):n===3&&e.destroyNode(a),s!=null&&OC(e,n,s,t,r)}}function mC(n,e){return n.createText(e)}function _C(n,e,t){n.setValue(e,t)}function yC(n,e){return n.createComment(pC(e))}function cm(n,e,t){return n.createElement(e,t)}function vC(n,e){lm(n,e),e[At]=null,e[et]=null}function wC(n,e,t,i,r,s){i[At]=r,i[et]=e,Bo(n,i,t,1,r,s)}function lm(n,e){e[pt].changeDetectionScheduler?.notify(1),Bo(n,e,e[he],2,null,null)}function IC(n){let e=n[dr];if(!e)return Xc(n[V],n);for(;e;){let t=null;if(vn(e))t=e[dr];else{let i=e[Ve];i&&(t=i)}if(!t){for(;e&&!e[Je]&&e!==n;)vn(e)&&Xc(e[V],e),e=e[ye];e===null&&(e=n),vn(e)&&Xc(e[V],e),t=e&&e[Je]}e=t}}function EC(n,e,t,i){let r=Ve+i,s=t.length;i>0&&(t[r-1][Je]=e),i<s-Ve?(e[Je]=t[r],lg(t,Ve+i,e)):(t.push(e),e[Je]=null),e[ye]=t;let o=e[Mo];o!==null&&t!==o&&DC(o,e);let a=e[vi];a!==null&&a.insertView(n),gl(e),e[C]|=128}function DC(n,e){let t=n[po],r=e[ye][ye][gt];e[gt]!==r&&(n[C]|=Jl.HasTransplantedViews),t===null?n[po]=[e]:t.push(e)}function um(n,e){let t=n[po],i=t.indexOf(e);t.splice(i,1)}function Cl(n,e){if(n.length<=Ve)return;let t=Ve+e,i=n[t];if(i){let r=i[Mo];r!==null&&r!==n&&um(r,i),e>0&&(n[t-1][Je]=i[Je]);let s=co(n,Ve+e);vC(i[V],i);let o=s[vi];o!==null&&o.detachView(s[V]),i[ye]=null,i[Je]=null,i[C]&=-129}return i}function dm(n,e){if(!(e[C]&256)){let t=e[he];t.destroyNode&&Bo(n,e,t,3,null,null),IC(e)}}function Xc(n,e){if(e[C]&256)return;let t=G(null);try{e[C]&=-129,e[C]|=256,e[En]&&Bf(e[En]),bC(n,e),CC(n,e),e[V].type===1&&e[he].destroy();let i=e[Mo];if(i!==null&&Mt(e[ye])){i!==e[ye]&&um(i,e);let r=e[vi];r!==null&&r.detachView(n)}rC(e)}finally{G(t)}}function CC(n,e){let t=n.cleanup,i=e[ur];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[t[s+1]];t[s].call(o)}i!==null&&(e[ur]=null);let r=e[jt];if(r!==null){e[jt]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function bC(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof bn)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];ut(4,a,c);try{c.call(a)}finally{ut(5,a,c)}}else{ut(4,r,s);try{s.call(r)}finally{ut(5,r,s)}}}}}function TC(n,e,t){return SC(n,e.parent,t)}function SC(n,e,t){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return t[At];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=n.data[i.directiveStart+r];if(s===ht.None||s===ht.Emulated)return null}return Ue(i,t)}}function yo(n,e,t,i,r){n.insertBefore(e,t,i,r)}function hm(n,e,t){n.appendChild(e,t)}function Op(n,e,t,i,r){i!==null?yo(n,e,t,i,r):hm(n,e,t)}function AC(n,e,t,i){n.removeChild(e,t,i)}function pu(n,e){return n.parentNode(e)}function MC(n,e){return n.nextSibling(e)}function NC(n,e,t){return RC(n,e,t)}function xC(n,e,t){return n.type&40?Ue(n,t):null}var RC=xC,Fp;function jo(n,e,t,i){let r=TC(n,i,e),s=e[he],o=i.parent||e[et],a=NC(o,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Op(s,r,t[c],a,!1);else Op(s,r,t,a,!1);Fp!==void 0&&Fp(s,i,e,t,r)}function ro(n,e){if(e!==null){let t=e.type;if(t&3)return Ue(e,n);if(t&4)return bl(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return ro(n,i);{let r=n[e.index];return Mt(r)?bl(-1,r):mt(r)}}else{if(t&32)return fu(e,n)()||mt(n[e.index]);{let i=fm(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=fr(n[gt]);return ro(r,i)}else return ro(n,e.next)}}}return null}function fm(n,e){if(e!==null){let i=n[gt][et],r=e.projection;return i.projection[r]}return null}function bl(n,e){let t=Ve+n+1;if(t<e.length){let i=e[t],r=i[V].firstChild;if(r!==null)return ro(i,r)}return e[Dn]}function PC(n,e,t){let i=pu(n,e);i&&AC(n,i,e,t)}function gu(n,e,t,i,r,s,o){for(;t!=null;){let a=i[t.index],c=t.type;if(o&&e===0&&(a&&Ut(mt(a),i),t.flags|=2),(t.flags&32)!==32)if(c&8)gu(n,e,t.child,i,r,s,!1),hi(e,n,r,a,s);else if(c&32){let l=fu(t,i),u;for(;u=l();)hi(e,n,r,u,s);hi(e,n,r,a,s)}else c&16?kC(n,e,i,t,r,s):hi(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Bo(n,e,t,i,r,s){gu(t,i,n.firstChild,e,r,s,!1)}function kC(n,e,t,i,r,s){let o=t[gt],c=o[et].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];hi(e,n,r,u,s)}else{let l=c,u=o[ye];tm(i)&&(l.flags|=128),gu(n,e,l,u,r,s,!0)}}function OC(n,e,t,i,r){let s=t[Dn],o=mt(t);s!==o&&hi(e,n,i,s,r);for(let a=Ve;a<t.length;a++){let c=t[a];Bo(c[V],c,n,e,i,s)}}function FC(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:St.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=St.Important),n.setStyle(t,i,r,s))}}function LC(n,e,t){n.setAttribute(e,"style",t)}function pm(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function gm(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&ul(n,e,i),r!==null&&pm(n,e,r),s!==null&&LC(n,e,s)}var Si={};function b(n=1){mm(Te(),ne(),Ti()+n,!1)}function mm(n,e,t,i){if(!i)if((e[C]&3)===3){let s=n.preOrderCheckHooks;s!==null&&no(e,s,t)}else{let s=n.preOrderHooks;s!==null&&io(e,s,0,t)}Cn(t)}function M(n,e=L.Default){let t=ne();if(t===null)return S(n,e);let i=Me();return Zg(i,t,be(n),e)}function _m(n,e,t,i,r,s){let o=G(null);try{let a=null;r&B.SignalBased&&(a=e[i][Ac]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&B.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,i):bg(e,a,i,s)}finally{G(o)}}function VC(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Cn(~r);else{let s=r,o=t[++i],a=t[++i];xD(o,s);let c=e[s];a(2,c)}}}finally{Cn(-1)}}function Uo(n,e,t,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[At]=r,d[C]=i|4|128|8|64,(l!==null||n&&n[C]&2048)&&(d[C]|=2048),xg(d),d[ye]=d[bi]=n,d[Xe]=t,d[pt]=o||n&&n[pt],d[he]=a||n&&n[he],d[yi]=c||n&&n[yi]||null,d[et]=s,d[No]=nC(),d[ho]=u,d[Dg]=l,d[gt]=e.type==2?n[gt]:d,d}function wr(n,e,t,i,r){let s=n.data[e];if(s===null)s=jC(n,e,t,i,r),ND()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=SD();s.injectorIndex=o===null?-1:o.injectorIndex}return Mn(s,!0),s}function jC(n,e,t,i,r){let s=kg(),o=nu(),a=o?s:s&&s.parent,c=n.data[e]=WC(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function ym(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function vm(n,e,t,i,r){let s=Ti(),o=i&2;try{Cn(-1),o&&e.length>bt&&mm(n,e,bt,!1),ut(o?2:0,r),t(i,r)}finally{Cn(s),ut(o?3:1,r)}}function mu(n,e,t){if(Xl(e)){let i=G(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{G(i)}}}function _u(n,e,t){Pg()&&(ZC(n,e,t,Ue(t,e)),(t.flags&64)===64&&Dm(n,e,t))}function yu(n,e,t=Ue){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function wm(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=vu(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function vu(n,e,t,i,r,s,o,a,c,l,u){let d=bt+i,h=d+r,f=BC(d,h),g=typeof l=="function"?l():l;return f[V]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function BC(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Si);return t}function UC(n,e,t,i){let s=i.get(uC,am)||t===ht.ShadowDom,o=n.selectRootElement(e,s);return HC(o),o}function HC(n){$C(n)}var $C=()=>null;function WC(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return CD()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Lp(n,e,t,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,c=B.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(r!==null){if(!r.hasOwnProperty(s))continue;l=r[s]}n===0?Vp(i,t,l,a,c):Vp(i,t,l,a)}return i}function Vp(n,e,t,i,r){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],r!==void 0&&s.push(r)}function GC(n,e,t){let i=e.directiveStart,r=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=s[u],h=t?t.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=Lp(0,d.inputs,u,c,f),l=Lp(1,d.outputs,u,l,g);let _=c!==null&&o!==null&&!Zl(e)?ab(c,u,o):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function zC(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Im(n,e,t,i,r,s,o,a){let c=Ue(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(Iu(n,t,u,i,r),xo(e)&&qC(t,e.index)):e.type&3?(i=zC(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(c,i,r)):e.type&12}function qC(n,e){let t=Ht(e,n);t[C]&16||(t[C]|=64)}function wu(n,e,t,i){if(Pg()){let r=i===null?null:{"":-1},s=JC(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Em(n,e,t,o,r,a),r&&XC(t,i,r)}t.mergedAttrs=lr(t.mergedAttrs,t.attrs)}function Em(n,e,t,i,r,s){for(let l=0;l<i.length;l++)yl(_o(t,e),n,i[l].type);tb(t,n.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=ym(n,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];t.mergedAttrs=lr(t.mergedAttrs,u.hostAttrs),nb(n,t,e,c,u),eb(c,u,r),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}GC(n,t,s)}function KC(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;YC(o)!=a&&o.push(a),o.push(t,i,s)}}function YC(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ZC(n,e,t,i){let r=t.directiveStart,s=t.directiveEnd;xo(t)&&ib(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||_o(t,e),Ut(i,e);let o=t.initialInputs;for(let a=r;a<s;a++){let c=n.data[a],l=Ii(e,n,a,t);if(Ut(l,e),o!==null&&ob(e,a-r,l,c,t,o),Bt(c)){let u=Ht(t.index,e);u[Xe]=Ii(e,n,a,t)}}}function Dm(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=RD();try{Cn(s);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];ml(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&QC(c,l)}}finally{Cn(-1),ml(o)}}function QC(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function JC(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(BE(e,o.selectors,!1))if(i||(i=[]),Bt(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let c=a.length;Tl(n,e,c)}else i.unshift(o),Tl(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function Tl(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function XC(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new U(-301,!1);i.push(e[r],s)}}}function eb(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Bt(e)&&(t[""]=n)}}function tb(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function nb(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=gi(r.type,!0)),o=new bn(s,Bt(r),M);n.blueprint[i]=o,t[i]=o,KC(n,e,i,ym(n,t,r.hostVars,Si),r)}function ib(n,e,t){let i=Ue(e,n),r=wm(t),s=n[pt].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Ho(n,Uo(n,r,null,o,i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=a}function rb(n,e,t,i,r,s){let o=Ue(n,e);sb(e[he],o,s,n.value,t,i,r)}function sb(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?ql(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function ob(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];_m(i,t,c,l,u,d)}}function ab(n,e,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],t[r+1]);break}}r+=2}return i}function Cm(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function bm(n,e){let t=n.contentQueries;if(t!==null){let i=G(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];Fg(s),a.contentQueries(2,e[o],o)}}}finally{G(i)}}}function Ho(n,e){return n[dr]?n[Sp][Je]=e:n[dr]=e,n[Sp]=e,e}function Sl(n,e,t){Fg(0);let i=G(null);try{e(n,t)}finally{G(i)}}function cb(n){return n[ur]||(n[ur]=[])}function lb(n){return n.cleanup||(n.cleanup=[])}function Tm(n,e){let t=n[yi],i=t?t.get(Tt,null):null;i&&i.handleError(e)}function Iu(n,e,t,i,r){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];_m(u,l,i,a,c,r)}}function ub(n,e,t){let i=Mg(e,n);_C(n[he],i,t)}function db(n,e){let t=Ht(e,n),i=t[V];hb(i,t);let r=t[At];r!==null&&t[ho]===null&&(t[ho]=du(r,t[yi])),Eu(i,t,t[Xe])}function hb(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Eu(n,e,t){iu(e);try{let i=n.viewQuery;i!==null&&Sl(1,i,t);let r=n.template;r!==null&&vm(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[vi]?.finishViewCreation(n),n.staticContentQueries&&bm(n,e),n.staticViewQueries&&Sl(2,n.viewQuery,t);let s=n.components;s!==null&&fb(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[C]&=-5,ru()}}function fb(n,e){for(let t=0;t<e.length;t++)db(n,e[t])}function pb(n,e,t,i){let r=G(null);try{let s=e.tView,a=n[C]&4096?4096:16,c=Uo(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[Mo]=l;let u=n[vi];return u!==null&&(c[vi]=u.createEmbeddedView(s)),Eu(s,c,t),c}finally{G(r)}}function jp(n,e){return!e||e.firstChild===null||tm(n)}function gb(n,e,t,i=!0){let r=e[V];if(EC(r,e,n,t),i){let o=bl(t,n),a=e[he],c=pu(a,n[Dn]);c!==null&&wC(r,n[et],a,e,c,o)}let s=e[ho];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function vo(n,e,t,i,r=!1){for(;t!==null;){let s=e[t.index];s!==null&&i.push(mt(s)),Mt(s)&&mb(s,i);let o=t.type;if(o&8)vo(n,e,t.child,i);else if(o&32){let a=fu(t,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=fm(e,t);if(Array.isArray(a))i.push(...a);else{let c=fr(e[gt]);vo(c[V],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function mb(n,e){for(let t=Ve;t<n.length;t++){let i=n[t],r=i[V].firstChild;r!==null&&vo(i[V],i,r,e)}n[Dn]!==n[At]&&e.push(n[Dn])}var Sm=[];function _b(n){return n[En]??yb(n)}function yb(n){let e=Sm.pop()??Object.create(wb);return e.lView=n,e}function vb(n){n.lView[En]!==n&&(n.lView=null,Sm.push(n))}var wb=Y(E({},Lf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{hr(n.lView)},consumerOnSignalRead(){this.lView[En]=this}}),Am=100;function Mm(n,e=!0,t=0){let i=n[pt],r=i.rendererFactory,s=!1;s||r.begin?.();try{Ib(n,t)}catch(o){throw e&&Tm(n,o),o}finally{s||(r.end?.(),i.inlineEffectRunner?.flush())}}function Ib(n,e){Al(n,e);let t=0;for(;tu(n);){if(t===Am)throw new U(103,!1);t++,Al(n,1)}}function Eb(n,e,t,i){let r=e[C];if((r&256)===256)return;let s=!1;!s&&e[pt].inlineEffectRunner?.flush(),iu(e);let o=null,a=null;!s&&Db(n)&&(a=_b(e),o=Vf(a));try{xg(e),AD(n.bindingStartIndex),t!==null&&vm(n,e,t,2,i);let c=(r&3)===3;if(!s)if(c){let d=n.preOrderCheckHooks;d!==null&&no(e,d,null)}else{let d=n.preOrderHooks;d!==null&&io(e,d,0,null),Yc(e,0)}if(Cb(e),Nm(e,0),n.contentQueries!==null&&bm(n,e),!s)if(c){let d=n.contentCheckHooks;d!==null&&no(e,d)}else{let d=n.contentHooks;d!==null&&io(e,d,1),Yc(e,1)}VC(n,e);let l=n.components;l!==null&&Rm(e,l,0);let u=n.viewQuery;if(u!==null&&Sl(2,u,i),!s)if(c){let d=n.viewCheckHooks;d!==null&&no(e,d)}else{let d=n.viewHooks;d!==null&&io(e,d,2),Yc(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Kc]){for(let d of e[Kc])d();e[Kc]=null}s||(e[C]&=-73)}catch(c){throw hr(e),c}finally{a!==null&&(jf(a,o),vb(a)),ru()}}function Db(n){return n.type!==2}function Nm(n,e){for(let t=im(n);t!==null;t=rm(t))for(let i=Ve;i<t.length;i++){let r=t[i];xm(r,e)}}function Cb(n){for(let e=im(n);e!==null;e=rm(e)){if(!(e[C]&Jl.HasTransplantedViews))continue;let t=e[po];for(let i=0;i<t.length;i++){let r=t[i],s=r[ye];yD(r)}}}function bb(n,e,t){let i=Ht(e,n);xm(i,t)}function xm(n,e){eu(n)&&Al(n,e)}function Al(n,e){let i=n[V],r=n[C],s=n[En],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&Mc(s)),s&&(s.dirty=!1),n[C]&=-9217,o)Eb(i,n,i.template,n[Xe]);else if(r&8192){Nm(n,1);let a=i.components;a!==null&&Rm(n,a,1)}}function Rm(n,e,t){for(let i=0;i<e.length;i++)bb(n,e[i],t)}function Du(n){for(n[pt].changeDetectionScheduler?.notify();n;){n[C]|=64;let e=fr(n);if(lD(n)&&!e)return n;n=e}return null}var Tn=class{get rootNodes(){let e=this._lView,t=e[V];return vo(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xe]}set context(e){this._lView[Xe]=e}get destroyed(){return(this._lView[C]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ye];if(Mt(e)){let t=e[fo],i=t?t.indexOf(this):-1;i>-1&&(Cl(e,i),co(t,i))}this._attachedToViewContainer=!1}dm(this._lView[V],this._lView)}onDestroy(e){Rg(this._lView,e)}markForCheck(){Du(this._cdRefInjectingView||this._lView)}detach(){this._lView[C]&=-129}reattach(){gl(this._lView),this._lView[C]|=128}detectChanges(){this._lView[C]|=1024,Mm(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,lm(this._lView[V],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e,gl(this._lView)}},Ai=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ab}}return n})(),Tb=Ai,Sb=class extends Tb{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=pb(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Tn(r)}};function Ab(){return Mb(Me(),ne())}function Mb(n,e){return n.type&4?new Sb(e,n,Vo(n,e)):null}var qL=new RegExp(`^(\\d+)*(${cC}|${aC})*(.*)`);var Nb=()=>null;function Bp(n,e){return Nb(n,e)}var Ml=class{},Nl=class{},wo=class{};function xb(n){let e=Error(`No component factory found for ${Pe(n)}.`);return e[Rb]=n,e}var Rb="ngComponent";var xl=class{resolveComponentFactory(e){throw xb(e)}},Cu=(()=>{class n{static{this.NULL=new xl}}return n})(),pr=class{},Ir=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Pb()}}return n})();function Pb(){let n=ne(),e=Me(),t=Ht(e.index,n);return(vn(t)?t:n)[he]}var kb=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})(),el={};var Up=new Set;function Pm(n){Up.has(n)||(Up.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Hp(...n){}function Ob(){let n=typeof sr.requestAnimationFrame=="function",e=sr[n?"requestAnimationFrame":"setTimeout"],t=sr[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var se=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ue(!1),this.onMicrotaskEmpty=new ue(!1),this.onStable=new ue(!1),this.onError=new ue(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=Ob().nativeRequestAnimationFrame,Vb(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Fb,Hp,Hp);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},Fb={};function bu(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Lb(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(sr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Rl(n),n.isCheckStableRunning=!0,bu(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Rl(n))}function Vb(n){let e=()=>{Lb(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(jb(a))return t.invokeTask(r,s,o,a);try{return $p(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Wp(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return $p(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),Wp(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Rl(n),bu(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Rl(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function $p(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Wp(n){n._nesting--,bu(n)}function jb(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var km=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of t)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Io(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=_p(r,a);else if(s==2){let c=a,l=e[++o];i=_p(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var Pl=class extends Cu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=In(e);return new gr(t,this.ngModule)}};function Gp(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let i=n[t];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:t})}return e}function Bb(n){let e=n.toLowerCase();return e==="svg"?fD:e==="math"?pD:null}var kl=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=To(i);let r=this.injector.get(e,el,i);return r!==el||t===el?r:this.parentInjector.get(e,t,i)}},gr=class extends wo{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=Gp(e.inputs);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return Gp(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=WE(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=G(null);try{r=r||this.ngModule;let o=r instanceof ft?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new kl(e,o):e,c=a.get(pr,null);if(c===null)throw new U(407,!1);let l=a.get(kb,null),u=a.get(km,null),d=a.get(Ml,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",_=i?UC(f,i,this.componentDef.encapsulation,a):cm(f,g,Bb(g)),I=512;this.componentDef.signals?I|=4096:this.componentDef.onPush||(I|=16);let x=null;_!==null&&(x=du(_,a,!0));let ae=vu(0,null,null,1,0,null,null,null,null,null,null),J=Uo(null,ae,null,I,null,null,h,f,a,null,x);iu(J);let _e,Qn;try{let Ke=this.componentDef,Jn,Tc=null;Ke.findHostDirectiveDefs?(Jn=[],Tc=new Map,Ke.findHostDirectiveDefs(Ke,Jn,Tc),Jn.push(Ke)):Jn=[Ke];let TI=Ub(J,_),SI=Hb(TI,_,Ke,Jn,J,h,f);Qn=Ng(ae,bt),_&&Gb(f,Ke,_,i),t!==void 0&&zb(Qn,this.ngContentSelectors,t),_e=Wb(SI,Ke,Jn,Tc,J,[qb]),Eu(ae,J,null)}finally{ru()}return new Ol(this.componentType,_e,Vo(Qn,J),J,Qn)}finally{G(s)}}},Ol=class extends Nl{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Tn(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Iu(s[V],s,r,e,t),this.previousInputValues.set(e,t);let o=Ht(this._tNode.index,s);Du(o)}}get injector(){return new wn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Ub(n,e){let t=n[V],i=bt;return n[i]=e,wr(t,i,2,"#host",null)}function Hb(n,e,t,i,r,s,o){let a=r[V];$b(i,n,e,o);let c=null;e!==null&&(c=du(e,r[yi]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=Uo(r,wm(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Tl(a,n,i.length-1),Ho(r,d),r[n.index]=d}function $b(n,e,t,i){for(let r of n)e.mergedAttrs=lr(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Io(e,e.mergedAttrs,!0),t!==null&&gm(i,t,e))}function Wb(n,e,t,i,r,s){let o=Me(),a=r[V],c=Ue(o,r);Em(a,r,o,t,null,i);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,h=Ii(r,a,d,o);Ut(h,r)}Dm(a,r,o),c&&Ut(c,r);let l=Ii(r,a,o.directiveStart+o.componentOffset,o);if(n[Xe]=r[Xe]=l,s!==null)for(let u of s)u(l,e);return mu(a,o,r),l}function Gb(n,e,t,i){if(i)ul(n,t,["ng-version","17.3.12"]);else{let{attrs:r,classes:s}=GE(e.selectors[0]);r&&ul(n,t,r),s&&s.length>0&&pm(n,t,s.join(" "))}}function zb(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null?Array.from(s):null)}}function qb(){let n=Me();Fo(ne()[V],n)}var Nn=(()=>{class n{static{this.__NG_ELEMENT_ID__=Kb}}return n})();function Kb(){let n=Me();return Zb(n,ne())}var Yb=Nn,Om=class extends Yb{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Vo(this._hostTNode,this._hostLView)}get injector(){return new wn(this._hostTNode,this._hostLView)}get parentInjector(){let e=ou(this._hostTNode,this._hostLView);if(Wg(e)){let t=mo(e,this._hostLView),i=go(e),r=t[V].data[i+8];return new wn(r,t)}else return new wn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=zp(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ve}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=Bp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,jp(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!cD(e),a;if(o)a=t;else{let g=t||{};a=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new gr(In(e)),l=i||this.parentInjector;if(!s&&c.ngModule==null){let _=(o?l:this.parentInjector).get(ft,null);_&&(s=_)}let u=In(c.componentType??{}),d=Bp(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,s);return this.insertImpl(f.hostView,a,jp(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(_D(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[ye],l=new Om(c,c[et],c[ye]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return gb(o,r,s,i),e.attachToViewContainerRef(),lg(tl(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=zp(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Cl(this._lContainer,t);i&&(co(tl(this._lContainer),t),dm(i[V],i))}detach(e){let t=this._adjustIndex(e,-1),i=Cl(this._lContainer,t);return i&&co(tl(this._lContainer),t)!=null?new Tn(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function zp(n){return n[fo]}function tl(n){return n[fo]||(n[fo]=[])}function Zb(n,e){let t,i=e[n.index];return Mt(i)?t=i:(t=Cm(i,e,null,n),e[n.index]=t,Ho(e,t)),Jb(t,e,n,i),new Om(t,n,e)}function Qb(n,e){let t=n[he],i=t.createComment(""),r=Ue(e,n),s=pu(t,r);return yo(t,s,i,MC(t,r),!1),i}var Jb=tT,Xb=()=>!1;function eT(n,e,t){return Xb(n,e,t)}function tT(n,e,t,i){if(n[Dn])return;let r;t.type&8?r=mt(i):r=Qb(e,t),n[Dn]=r}function nT(n){return typeof n=="function"&&n[Ac]!==void 0}function Fm(n){return nT(n)&&typeof n.set=="function"}function iT(n){return Object.getPrototypeOf(n.prototype).constructor}function Wt(n){let e=iT(n.type),t=!0,i=[n];for(;e;){let r;if(Bt(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=Xs(n.inputs),o.inputTransforms=Xs(n.inputTransforms),o.declaredInputs=Xs(n.declaredInputs),o.outputs=Xs(n.outputs);let a=r.hostBindings;a&&cT(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&oT(n,c),l&&aT(n,l),rT(n,r),dE(n.outputs,r.outputs),Bt(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Wt&&(t=!1)}}e=Object.getPrototypeOf(e)}sT(i)}function rT(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function sT(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=lr(r.hostAttrs,t=lr(t,r.hostAttrs))}}function Xs(n){return n===mi?{}:n===Le?[]:n}function oT(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function aT(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function cT(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Mi(n){let e=n.inputConfig,t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(t[i]=r[3])}n.inputTransforms=t}var Ei=class{};var Eo=class extends Ei{constructor(e){super(),this.componentFactoryResolver=new Pl(this),this.instance=null;let t=new uo([...e.providers,{provide:Ei,useValue:this},{provide:Cu,useValue:this.componentFactoryResolver}],e.parent||Ao(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function lT(n,e,t=null){return new Eo({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Lm=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new mn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Vm(n){return dT(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function uT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function dT(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Er(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function hT(n){return(n.flags&32)===32}function fT(n,e,t,i,r,s,o,a,c){let l=e.consts,u=wr(e,n,4,o||null,wi(l,a));wu(e,t,u,wi(l,c)),Fo(e,u);let d=u.tView=vu(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function He(n,e,t,i,r,s,o,a){let c=ne(),l=Te(),u=n+bt,d=l.firstCreatePass?fT(u,l,c,e,t,i,r,s,o):l.data[u];Mn(d,!1);let h=pT(l,c,d,n);ko()&&jo(l,c,h,d),Ut(h,c);let f=Cm(h,c,h,d);return c[u]=f,Ho(c,f),eT(f,d,c),Ro(d)&&_u(l,c,d),o!=null&&yu(c,d,a),He}var pT=gT;function gT(n,e,t,i){return Oo(!0),e[he].createComment("")}function xn(n,e,t,i){let r=ne(),s=Po();if(Er(r,s,e)){let o=Te(),a=su();rb(a,r,n,e,t,i)}return xn}function mT(n,e,t,i){return Er(n,Po(),t)?e+ql(t)+i:Si}function eo(n,e){return n<<17|e<<2}function Sn(n){return n>>17&32767}function _T(n){return(n&2)==2}function yT(n,e){return n&131071|e<<17}function Fl(n){return n|2}function Di(n){return(n&131068)>>2}function nl(n,e){return n&-131069|e<<2}function vT(n){return(n&1)===1}function Ll(n){return n|1}function wT(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Sn(o),c=Di(o);n[i]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||yr(d,u)>0)&&(l=!0)}else u=t;if(r)if(c!==0){let h=Sn(n[a+1]);n[i+1]=eo(h,a),h!==0&&(n[h+1]=nl(n[h+1],i)),n[a+1]=yT(n[a+1],i)}else n[i+1]=eo(a,0),a!==0&&(n[a+1]=nl(n[a+1],i)),a=i;else n[i+1]=eo(c,0),a===0?a=i:n[c+1]=nl(n[c+1],i),c=i;l&&(n[i+1]=Fl(n[i+1])),qp(n,u,i,!0),qp(n,u,i,!1),IT(e,u,n,i,s),o=eo(a,c),s?e.classBindings=o:e.styleBindings=o}function IT(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&yr(s,e)>=0&&(t[i+1]=Ll(t[i+1]))}function qp(n,e,t,i){let r=n[t+1],s=e===null,o=i?Sn(r):Di(r),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];ET(c,e)&&(a=!0,n[o+1]=i?Ll(l):Fl(l)),o=i?Sn(l):Di(l)}a&&(n[t+1]=i?Fl(r):Ll(r))}function ET(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?yr(n,e)>=0:!1}function de(n,e,t){let i=ne(),r=Po();if(Er(i,r,e)){let s=Te(),o=su();Im(s,o,i,n,e,i[he],t,!1)}return de}function Kp(n,e,t,i,r){let s=e.inputs,o=r?"class":"style";Iu(n,t,s[o],o,i)}function $e(n,e){return DT(n,e,null,!0),$e}function DT(n,e,t,i){let r=ne(),s=Te(),o=MD(2);if(s.firstUpdatePass&&bT(s,n,o,i),e!==Si&&Er(r,o,e)){let a=s.data[Ti()];NT(s,a,r,r[he],n,r[o+1]=xT(e,t),i,o)}}function CT(n,e){return e>=n.expandoStartIndex}function bT(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[Ti()],o=CT(n,t);RT(s,i)&&e===null&&!o&&(e=!1),e=TT(r,s,e,i),wT(r,s,e,t,o,i)}}function TT(n,e,t,i){let r=PD(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=il(null,n,e,t,i),t=mr(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=il(r,n,e,t,i),s===null){let c=ST(n,e,i);c!==void 0&&Array.isArray(c)&&(c=il(null,n,e,c[1],i),c=mr(c,e.attrs,i),AT(n,e,i,c))}else s=MT(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function ST(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Di(i)!==0)return n[Sn(i)]}function AT(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Sn(r)]=i}function MT(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=mr(i,o,t)}return mr(i,e.attrs,t)}function il(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=mr(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function mr(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),xE(n,o,t?!0:e[++s]))}return n===void 0?null:n}function NT(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=vT(l)?Yp(c,e,t,r,Di(l),o):void 0;if(!Do(u)){Do(s)||_T(l)&&(s=Yp(c,null,t,r,a,o));let d=Mg(Ti(),t);FC(i,o,d,r,s)}}function Yp(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[r+1];h===Si&&(h=d?Le:void 0);let f=d?zc(h,i):u===i?h:void 0;if(l&&!Do(f)&&(f=zc(c,i)),Do(f)&&(a=f,o))return a;let g=n[r+1];r=o?Sn(g):Di(g)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=zc(c,i))}return a}function Do(n){return n!==void 0}function xT(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Pe(hu(n)))),n}function RT(n,e){return(n.flags&(e?8:16))!==0}function PT(n,e,t,i,r,s){let o=e.consts,a=wi(o,r),c=wr(e,n,2,i,a);return wu(e,t,c,wi(o,s)),c.attrs!==null&&Io(c,c.attrs,!1),c.mergedAttrs!==null&&Io(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function y(n,e,t,i){let r=ne(),s=Te(),o=bt+n,a=r[he],c=s.firstCreatePass?PT(o,s,r,e,t,i):s.data[o],l=kT(s,r,c,a,e,n);r[o]=l;let u=Ro(c);return Mn(c,!0),gm(a,l,c),!hT(c)&&ko()&&jo(s,r,l,c),ID()===0&&Ut(l,r),ED(),u&&(_u(s,r,c),mu(s,c,r)),i!==null&&yu(r,c),y}function v(){let n=Me();nu()?Og():(n=n.parent,Mn(n,!1));let e=n;bD(e)&&TD(),DD();let t=Te();return t.firstCreatePass&&(Fo(t,n),Xl(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&BD(e)&&Kp(t,e,ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&UD(e)&&Kp(t,e,ne(),e.stylesWithoutHost,!1),v}function $o(n,e,t,i){return y(n,e,t,i),v(),$o}var kT=(n,e,t,i,r,s)=>(Oo(!0),cm(i,r,FD()));function OT(n,e,t,i,r){let s=e.consts,o=wi(s,i),a=wr(e,n,8,"ng-container",o);o!==null&&Io(a,o,!0);let c=wi(s,r);return wu(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Tu(n,e,t){let i=ne(),r=Te(),s=n+bt,o=r.firstCreatePass?OT(s,r,i,e,t):r.data[s];Mn(o,!0);let a=FT(r,i,o,n);return i[s]=a,ko()&&jo(r,i,a,o),Ut(a,i),Ro(o)&&(_u(r,i,o),mu(r,o,i)),t!=null&&yu(i,o),Tu}function Su(){let n=Me(),e=Te();return nu()?Og():(n=n.parent,Mn(n,!1)),e.firstCreatePass&&(Fo(e,n),Xl(n)&&e.queries.elementEnd(n)),Su}var FT=(n,e,t,i)=>(Oo(!0),yC(e[he],""));function tt(){return ne()}var Co="en-US";var LT=Co;function VT(n){typeof n=="string"&&(LT=n.toLowerCase().replace(/_/g,"-"))}function q(n,e,t,i){let r=ne(),s=Te(),o=Me();return jm(s,r,r[he],o,n,e,i),q}function jT(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[ur],c=r[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function jm(n,e,t,i,r,s,o){let a=Ro(i),l=n.firstCreatePass&&lb(n),u=e[Xe],d=cb(e),h=!0;if(i.type&3||o){let _=Ue(i,e),I=o?o(_):_,x=d.length,ae=o?_e=>o(mt(_e[i.index])):i.index,J=null;if(!o&&a&&(J=jT(n,e,r,i.index)),J!==null){let _e=J.__ngLastListenerFn__||J;_e.__ngNextListenerFn__=s,J.__ngLastListenerFn__=s,h=!1}else{s=Qp(i,e,u,s,!1);let _e=t.listen(I,r,s);d.push(s,_e),l&&l.push(r,ae,x,x+1)}}else s=Qp(i,e,u,s,!1);let f=i.outputs,g;if(h&&f!==null&&(g=f[r])){let _=g.length;if(_)for(let I=0;I<_;I+=2){let x=g[I],ae=g[I+1],Qn=e[x][ae].subscribe(s),Ke=d.length;d.push(s,Qn),l&&l.push(r,i.index,Ke,-(Ke+1))}}}function Zp(n,e,t,i){let r=G(null);try{return ut(6,e,t),t(i)!==!1}catch(s){return Tm(n,s),!1}finally{ut(7,e,t),G(r)}}function Qp(n,e,t,i,r){return function s(o){if(o===Function)return i;let a=n.componentOffset>-1?Ht(n.index,e):e;Du(a);let c=Zp(e,t,i,o),l=s.__ngNextListenerFn__;for(;l;)c=Zp(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&o.preventDefault(),c}}function w(n=1){return OD(n)}function D(n,e=""){let t=ne(),i=Te(),r=n+bt,s=i.firstCreatePass?wr(i,r,1,e,null):i.data[r],o=BT(i,t,s,e,n);t[r]=o,ko()&&jo(i,t,o,s),Mn(s,!1)}var BT=(n,e,t,i,r)=>(Oo(!0),mC(e[he],i));function we(n){return Rn("",n,""),we}function Rn(n,e,t){let i=ne(),r=mT(i,n,e,t);return r!==Si&&ub(i,Ti(),r),Rn}function Gt(n,e,t){Fm(e)&&(e=e());let i=ne(),r=Po();if(Er(i,r,e)){let s=Te(),o=su();Im(s,o,i,n,e,i[he],t,!1)}return Gt}function Pn(n,e){let t=Fm(n);return t&&n.set(e),t}function zt(n,e){let t=ne(),i=Te(),r=Me();return jm(i,t,t[he],r,n,e),zt}function UT(n,e,t){let i=Te();if(i.firstCreatePass){let r=Bt(n);Vl(t,i.data,i.blueprint,r,!0),Vl(e,i.data,i.blueprint,r,!1)}}function Vl(n,e,t,i,r){if(n=be(n),Array.isArray(n))for(let s=0;s<n.length;s++)Vl(n[s],e,t,i,r);else{let s=Te(),o=ne(),a=Me(),c=_i(n)?n:be(n.provide),l=Eg(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(_i(n)||!n.multi){let f=new bn(l,r,M),g=sl(c,e,r?u:u+h,d);g===-1?(yl(_o(a,o),s,c),rl(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[g]=f,o[g]=f)}else{let f=sl(c,e,u+h,d),g=sl(c,e,u,u+h),_=f>=0&&t[f],I=g>=0&&t[g];if(r&&!I||!r&&!_){yl(_o(a,o),s,c);let x=WT(r?$T:HT,t.length,r,i,l);!r&&I&&(t[g].providerFactory=x),rl(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(x),o.push(x)}else{let x=Bm(t[r?g:f],l,!r&&i);rl(s,n,f>-1?f:g,x)}!r&&i&&I&&t[g].componentProviders++}}}function rl(n,e,t,i){let r=_i(e),s=eD(e);if(r||s){let c=(s?be(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function Bm(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function sl(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function HT(n,e,t,i){return jl(this.multi,[])}function $T(n,e,t,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ii(t,t[V],this.providerFactory.index,i);s=a.slice(0,o),jl(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],jl(r,s);return s}function jl(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function WT(n,e,t,i,r){let s=new bn(n,t,M);return s.multi=[],s.index=e,s.componentProviders=0,Bm(s,r,i&&!t),s}function _t(n,e=[]){return t=>{t.providersResolver=(i,r)=>UT(i,r?r(n):n,e)}}var GT=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=vg(!1,t.type),r=i.length>0?lT([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(S(ft))})}}return n})();function Dr(n){Pm("NgStandalone"),n.getStandaloneInjector=e=>e.get(GT).getOrCreateStandaloneInjector(n)}var Um=new R("");function Cr(n){return!!n&&typeof n.then=="function"}function Hm(n){return!!n&&typeof n.subscribe=="function"}var zT=new R(""),$m=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=ie(zT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=r();if(Cr(s))t.push(s);else if(Hm(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qT=new R("");function KT(){Uf(()=>{throw new U(600,!1)})}function YT(n){return n.isBoundToModule}function ZT(n,e,t){try{let i=t();return Cr(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var br=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ie(Xg),this.afterRenderEffectManager=ie(km),this.externalTestViews=new Set,this.beforeRender=new j,this.afterTick=new j,this.componentTypes=[],this.components=[],this.isStable=ie(Lm).hasPendingTasks.pipe(Ze(t=>!t)),this._injector=ie(ft)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof wo;if(!this._injector.get($m).done){let h=!r&&KE(t),f=!1;throw new U(405,f)}let o;r?o=t:o=this._injector.get(Cu).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=YT(o)?void 0:this._injector.get(Ei),c=i||o.selector,l=o.create(Lo.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Um,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),ol(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new U(101,!1);let i=G(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,G(i)}}detectChangesInAttachedViews(t){let i=0,r=this.afterRenderEffectManager;for(;;){if(i===Am)throw new U(103,!1);if(t){let s=i===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)QT(o,s,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Bl(s))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Bl(s))))break}}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;ol(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(qT,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ol(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ol(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function QT(n,e,t){!e&&!Bl(n)||JT(n,t,e)}function Bl(n){return tu(n)}function JT(n,e,t){let i;t?(i=0,n[C]|=1024):n[C]&64?i=0:i=1,Mm(n,e,i)}var XT=(()=>{class n{constructor(){this.zone=ie(se),this.applicationRef=ie(br)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eS(n){return[{provide:se,useFactory:n},{provide:cr,multi:!0,useFactory:()=>{let e=ie(XT,{optional:!0});return()=>e.initialize()}},{provide:cr,multi:!0,useFactory:()=>{let e=ie(rS);return()=>{e.initialize()}}},{provide:Xg,useFactory:tS}]}function tS(){let n=ie(se),e=ie(Tt);return t=>n.runOutsideAngular(()=>e.handleError(t))}function nS(n){let e=eS(()=>new se(iS(n)));return yg([[],e])}function iS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var rS=(()=>{class n{constructor(){this.subscription=new ee,this.initialized=!1,this.zone=ie(se),this.pendingTasks=ie(Lm)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{se.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{se.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sS(){return typeof $localize<"u"&&$localize.locale||Co}var Au=new R("",{providedIn:"root",factory:()=>ie(Au,L.Optional|L.SkipSelf)||sS()});var Wm=new R("");var so=null;function oS(n=[],e){return Lo.create({name:e,providers:[{provide:So,useValue:"platform"},{provide:Wm,useValue:new Set([()=>so=null])},...n]})}function aS(n=[]){if(so)return so;let e=oS(n);return so=e,KT(),cS(e),e}function cS(n){n.get(lu,null)?.forEach(t=>t())}var qt=(()=>{class n{static{this.__NG_ELEMENT_ID__=lS}}return n})();function lS(n){return uS(Me(),ne(),(n&16)===16)}function uS(n,e,t){if(xo(n)&&!t){let i=Ht(n.index,e);return new Tn(i,i)}else if(n.type&47){let i=e[gt];return new Tn(i,e)}return null}var Ul=class{constructor(){}supports(e){return Vm(e)}create(e){return new Hl(e)}},dS=(n,e)=>e,Hl=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||dS}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<Jp(i,r,s)?t:i,a=Jp(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let f=h<s.length?s[h]:s[h]=0,g=f+h;u<=g&&g<l&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Vm(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,uT(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new $l(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new bo),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new bo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},$l=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Wl=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},bo=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new Wl,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Jp(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function Xp(){return new Wo([new Ul])}var Wo=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:Xp})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Xp()),deps:[[n,new ME,new cg]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new U(901,!1)}}return n})();function Gm(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=aS(i),s=[nS(),...t||[]],a=new Eo({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(se);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Tt,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=r.get(Wm);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),ZT(l,c,()=>{let f=a.get($m);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(Au,Co);VT(g||Co);let _=a.get(br);return e!==void 0&&_.bootstrap(e),_})})})}catch(e){return Promise.reject(e)}}function Nt(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function zm(n,e){let t=In(n),i=e.elementInjector||Ao();return new gr(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var Zm=null;function Ni(){return Zm}function Qm(n){Zm??=n}var Go=class{};var me=new R("");function Jm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Mu=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xm=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Mu(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),qm(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);qm(s,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(M(Nn),M(Ai),M(Wo))}}static{this.\u0275dir=ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function qm(n,e){n.context.$implicit=e.item}var e_=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Nu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Km("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Km("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(M(Nn),M(Ai))}}static{this.\u0275dir=ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Nu=class{constructor(){this.$implicit=null,this.ngIf=null}};function Km(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Pe(e)}'.`)}var xu=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({})}}return n})(),Ru="browser",fS="server";function t_(n){return n===Ru}function Pu(n){return n===fS}var zo=class{};var Fu=class extends Go{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Lu=class n extends Fu{static makeCurrent(){Qm(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=mS();return t==null?null:_S(t)}resetBaseElement(){Tr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Jm(document.cookie,e)}},Tr=null;function mS(){return Tr=Tr||document.querySelector("base"),Tr?Tr.getAttribute("href"):null}function _S(n){return new URL(n,document.baseURI).pathname}var yS=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Vu=new R(""),s_=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new U(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(S(Vu),S(se))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),qo=class{constructor(e){this._doc=e}},ku="ng-app-id",o_=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Pu(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ku}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(ku),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(ku,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(S(me),S(cu),S(uu,8),S($t))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Ou={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bu=/%COMP%/g,a_="%COMP%",vS=`_nghost-${a_}`,wS=`_ngcontent-${a_}`,IS=!0,ES=new R("",{providedIn:"root",factory:()=>IS});function DS(n){return wS.replace(Bu,n)}function CS(n){return vS.replace(Bu,n)}function c_(n,e){return e.map(t=>t.replace(Bu,n))}var n_=(()=>{class n{constructor(t,i,r,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Pu(a),this.defaultRenderer=new Sr(t,o,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ht.ShadowDom&&(i=Y(E({},i),{encapsulation:ht.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Ko?r.applyToHost(t):r instanceof Ar&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case ht.Emulated:s=new Ko(c,l,i,this.appId,u,o,a,d);break;case ht.ShadowDom:return new ju(c,l,t,i,o,a,this.nonce,d);default:s=new Ar(c,l,i,u,o,a,d);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(S(s_),S(o_),S(cu),S(ES),S(me),S($t),S(se),S(uu))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Sr=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ou[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(i_(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(i_(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new U(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Ou[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Ou[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(St.DashCase|St.Important)?e.style.setProperty(t,i,r&St.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&St.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Ni().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function i_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ju=class extends Sr{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=c_(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ar=class extends Sr{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?c_(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ko=class extends Ar{constructor(e,t,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=DS(l),this.hostAttr=CS(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},bS=(()=>{class n extends qo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(S(me))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),r_=["alt","control","meta","shift"],TS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},SS={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},AS=(()=>{class n extends qo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ni().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),r_.forEach(l=>{let u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=TS[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),r_.forEach(o=>{if(o!==r){let a=SS[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(S(me))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function l_(n,e){return Gm(E({rootComponent:n},MS(e)))}function MS(n){return{appProviders:[...kS,...n?.providers??[]],platformProviders:PS}}function NS(){Lu.makeCurrent()}function xS(){return new Tt}function RS(){return om(document),document}var PS=[{provide:$t,useValue:Ru},{provide:lu,useValue:NS,multi:!0},{provide:me,useFactory:RS,deps:[]}];var kS=[{provide:So,useValue:"root"},{provide:Tt,useFactory:xS,deps:[]},{provide:Vu,useClass:bS,multi:!0,deps:[me,se,$t]},{provide:Vu,useClass:AS,multi:!0,deps:[me]},n_,o_,s_,{provide:pr,useExisting:n_},{provide:zo,useClass:yS,deps:[]},[]];var u_={providers:[]};var y_=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(M(Ir),M(ke))}}static{this.\u0275dir=ve({type:n})}}return n})(),v_=(()=>{class n extends y_{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=au(n)))(r||n)}})()}static{this.\u0275dir=ve({type:n,features:[Wt]})}}return n})(),Gu=new R("");var OS={provide:Gu,useExisting:Ci(()=>Jo),multi:!0};function FS(){let n=Ni()?Ni().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var LS=new R(""),Jo=(()=>{class n extends y_{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!FS())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(M(Ir),M(ke),M(LS,8))}}static{this.\u0275dir=ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&q("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[_t([OS]),Wt]})}}return n})();var VS=new R(""),jS=new R("");function w_(n){return n!=null}function I_(n){return Cr(n)?Ct(n):n}function E_(n){let e={};return n.forEach(t=>{e=t!=null?E(E({},e),t):e}),Object.keys(e).length===0?null:e}function D_(n,e){return e.map(t=>t(n))}function BS(n){return!n.validate}function C_(n){return n.map(e=>BS(e)?e:t=>e.validate(t))}function US(n){if(!n)return null;let e=n.filter(w_);return e.length==0?null:function(t){return E_(D_(t,e))}}function b_(n){return n!=null?US(C_(n)):null}function HS(n){if(!n)return null;let e=n.filter(w_);return e.length==0?null:function(t){let i=D_(t,e).map(I_);return Hc(i).pipe(Ze(E_))}}function T_(n){return n!=null?HS(C_(n)):null}function d_(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $S(n){return n._rawValidators}function WS(n){return n._rawAsyncValidators}function Uu(n){return n?Array.isArray(n)?n:[n]:[]}function Zo(n,e){return Array.isArray(n)?n.includes(e):n===e}function h_(n,e){let t=Uu(e);return Uu(n).forEach(r=>{Zo(t,r)||t.push(r)}),t}function f_(n,e){return Uu(e).filter(t=>!Zo(n,t))}var Qo=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=b_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=T_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Hu=class extends Qo{get formDirective(){return null}get path(){return null}},xr=class extends Qo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},$u=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},GS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},dj=Y(E({},GS),{"[class.ng-submitted]":"isSubmitted"}),S_=(()=>{class n extends $u{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(M(xr,2))}}static{this.\u0275dir=ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&$e("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Wt]})}}return n})();var Mr="VALID",Yo="INVALID",xi="PENDING",Nr="DISABLED";function zS(n){return(Xo(n)?n.validators:n)||null}function qS(n){return Array.isArray(n)?b_(n):n||null}function KS(n,e){return(Xo(e)?e.asyncValidators:n)||null}function YS(n){return Array.isArray(n)?T_(n):n||null}function Xo(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Wu=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Mr}get invalid(){return this.status===Yo}get pending(){return this.status==xi}get disabled(){return this.status===Nr}get enabled(){return this.status!==Nr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(h_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(h_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(f_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(f_(e,this._rawAsyncValidators))}hasValidator(e){return Zo(this._rawValidators,e)}hasAsyncValidator(e){return Zo(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=xi,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nr,this.errors=null,this._forEachChild(i=>{i.disable(Y(E({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Y(E({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mr,this._forEachChild(i=>{i.enable(Y(E({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Y(E({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mr||this.status===xi)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nr:Mr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=xi,this._hasOwnPendingAsyncValidator=!0;let t=I_(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ue,this.statusChanges=new ue}_calculateStatus(){return this._allControlsDisabled()?Nr:this.errors?Yo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xi)?xi:this._anyControlsHaveStatus(Yo)?Yo:Mr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xo(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=qS(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=YS(this._rawAsyncValidators)}};var A_=new R("CallSetDisabledState",{providedIn:"root",factory:()=>zu}),zu="always";function ZS(n,e){return[...e.path,n]}function QS(n,e,t=zu){XS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),e0(n,e),n0(n,e),t0(n,e),JS(n,e)}function p_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function JS(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function XS(n,e){let t=$S(n);e.validator!==null?n.setValidators(d_(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=WS(n);e.asyncValidator!==null?n.setAsyncValidators(d_(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();p_(e._rawValidators,r),p_(e._rawAsyncValidators,r)}function e0(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&M_(n,e)})}function t0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&M_(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function M_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function n0(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function i0(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function r0(n){return Object.getPrototypeOf(n.constructor)===v_}function s0(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Jo?t=s:r0(s)?i=s:r=s}),r||i||t||null}function g_(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function m_(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var o0=class extends Wu{constructor(e=null,t,i){super(zS(t),KS(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xo(t)&&(t.nonNullable||t.initialValueIsDefault)&&(m_(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){g_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){g_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){m_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var a0={provide:xr,useExisting:Ci(()=>qu)},__=Promise.resolve(),qu=(()=>{class n extends xr{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new o0,this._registered=!1,this.name="",this.update=new ue,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=s0(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),i0(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){QS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){__.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Nt(i);__.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?ZS(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(M(Hu,9),M(VS,10),M(jS,10),M(Gu,10),M(qt,8),M(A_,8))}}static{this.\u0275dir=ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[B.None,"disabled","isDisabled"],model:[B.None,"ngModel","model"],options:[B.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_t([a0]),Wt,An]})}}return n})();var c0={provide:Gu,useExisting:Ci(()=>Ku),multi:!0},Ku=(()=>{class n extends v_{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=au(n)))(r||n)}})()}static{this.\u0275dir=ve({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&q("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[_t([c0]),Wt]})}}return n})();var l0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({})}}return n})();var N_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:A_,useValue:t.callSetDisabledState??zu}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({imports:[l0]})}}return n})();function ea(n,e=0){return d0(n)?Number(n):e}function d0(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function x_(n){return Array.isArray(n)?n:[n]}function Ie(n){return n instanceof ke?n.nativeElement:n}var Zu;try{Zu=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Zu=!1}var Qu=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?t_(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Zu)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(S($t))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Rr;function h0(){if(Rr==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Rr=!0}))}finally{Rr=Rr||!1}return Rr}function Pr(n){return h0()?n:!!n.capture}var Yu;function f0(){if(Yu==null){let n=typeof document<"u"?document.head:null;Yu=!!(n&&(n.createShadowRoot||n.attachShadow))}return Yu}function Ju(n){if(f0()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function kr(n){return n.composedPath?n.composedPath()[0]:n.target}var g0=new R("cdk-dir-doc",{providedIn:"root",factory:m0});function m0(){return ie(me)}var _0=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function y0(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?_0.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Xu=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ue,t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=y0(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(S(g0,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var w0=20,R_=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new j,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=w0){return this._platform.isBrowser?new K(i=>{this._globalSubscription||this._addGlobalListener();let r=t>0?this._scrolled.pipe(Ys(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Bc()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Wc(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Ie(i),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return nr(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(S(se),S(Qu),S(me,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var I0=20,P_=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new j,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,a=-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:a}}change(t=I0){return t>0?this._change.pipe(Ys(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(S(Qu),S(se),S(me,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var k_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({})}}return n})();function O_(n){return n.buttons===0||n.detail===0}function F_(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function ad(n,e,t){for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];r?n.setProperty(i,r,t?.has(i)?"important":""):n.removeProperty(i)}return n}function Ri(n,e){let t=e?"":"none";ad(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function L_(n,e,t){ad(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function ra(n,e){return e&&e!="none"?n+" "+e:n}function V_(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=sa(e.left,e.top)}function sa(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function cd(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function td(n,e,t){let{top:i,bottom:r,left:s,right:o}=n;return t>=i&&t<=r&&e>=s&&e<=o}function Fr(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function j_(n,e,t,i){let{top:r,right:s,bottom:o,left:a,width:c,height:l}=n,u=c*e,d=l*e;return i>r-d&&i<o+d&&t>a-u&&t<s+u}var oa=class{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:cd(t)})})}handleScroll(e){let t=kr(e),i=this.positions.get(t);if(!i)return null;let r=i.scrollPosition,s,o;if(t===this._document){let l=this.getViewportScrollPosition();s=l.top,o=l.left}else s=t.scrollTop,o=t.scrollLeft;let a=r.top-s,c=r.left-o;return this.positions.forEach((l,u)=>{l.clientRect&&t!==u&&t.contains(u)&&Fr(l.clientRect,a,c)}),r.top=s,r.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function J_(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<t.length;r++)t[r].removeAttribute("id");return i==="canvas"?H_(n,e):(i==="input"||i==="select"||i==="textarea")&&U_(n,e),B_("canvas",n,e,H_),B_("input, textarea, select",n,e,U_),e}function B_(n,e,t,i){let r=e.querySelectorAll(n);if(r.length){let s=t.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}var D0=0;function U_(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${D0++}`)}function H_(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function X_(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let i=e.createElement("div");return t.forEach(r=>i.appendChild(r)),i}function $_(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function C0(n){let e=getComputedStyle(n),t=ed(e,"transition-property"),i=t.find(a=>a==="transform"||a==="all");if(!i)return 0;let r=t.indexOf(i),s=ed(e,"transition-duration"),o=ed(e,"transition-delay");return $_(s[r])+$_(o[r])}function ed(n,e){return n.getPropertyValue(e).split(",").map(i=>i.trim())}var b0=new Set(["position"]),nd=class{constructor(e,t,i,r,s,o,a,c,l){this._document=e,this._rootElement=t,this._direction=i,this._initialDomRect=r,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=l}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),"showPopover"in this._preview&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return C0(this._preview)}addEventListener(e,t){this._preview.addEventListener(e,t)}removeEventListener(e,t){this._preview.removeEventListener(e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,i=e?e.template:null,r;if(i&&e){let s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(i,e.context);o.detectChanges(),r=X_(o,this._document),this._previewEmbeddedView=o,e.matchSize?V_(r,s):r.style.transform=sa(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=J_(this._rootElement),V_(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return ad(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},b0),Ri(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>r.classList.add(s)):r.classList.add(t)),r}},W_=Pr({passive:!0}),ta=Pr({passive:!1}),G_=Pr({passive:!1,capture:!0}),T0=800,z_=new Set(["position"]),id=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>Ri(t,e)))}constructor(e,t,i,r,s,o){this._config=t,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new j,this._pointerMoveSubscription=ee.EMPTY,this._pointerUpSubscription=ee.EMPTY,this._scrollSubscription=ee.EMPTY,this._resizeSubscription=ee.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new j,this.started=new j,this.released=new j,this.ended=new j,this.entered=new j,this.exited=new j,this.dropped=new j,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{let c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){let u=Math.abs(c.x-this._pickupPositionOnPage.x),d=Math.abs(c.y-this._pickupPositionOnPage.y);if(u+d>=this._config.dragStartThreshold){let f=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),g=this._dropContainer;if(!f){this._endDragSequence(a);return}(!g||!g.isDragging()&&!g.isReceiving())&&(a.cancelable&&a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.cancelable&&a.preventDefault();let l=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(l),this._dropContainer)this._updateActiveDropContainer(l,c);else{let u=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,d=this._activeTransform;d.x=l.x-u.x+this._passiveTransform.x,d.y=l.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(d.x,d.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:l,event:a,distance:this._getDragDistance(l),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new oa(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>Ie(i)),this._handles.forEach(i=>Ri(i,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=Ie(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,ta),t.addEventListener("touchstart",this._pointerDown,W_),t.addEventListener("dragstart",this._nativeDragStart,ta)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Ie(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Ri(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Ri(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",K_,G_)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Or(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),i=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{t.addEventListener("selectstart",K_,G_)}),i){let r=this._rootElement,s=r.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(a,r),this._initialTransform=r.style.transform||"",this._preview=new nd(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(s,t)),L_(r,!1,z_),this._document.body.appendChild(s.replaceChild(o,r)),this.started.next({source:this,event:e}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let i=this.isDragging(),r=Or(t),s=!r&&t.button!==0,o=this._rootElement,a=kr(t),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+T0>Date.now(),l=r?F_(t):O_(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),i||s||c||l)return;if(this._handles.length){let h=o.style;this._rootElementTapHighlight=h.webkitTapHighlightColor||"",h.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(h=>this._updateOnScroll(h)),this._boundaryElement&&(this._boundaryRect=cd(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let d=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:d.x,y:d.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){L_(this._rootElement,!0,z_),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,i=t.getItemIndex(this),r=this._getPointerPositionOnPage(e),s=this._getDragDistance(r),o=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:e}),t.drop(this,i,this._initialIndex,this._initialContainer,o,s,r,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=o=>{(!o||kr(o)===this._preview&&o.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,t*1.5);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=X_(this._placeholderRef,this._document)):i=J_(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,t,i){let r=t===this._rootElement?null:t,s=r?r.getBoundingClientRect():e,o=Or(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,l=o.pageY-s.top-a.top;return{x:s.left-e.left+c,y:s.top-e.top+l}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),i=Or(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=i.pageX-t.left,s=i.pageY-t.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:l}=this._getPreviewRect(),u=a.top+o,d=a.bottom-(l-o),h=a.left+s,f=a.right-(c-s);i=q_(i,h,f),r=q_(r,u,d)}return{x:i,y:r}}_updatePointerDirectionDelta(e){let{x:t,y:i}=e,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Ri(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,ta),e.removeEventListener("touchstart",this._pointerDown,W_),e.removeEventListener("dragstart",this._nativeDragStart,ta)}_applyRootElementTransform(e,t){let i=sa(e,t),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=ra(i,this._initialTransform)}_applyPreviewTransform(e,t){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=sa(e,t);this._preview.setTransform(ra(r,i))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let s=r.left-i.left,o=i.right-r.right,a=r.top-i.top,c=i.bottom-r.bottom;r.width>i.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,r.height>i.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:Or(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let i=kr(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Fr(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Ju(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let i=this._previewContainer||"global";if(i==="parent")return e;if(i==="global"){let r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Ie(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}};function q_(n,e,t){return Math.max(e,Math.min(t,n))}function Or(n){return n.type[0]==="t"}function K_(n){n.preventDefault()}function aa(n,e,t){let i=Y_(e,n.length-1),r=Y_(t,n.length-1);if(i===r)return;let s=n[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)n[a]=n[a+o];n[r]=s}function Y_(n,e){return Math.max(0,Math.min(e,n))}var rd=class{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,i,r){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,i,r);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(I=>I.drag===e),l=s[o],u=s[c].clientRect,d=l.clientRect,h=c>o?1:-1,f=this._getItemOffsetPx(u,d,h),g=this._getSiblingOffsetPx(c,s,h),_=s.slice();return aa(s,c,o),s.forEach((I,x)=>{if(_[x]===I)return;let ae=I.drag===e,J=ae?f:g,_e=ae?e.getPlaceholderElement():I.drag.getRootElement();I.offset+=J,a?(_e.style.transform=ra(`translate3d(${Math.round(I.offset)}px, 0, 0)`,I.initialTransform),Fr(I.clientRect,0,J)):(_e.style.transform=ra(`translate3d(0, ${Math.round(I.offset)}px, 0)`,I.initialTransform),Fr(I.clientRect,J,0))}),this._previousSwap.overlaps=td(d,t,i),this._previousSwap.drag=l.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:c,currentIndex:o}}enter(e,t,i,r){let s=r==null||r<0?this._getItemIndexFromPointerPosition(e,t,i):r,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement(),l=o[s];if(l===e&&(l=o[s+1]),!l&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(l=o[0]),a>-1&&o.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){let u=l.getRootElement();u.parentElement.insertBefore(c,u),o.splice(s,0,e)}else Ie(this._element).appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{let t=e.getRootElement();if(t){let i=this._itemPositions.find(r=>r.drag===e)?.initialTransform;t.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:i})=>{Fr(i,e,t)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:cd(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_getItemOffsetPx(e,t,i){let r=this.orientation==="horizontal",s=r?t.left-e.left:t.top-e.top;return i===-1&&(s+=r?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,i){let r=this.orientation==="horizontal",s=t[e].clientRect,o=t[e+i*-1],a=s[r?"width":"height"]*i;if(o){let c=r?"left":"top",l=r?"right":"bottom";i===-1?a-=o.clientRect[c]-s[l]:a+=s[c]-o.clientRect[l]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let o=i[i.length-1].clientRect;return r?e>=o.right:t>=o.bottom}else{let o=i[0].clientRect;return r?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,i,r){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(r){let l=s?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&l===this._previousSwap.delta)return!1}return s?t>=Math.floor(c.left)&&t<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,e)?-1:o}},Z_=.05,ey=.05,We=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(We||{}),Se=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(Se||{}),sd=class{constructor(e,t,i,r,s){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new j,this.entered=new j,this.exited=new j,this.dropped=new j,this.sorted=new j,this.receivingStarted=new j,this.receivingStopped=new j,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=ee.EMPTY,this._verticalScrollDirection=We.NONE,this._horizontalScrollDirection=Se.NONE,this._stopScrollTimers=new j,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),$c(0,Rs).pipe(yn(this._stopScrollTimers)).subscribe(()=>{let o=this._scrollNode,a=this.autoScrollStep;this._verticalScrollDirection===We.UP?o.scrollBy(0,-a):this._verticalScrollDirection===We.DOWN&&o.scrollBy(0,a),this._horizontalScrollDirection===Se.LEFT?o.scrollBy(-a,0):this._horizontalScrollDirection===Se.RIGHT&&o.scrollBy(a,0)})},this.element=Ie(e),this._document=i,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new oa(i),this._sortStrategy=new rd(this.element,t),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,r,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(r=>r.isDragging()).every(r=>e.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){let t=Ie(this.element);return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,r){if(this.sortingDisabled||!this._domRect||!j_(this._domRect,Z_,t,i))return;let s=this._sortStrategy.sort(e,t,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,r=We.NONE,s=Se.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||j_(o.clientRect,Z_,e,t)&&([r,s]=S0(a,o.clientRect,this._sortStrategy.direction,e,t),(r||s)&&(i=a))}),!r&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};r=ty(c,t),s=ny(c,e),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=Ie(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){let e=Ie(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;let e=Ie(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return this._domRect!=null&&td(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(r=>r._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._domRect||!td(this._domRect,t,i)||!this.enterPredicate(e,this))return!1;let r=this._getShadowRoot().elementFromPoint(t,i);if(!r)return!1;let s=Ie(this.element);return r===s||s.contains(r)}_startReceiving(e,t){let i=this._activeSiblings;!i.has(e)&&t.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Ju(Ie(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function ty(n,e){let{top:t,bottom:i,height:r}=n,s=r*ey;return e>=t-s&&e<=t+s?We.UP:e>=i-s&&e<=i+s?We.DOWN:We.NONE}function ny(n,e){let{left:t,right:i,width:r}=n,s=r*ey;return e>=t-s&&e<=t+s?Se.LEFT:e>=i-s&&e<=i+s?Se.RIGHT:Se.NONE}function S0(n,e,t,i,r){let s=ty(e,r),o=ny(e,i),a=We.NONE,c=Se.NONE;if(s){let l=n.scrollTop;s===We.UP?l>0&&(a=We.UP):n.scrollHeight-l>n.clientHeight&&(a=We.DOWN)}if(o){let l=n.scrollLeft;t==="rtl"?o===Se.RIGHT?l<0&&(c=Se.RIGHT):n.scrollWidth+l>n.clientWidth&&(c=Se.LEFT):o===Se.LEFT?l>0&&(c=Se.LEFT):n.scrollWidth-l>n.clientWidth&&(c=Se.RIGHT)}return[a,c]}var na=Pr({passive:!1,capture:!0}),ia=new Set,A0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=vr({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[Dr],decls:0,vars:0,template:function(i,r){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit}}"],encapsulation:2,changeDetection:0})}}return n})(),M0=(()=>{class n{constructor(t,i){this._ngZone=t,this._appRef=ie(br),this._environmentInjector=ie(ft),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new j,this.pointerUp=new j,this.scroll=new j,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,na)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,na)}startDragging(t,i){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._loadResets(),this._activeDragInstances.push(t),this._activeDragInstances.length===1)){let r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:na}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:na}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(t){let i=this._activeDragInstances.indexOf(t);i>-1&&(this._activeDragInstances.splice(i,1),this._activeDragInstances.length===0&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){let i=[this.scroll];return t&&t!==this._document&&i.push(new K(r=>this._ngZone.runOutsideAngular(()=>{let o=a=>{this._activeDragInstances.length&&r.next(a)};return t.addEventListener("scroll",o,!0),()=>{t.removeEventListener("scroll",o,!0)}}))),ir(...i)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,i)=>{this._document.removeEventListener(i,t.handler,t.options)}),this._globalListeners.clear()}_loadResets(){if(!ia.has(this._appRef)){ia.add(this._appRef);let t=zm(A0,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{ia.delete(this._appRef),ia.size===0&&t.destroy()})}}static{this.\u0275fac=function(i){return new(i||n)(S(se),S(me))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),N0={dragStartThreshold:5,pointerDirectionChangeThreshold:5},ld=(()=>{class n{constructor(t,i,r,s){this._document=t,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(t,i=N0){return new id(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new sd(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(i){return new(i||n)(S(me),S(se),S(P_),S(M0))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),od=new R("CDK_DRAG_PARENT");var iy=new R("CdkDragHandle"),ry=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}constructor(t,i){this.element=t,this._parentDrag=i,this._stateChanges=new j,this._disabled=!1,i?._addHandle(this)}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static{this.\u0275fac=function(i){return new(i||n)(M(ke),M(od,12))}}static{this.\u0275dir=ve({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[B.HasDecoratorInputTransform,"cdkDragHandleDisabled","disabled",Nt]},standalone:!0,features:[_t([{provide:iy,useExisting:n}]),Mi]})}}return n})(),sy=new R("CDK_DRAG_CONFIG"),x0="cdk-drag",oy=new R("CdkDropList"),ay=(()=>{class n{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}constructor(t,i,r,s,o,a,c,l,u,d,h){this.element=t,this.dropContainer=i,this._ngZone=s,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=u,this._selfHandle=d,this._parentDrag=h,this._destroyed=new j,this._handles=new mn([]),this.started=new ue,this.released=new ue,this.ended=new ue,this.entered=new ue,this.exited=new ue,this.dropped=new ue,this.moved=new K(f=>{let g=this._dragRef.moved.pipe(Ze(_=>({source:this,pointerPosition:_.pointerPosition,event:_.event,delta:_.delta,distance:_.distance}))).subscribe(f);return()=>{g.unsubscribe()}}),this._dragRef=l.createDrag(t,{dragStartThreshold:a&&a.dragStartThreshold!=null?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&a.pointerDirectionChangeThreshold!=null?a.pointerDirectionChangeThreshold:5,zIndex:a?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),a&&this._assignDefaults(a),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Zs(1),yn(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){let i=t.rootElementSelector,r=t.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let i=this._handles.getValue();i.push(t),this._handles.next(i)}_removeHandle(t){let i=this._handles.getValue(),r=i.indexOf(t);r>-1&&(i.splice(r,1),this._handles.next(i))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,i=t;this.rootElementSelector&&(i=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):Ie(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let i=this._dir,r=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay=typeof r=="object"&&r?r:ea(r),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),i&&t.withDirection(i.value)}}),t.beforeStarted.pipe(Zs(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains(x0)){t.withParent(n._dragInstances.find(r=>r.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(t){t.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),t.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(t){let{lockAxis:i,dragStartDelay:r,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:l,previewContainer:u}=t;this.disabled=c??!1,this.dragStartDelay=r||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),l&&(this.rootElementSelector=l),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.pipe(Gc(t=>{let i=t.map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Qs(t=>ir(...t.map(i=>i._stateChanges.pipe(rr(i))))),yn(this._destroyed)).subscribe(t=>{let i=this._dragRef,r=t.element.nativeElement;t.disabled?i.disableHandle(r):i.enableHandle(r)})}static{this.\u0275fac=function(i){return new(i||n)(M(ke),M(oy,12),M(me),M(se),M(Nn),M(sy,8),M(Xu,8),M(ld),M(qt),M(iy,10),M(od,12))}}static{this.\u0275dir=ve({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,r){i&2&&$e("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:[B.None,"cdkDragData","data"],lockAxis:[B.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[B.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[B.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[B.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[B.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[B.HasDecoratorInputTransform,"cdkDragDisabled","disabled",Nt],constrainPosition:[B.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[B.None,"cdkDragPreviewClass","previewClass"],previewContainer:[B.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[_t([{provide:od,useExisting:n}]),Mi,An]})}}return n})(),Q_=new R("CdkDropListGroup");var R0=0,cy=(()=>{class n{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}constructor(t,i,r,s,o,a,c){this.element=t,this._changeDetectorRef=r,this._scrollDispatcher=s,this._dir=o,this._group=a,this._destroyed=new j,this.connectedTo=[],this.id=`cdk-drop-list-${R0++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new ue,this.entered=new ue,this.exited=new ue,this.sorted=new ue,this._unsortedItems=new Set,this._dropListRef=i.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(l,u)=>this.enterPredicate(l.data,u.data),this._dropListRef.sortPredicate=(l,u,d)=>this.sortPredicate(l,u.data,d.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),a&&a._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,i)=>t._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(rr(this._dir.value),yn(this._destroyed)).subscribe(i=>t.withDirection(i)),t.beforeStarted.subscribe(()=>{let i=x_(this.connectedTo).map(r=>{if(typeof r=="string"){let s=n._dropLists.find(o=>o.id===r);return s}return r});if(this._group&&this._group._items.forEach(r=>{i.indexOf(r)===-1&&i.push(r)}),!this._scrollableParentsResolved){let r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=ea(this.autoScrollStep,2),t.connectedTo(i.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),ir(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:i,draggingDisabled:r,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:a}=t;this.disabled=r??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=a||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}static{this.\u0275fac=function(i){return new(i||n)(M(ke),M(ld),M(qt),M(R_),M(Xu,8),M(Q_,12),M(sy,8))}}static{this.\u0275dir=ve({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,r){i&2&&(xn("id",r.id),$e("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:[B.None,"cdkDropListConnectedTo","connectedTo"],data:[B.None,"cdkDropListData","data"],orientation:[B.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[B.None,"cdkDropListLockAxis","lockAxis"],disabled:[B.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",Nt],sortingDisabled:[B.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",Nt],enterPredicate:[B.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[B.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[B.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Nt],autoScrollStep:[B.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[_t([{provide:Q_,useValue:void 0},{provide:oy,useExisting:n}]),Mi]})}}return n})();var ly=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Be({type:n})}static{this.\u0275inj=je({providers:[ld],imports:[k_]})}}return n})();var uy=()=>{};var dd={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(n,e){if(!n)throw kn(e)},kn=function(n){return new Error("Firebase Database ("+dd.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var fy=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},k0=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},la={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),i.push(t[u],t[d],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):k0(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new hd;let h=s<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let g=l<<6&192|d;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hd=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},pd=function(n){let e=fy(n);return la.encodeByteArray(e,!0)},Vr=function(n){return pd(n).replace(/\./g,"")},Pi=function(n){try{return la.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function py(n){return gy(void 0,n)}function gy(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!O0(t)||(n[t]=gy(n[t],e[t]));return n}function O0(n){return n!=="__proto__"}function F0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var L0=()=>F0().__FIREBASE_DEFAULTS__,V0=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},j0=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Pi(n[1]);return e&&JSON.parse(e)},gd=()=>{try{return uy()||L0()||V0()||j0()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},md=n=>gd()?.emulatorHosts?.[n],my=n=>{let e=md(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},_d=()=>gd()?.config,yd=n=>gd()?.[`_${n}`];var xt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function Yt(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function ua(n){return p(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function _y(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=E({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vr(JSON.stringify(t)),Vr(JSON.stringify(o)),""].join(".")}var Lr={};function B0(){let n={prod:[],emulator:[]};for(let e of Object.keys(Lr))Lr[e]?n.emulator.push(e):n.prod.push(e);return n}function U0(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var dy=!1;function da(n,e){if(typeof window>"u"||typeof document>"u"||!Yt(window.location.host)||Lr[n]===e||Lr[n]||dy)return;Lr[n]=e;function t(h){return`__firebase__banner__${h}`}let i="__firebase__banner",s=B0().prod.length>0;function o(){let h=document.getElementById(i);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,f){h.setAttribute("width","24"),h.setAttribute("id",f),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{dy=!0,o()},h}function u(h,f){h.setAttribute("id",f),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){let h=U0(i),f=t("text"),g=document.getElementById(f)||document.createElement("span"),_=t("learnmore"),I=document.getElementById(_)||document.createElement("a"),x=t("preprendIcon"),ae=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let J=h.element;a(J),u(I,_);let _e=l();c(ae,x),J.append(ae,g,I,_e),document.body.appendChild(J)}s?(g.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ee(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function yy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vy(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ha(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wy(){let n=Ee();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function yt(){return dd.NODE_CLIENT===!0||dd.NODE_ADMIN===!0}function Iy(){try{return typeof indexedDB=="object"}catch{return!1}}function Ey(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}var H0="FirebaseError",nt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=H0,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rt.prototype.create)}},Rt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?$0(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new nt(r,a,i)}};function $0(n,e){return n.replace(W0,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var W0=/\{\$([^}]+)}/g;function ki(n){return JSON.parse(n)}function fe(n){return JSON.stringify(n)}var Dy=function(n){let e={},t={},i={},r="";try{let s=n.split(".");e=ki(Pi(s[0])||""),t=ki(Pi(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}};var Cy=function(n){let e=Dy(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},by=function(n){let e=Dy(n).claims;return typeof e=="object"&&e.admin===!0};function Ge(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Zt(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Br(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ur(n,e,t){let i={};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function vt(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(hy(s)&&hy(o)){if(!vt(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function hy(n){return n!==null&&typeof n=="object"}function On(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}var ca=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(h<<1|h>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(r<<5|r>>>27)+l+c+u+i[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let i=t-this.blockSize,r=0,s=this.buf_,o=this.inbuf_;for(;r<t;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}};function Ty(n,e){let t=new fd(n,e);return t.subscribe.bind(t)}var fd=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");G0(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=ud),r.error===void 0&&(r.error=ud),r.complete===void 0&&(r.complete=ud);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function G0(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ud(){}function fa(n,e){return`${n} failed: ${e} argument `}var Sy=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){let s=r-55296;i++,m(i<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Hr=function(n){let e=0;for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};var pB=4*60*60*1e3;function De(n){return n&&n._delegate?n._delegate:n}var ze=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Fn="[DEFAULT]";var pa=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new xt;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q0(e))try{this.getOrInitializeService({instanceIdentifier:Fn})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Fn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Fn){return this.instances.has(e)}getOptions(e=Fn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){let i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);let s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:z0(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fn){return this.component?this.component.multipleInstances?e:Fn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function z0(n){return n===Fn?void 0:n}function q0(n){return n.instantiationMode==="EAGER"}var $r=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new pa(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var K0=[],Z=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Z||{}),Y0={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},Z0=Z.INFO,Q0={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},J0=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Q0[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qt=class{constructor(e){this.name=e,this._logLevel=Z0,this._logHandler=J0,this._userLogHandler=null,K0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var X0=(n,e)=>e.some(t=>n instanceof t),Ay,My;function eA(){return Ay||(Ay=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tA(){return My||(My=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ny=new WeakMap,wd=new WeakMap,xy=new WeakMap,vd=new WeakMap,Ed=new WeakMap;function nA(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(wt(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Ny.set(t,n)}).catch(()=>{}),Ed.set(e,n),e}function iA(n){if(wd.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});wd.set(n,e)}var Id={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||xy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ry(n){Id=n(Id)}function rA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(ga(this),e,...t);return xy.set(i,e.sort?e.sort():[e]),wt(i)}:tA().includes(n)?function(...e){return n.apply(ga(this),e),wt(Ny.get(this))}:function(...e){return wt(n.apply(ga(this),e))}}function sA(n){return typeof n=="function"?rA(n):(n instanceof IDBTransaction&&iA(n),X0(n,eA())?new Proxy(n,Id):n)}function wt(n){if(n instanceof IDBRequest)return nA(n);if(vd.has(n))return vd.get(n);let e=sA(n);return e!==n&&(vd.set(n,e),Ed.set(e,n)),e}var ga=n=>Ed.get(n);function ky(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),a=wt(o);return i&&o.addEventListener("upgradeneeded",c=>{i(wt(o.result),c.oldVersion,c.newVersion,wt(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var oA=["get","getKey","getAll","getAllKeys","count"],aA=["put","add","delete","clear"],Dd=new Map;function Py(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=aA.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||oA.includes(t)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),r&&c.done]))[0]})};return Dd.set(e,s),s}Ry(n=>Y(E({},n),{get:(e,t,i)=>Py(e,t)||n.get(e,t,i),has:(e,t)=>!!Py(e,t)||n.has(e,t)}));var bd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cA(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function cA(n){return n.getComponent()?.type==="VERSION"}var Td="@firebase/app",Oy="0.14.6";var Pt=new Qt("@firebase/app"),lA="@firebase/app-compat",uA="@firebase/analytics-compat",dA="@firebase/analytics",hA="@firebase/app-check-compat",fA="@firebase/app-check",pA="@firebase/auth",gA="@firebase/auth-compat",mA="@firebase/database",_A="@firebase/data-connect",yA="@firebase/database-compat",vA="@firebase/functions",wA="@firebase/functions-compat",IA="@firebase/installations",EA="@firebase/installations-compat",DA="@firebase/messaging",CA="@firebase/messaging-compat",bA="@firebase/performance",TA="@firebase/performance-compat",SA="@firebase/remote-config",AA="@firebase/remote-config-compat",MA="@firebase/storage",NA="@firebase/storage-compat",xA="@firebase/firestore",RA="@firebase/ai",PA="@firebase/firestore-compat",kA="firebase",OA="12.6.0";var Sd="[DEFAULT]",FA={[Td]:"fire-core",[lA]:"fire-core-compat",[dA]:"fire-analytics",[uA]:"fire-analytics-compat",[fA]:"fire-app-check",[hA]:"fire-app-check-compat",[pA]:"fire-auth",[gA]:"fire-auth-compat",[mA]:"fire-rtdb",[_A]:"fire-data-connect",[yA]:"fire-rtdb-compat",[vA]:"fire-fn",[wA]:"fire-fn-compat",[IA]:"fire-iid",[EA]:"fire-iid-compat",[DA]:"fire-fcm",[CA]:"fire-fcm-compat",[bA]:"fire-perf",[TA]:"fire-perf-compat",[SA]:"fire-rc",[AA]:"fire-rc-compat",[MA]:"fire-gcs",[NA]:"fire-gcs-compat",[xA]:"fire-fst",[PA]:"fire-fst-compat",[RA]:"fire-vertex","fire-js":"fire-js",[kA]:"fire-js-all"};var ma=new Map,LA=new Map,Ad=new Map;function Fy(n,e){try{n.container.addComponent(e)}catch(t){Pt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xt(n){let e=n.name;if(Ad.has(e))return Pt.debug(`There were multiple attempts to register component ${e}.`),!1;Ad.set(e,n);for(let t of ma.values())Fy(t,n);for(let t of LA.values())Fy(t,n);return!0}function Gr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Oe(n){return n==null?!1:n.settings!==void 0}var VA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jt=new Rt("app","Firebase",VA);var Md=class{constructor(e,t,i){this._isDeleted=!1,this._options=E({},e),this._config=E({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ze("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jt.create("app-deleted",{appName:this._name})}};var en=OA;function Rd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=E({name:Sd,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Jt.create("bad-app-name",{appName:String(r)});if(t||(t=_d()),!t)throw Jt.create("no-options");let s=ma.get(r);if(s){if(vt(t,s.options)&&vt(i,s.config))return s;throw Jt.create("duplicate-app",{appName:r})}let o=new $r(r);for(let c of Ad.values())o.addComponent(c);let a=new Md(t,i,o);return ma.set(r,a),a}function _a(n=Sd){let e=ma.get(n);if(!e&&n===Sd&&_d())return Rd();if(!e)throw Jt.create("no-app",{appName:n});return e}function it(n,e,t){let i=FA[n]??n;t&&(i+=`-${t}`);let r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){let o=[`Unable to register library "${i}" with version "${e}":`];r&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pt.warn(o.join(" "));return}Xt(new ze(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var jA="firebase-heartbeat-database",BA=1,Wr="firebase-heartbeat-store",Cd=null;function By(){return Cd||(Cd=ky(jA,BA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wr)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jt.create("idb-open",{originalErrorMessage:n.message})})),Cd}function UA(n){return p(this,null,function*(){try{let t=(yield By()).transaction(Wr),i=yield t.objectStore(Wr).get(Uy(n));return yield t.done,i}catch(e){if(e instanceof nt)Pt.warn(e.message);else{let t=Jt.create("idb-get",{originalErrorMessage:e?.message});Pt.warn(t.message)}}})}function Ly(n,e){return p(this,null,function*(){try{let i=(yield By()).transaction(Wr,"readwrite");yield i.objectStore(Wr).put(e,Uy(n)),yield i.done}catch(t){if(t instanceof nt)Pt.warn(t.message);else{let i=Jt.create("idb-set",{originalErrorMessage:t?.message});Pt.warn(i.message)}}})}function Uy(n){return`${n.name}!${n.options.appId}`}var HA=1024,$A=30,Nd=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new xd(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return p(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Vy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>$A){let r=GA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Pt.warn(e)}})}getHeartbeatsHeader(){return p(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Vy(),{heartbeatsToSend:t,unsentEntries:i}=WA(this._heartbeatsCache.heartbeats),r=Vr(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Pt.warn(e),""}})}};function Vy(){return new Date().toISOString().substring(0,10)}function WA(n,e=HA){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),jy(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),jy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var xd=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Iy()?Ey().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield UA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ly(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ly(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function jy(n){return Vr(JSON.stringify({version:2,heartbeats:n})).length}function GA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function zA(n){Xt(new ze("platform-logger",e=>new bd(e),"PRIVATE")),Xt(new ze("heartbeat",e=>new Nd(e),"PRIVATE")),it(Td,Oy,n),it(Td,Oy,"esm2020"),it("fire-js","")}zA("");var qA="firebase",KA="12.6.0";it(qA,KA,"app");function nv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iv=nv,rv=new Rt("auth","Firebase",nv());var Da=new Qt("@firebase/auth");function YA(n,...e){Da.logLevel<=Z.WARN&&Da.warn(`Auth (${en}): ${n}`,...e)}function va(n,...e){Da.logLevel<=Z.ERROR&&Da.error(`Auth (${en}): ${n}`,...e)}function sn(n,...e){throw Jd(n,...e)}function Ln(n,...e){return Jd(n,...e)}function sv(n,e,t){let i=Y(E({},iv()),{[e]:t});return new Rt("auth","Firebase",i).create(e,{appName:n.name})}function rn(n){return sv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jd(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return rv.create(n,...e)}function T(n,e,...t){if(!n)throw Jd(e,...t)}function kt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw va(e),new Error(e)}function on(n,e){n||kt(e)}function Fd(){return typeof self<"u"&&self.location?.href||""}function ZA(){return Hy()==="http:"||Hy()==="https:"}function Hy(){return typeof self<"u"&&self.location?.protocol||null}function QA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZA()||vy()||"connection"in navigator)?navigator.onLine:!0}function JA(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Vn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,on(t>e,"Short delay should be less than long delay!"),this.isMobile=jr()||ha()}get(){return QA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Xd(n,e){on(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ca=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var XA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tM=new Vn(3e4,6e4);function Oa(n,e){return n.tenantId&&!e.tenantId?Y(E({},e),{tenantId:n.tenantId}):e}function Oi(s,o,a,c){return p(this,arguments,function*(n,e,t,i,r={}){return ov(n,r,()=>p(this,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let d=On(E({key:n.config.apiKey},u)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let f=E({method:e,headers:h},l);return yy()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Yt(n.emulatorConfig.host)&&(f.credentials="include"),Ca.fetch()(yield cv(n,n.config.apiHost,t,d),f)}))})}function ov(n,e,t){return p(this,null,function*(){n._canInitEmulator=!1;let i=E(E({},XA),e);try{let r=new Ld(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ya(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ya(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ya(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw ya(n,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sv(n,u,l);sn(n,u)}}catch(r){if(r instanceof nt)throw r;sn(n,"network-request-failed",{message:String(r)})}})}function av(s,o,a,c){return p(this,arguments,function*(n,e,t,i,r={}){let l=yield Oi(n,e,t,i,r);return"mfaPendingCredential"in l&&sn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function cv(n,e,t,i){return p(this,null,function*(){let r=`${e}${t}?${i}`,s=n,o=s.config.emulator?Xd(n.config,r):`${n.config.apiScheme}://${r}`;return eM.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var Ld=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ln(this.auth,"network-request-failed")),tM.get())})}};function ya(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Ln(n,e,i);return r.customData._tokenResponse=t,r}function nM(n,e){return p(this,null,function*(){return Oi(n,"POST","/v1/accounts:delete",e)})}function ba(n,e){return p(this,null,function*(){return Oi(n,"POST","/v1/accounts:lookup",e)})}function zr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function lv(n,e=!1){return p(this,null,function*(){let t=De(n),i=yield t.getIdToken(e),r=eh(i);T(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:zr(Pd(r.auth_time)),issuedAtTime:zr(Pd(r.iat)),expirationTime:zr(Pd(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Pd(n){return Number(n)*1e3}function eh(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return va("JWT malformed, contained fewer than 3 sections"),null;try{let r=Pi(t);return r?JSON.parse(r):(va("Failed to decode base64 JWT payload"),null)}catch(r){return va("Caught error parsing JWT payload as JSON",r?.toString()),null}}function $y(n){let e=eh(n);return T(e,"internal-error"),T(typeof e.exp<"u","internal-error"),T(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Kr(n,e,t=!1){return p(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof nt&&iM(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function iM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Vd=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),t)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ta(n){return p(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),i=yield Kr(n,ba(e,{idToken:t}));T(i?.users.length,e,"internal-error");let r=i.users[0];n._notifyReloadListener(r);let s=r.providerUserInfo?.length?dv(r.providerUserInfo):[],o=rM(n.providerData,s),a=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!o?.length,l=a?c:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Yr(r.createdAt,r.lastLoginAt),isAnonymous:l};Object.assign(n,u)})}function uv(n){return p(this,null,function*(){let e=De(n);yield Ta(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function rM(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function dv(n){return n.map(i=>{var r=i,{providerId:e}=r,t=Qi(r,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function sM(n,e){return p(this,null,function*(){let t=yield ov(n,{},()=>p(this,null,function*(){let i=On({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=yield cv(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&Yt(n.emulatorConfig.host)&&(c.credentials="include"),Ca.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function oM(n,e){return p(this,null,function*(){return Oi(n,"POST","/v2/accounts:revokeToken",Oa(n,e))})}var qr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){T(e.idToken,"internal-error"),T(typeof e.idToken<"u","internal-error"),T(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$y(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){T(e.length!==0,"internal-error");let t=$y(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return p(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(T(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return p(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield sM(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(T(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(T(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(T(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return kt("not implemented")}};function tn(n,e){T(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var nn=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:i}=o,r=Qi(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Yr(r.createdAt||void 0,r.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let t=yield Kr(this,this.stsTokenManager.getToken(this.auth,e));return T(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return lv(this,e)}reload(){return uv(this)}_assign(e){this!==e&&(T(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>E({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Y(E({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return p(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Ta(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Oe(this.auth.app))return Promise.reject(rn(this.auth));let e=yield this.getIdToken();return yield Kr(this,nM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Y(E({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>E({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:f,providerData:g,stsTokenManager:_}=t;T(d&&_,e,"internal-error");let I=qr.fromJSON(this.name,_);T(typeof d=="string",e,"internal-error"),tn(i,e.name),tn(r,e.name),T(typeof h=="boolean",e,"internal-error"),T(typeof f=="boolean",e,"internal-error"),tn(s,e.name),tn(o,e.name),tn(a,e.name),tn(c,e.name),tn(l,e.name),tn(u,e.name);let x=new n({uid:d,auth:e,email:r,emailVerified:h,displayName:i,isAnonymous:f,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:I,createdAt:l,lastLoginAt:u});return g&&Array.isArray(g)&&(x.providerData=g.map(ae=>E({},ae))),c&&(x._redirectEventId=c),x}static _fromIdTokenResponse(e,t,i=!1){return p(this,null,function*(){let r=new qr;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Ta(s),s})}static _fromGetAccountInfoResponse(e,t,i){return p(this,null,function*(){let r=t.users[0];T(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?dv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new qr;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Yr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var Wy=new Map;function Ot(n){on(n instanceof Function,"Expected a class definition");let e=Wy.get(n);return e?(on(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Wy.set(n,e),e)}var aM=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(t,i){return p(this,null,function*(){this.storage[t]=i})}_get(t){return p(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return p(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),jd=aM;function wa(n,e,t){return`firebase:${n}:${e}:${t}`}var Sa=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=wa(this.userKey,r.apiKey,s),this.fullPersistenceKey=wa("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ba(this.auth,{idToken:e}).catch(()=>{});return t?nn._fromGetAccountInfoResponse(this.auth,t,e):null}return nn._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return p(this,null,function*(){if(!t.length)return new n(Ot(jd),e,i);let r=(yield Promise.all(t.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||Ot(jd),o=wa(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d;if(typeof u=="string"){let h=yield ba(e,{idToken:u}).catch(()=>{});if(!h)break;d=yield nn._fromGetAccountInfoResponse(e,h,u)}else d=nn._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,i))})}};function Gy(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_v(e))return"Blackberry";if(yv(e))return"Webos";if(fv(e))return"Safari";if((e.includes("chrome/")||pv(e))&&!e.includes("edge/"))return"Chrome";if(mv(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function hv(n=Ee()){return/firefox\//i.test(n)}function fv(n=Ee()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pv(n=Ee()){return/crios\//i.test(n)}function gv(n=Ee()){return/iemobile/i.test(n)}function mv(n=Ee()){return/android/i.test(n)}function _v(n=Ee()){return/blackberry/i.test(n)}function yv(n=Ee()){return/webos/i.test(n)}function th(n=Ee()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function cM(n=Ee()){return th(n)&&!!window.navigator?.standalone}function lM(){return wy()&&document.documentMode===10}function vv(n=Ee()){return th(n)||mv(n)||yv(n)||_v(n)||/windows phone/i.test(n)||gv(n)}function wv(n,e=[]){let t;switch(n){case"Browser":t=Gy(Ee());break;case"Worker":t=`${Gy(Ee())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${en}/${i}`}var Bd=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function uM(t){return p(this,arguments,function*(n,e={}){return Oi(n,"GET","/v2/passwordPolicy",Oa(n,e))})}var dM=6,Ud=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??dM,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Hd=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Aa(this),this.idTokenSubscription=new Aa(this),this.beforeStateQueue=new Bd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ot(t)),this._initializationPromise=this.queue(()=>p(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Sa.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let t=yield ba(this,{idToken:e}),i=yield nn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){if(Oe(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),i=t,r=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=i?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return T(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Ta(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=JA()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(Oe(this.app))return Promise.reject(rn(this));let t=e?De(e):null;return t&&T(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return p(this,null,function*(){if(!this._deleted)return e&&T(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Oe(this.app)?Promise.reject(rn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Oe(this.app)?Promise.reject(rn(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Ot(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield uM(this),t=new Ud(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield oM(this,i)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return p(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ot(e)||this._popupRedirectResolver;T(t,this,"argument-error"),this.redirectPersistenceManager=yield Sa.create(this,[Ot(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(T(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return T(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=yield this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e})}_getAppCheckToken(){return p(this,null,function*(){if(Oe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YA(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Fa(n){return De(n)}var Aa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ty(t=>this.observer=t)}get next(){return T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var nh={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hM(n){nh=n}function fM(n){return nh.loadJS(n)}function pM(){return nh.gapiScript}function Iv(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Ev(n,e){let t=Gr(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(vt(s,e??{}))return r;sn(r,"already-initialized")}return t.initialize({options:e})}function gM(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ot);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Dv(n,e,t){let i=Fa(n);T(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=Cv(e),{host:o,port:a}=mM(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){T(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),T(vt(l,i.config.emulator)&&vt(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=l,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,Yt(o)?(ua(`${s}//${o}${c}`),da("Auth",!0)):r||_M()}function Cv(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mM(n){let e=Cv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:zy(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:zy(o)}}}function zy(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function _M(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ma=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kt("not implemented")}_getIdTokenResponse(e){return kt("not implemented")}_linkToIdToken(e,t){return kt("not implemented")}_getReauthenticationResolver(e){return kt("not implemented")}};function kd(n,e){return p(this,null,function*(){return av(n,"POST","/v1/accounts:signInWithIdp",Oa(n,e))})}var Na=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var $d=class extends Na{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function yM(n,e){return p(this,null,function*(){return av(n,"POST","/v1/accounts:signUp",Oa(n,e))})}var jn=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return p(this,null,function*(){let s=yield nn._fromIdTokenResponse(e,i,r),o=qy(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return p(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=qy(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function qy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}function Qr(n){return p(this,null,function*(){if(Oe(n.app))return Promise.reject(rn(n));let e=Fa(n);if(yield e._initializationPromise,e.currentUser?.isAnonymous)return new jn({user:e.currentUser,providerId:null,operationType:"signIn"});let t=yield yM(e,{returnSecureToken:!0}),i=yield jn._fromIdTokenResponse(e,"signIn",t,!0);return yield e._updateCurrentUser(i.user),i})}var Wd=class n extends nt{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function bv(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wd._fromErrorAndOperation(n,s,e,i):s})}function vM(n,e,t=!1){return p(this,null,function*(){let i=yield Kr(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return jn._forOperation(n,"link",i)})}function wM(n,e,t=!1){return p(this,null,function*(){let{auth:i}=n;if(Oe(i.app))return Promise.reject(rn(i));let r="reauthenticate";try{let s=yield Kr(n,bv(i,r,e,n),t);T(s.idToken,i,"internal-error");let o=eh(s.idToken);T(o,i,"internal-error");let{sub:a}=o;return T(n.uid===a,i,"user-mismatch"),jn._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&sn(i,"user-mismatch"),s}})}function IM(n,e,t=!1){return p(this,null,function*(){if(Oe(n.app))return Promise.reject(rn(n));let i="signIn",r=yield bv(n,i,e),s=yield jn._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function Tv(n,e,t,i){return De(n).onIdTokenChanged(e,t,i)}function Sv(n,e,t){return De(n).beforeAuthStateChanged(e,t)}function ih(n,e,t,i){return De(n).onAuthStateChanged(e,t,i)}var xa="__sak";var Ra=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xa,"1"),this.storage.removeItem(xa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var EM=1e3,DM=10,CM=(()=>{class n extends Ra{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);lM()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,DM):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},EM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return p(this,null,function*(){yield hn(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return p(this,null,function*(){let i=yield hn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return p(this,null,function*(){yield hn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Av=CM;var bM=(()=>{class n extends Ra{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),rh=bM;function TM(n){return Promise.all(n.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var SM=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return p(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(u=>p(this,null,function*(){return u(i.origin,o)})),l=yield TM(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Mv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Gd=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return p(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=Mv("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function It(){return window}function AM(n){It().location.href=n}function Nv(){return typeof It().WorkerGlobalScope<"u"&&typeof It().importScripts=="function"}function MM(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function NM(){return navigator?.serviceWorker?.controller||null}function xM(){return Nv()?self:null}var xv="firebaseLocalStorageDb",RM=1,Pa="firebaseLocalStorage",Rv="fbase_key",Bn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function La(n,e){return n.transaction([Pa],e?"readwrite":"readonly").objectStore(Pa)}function PM(){let n=indexedDB.deleteDatabase(xv);return new Bn(n).toPromise()}function zd(){let n=indexedDB.open(xv,RM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Pa,{keyPath:Rv})}catch(r){t(r)}}),n.addEventListener("success",()=>p(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Pa)?e(i):(i.close(),yield PM(),e(yield zd()))}))})}function Ky(n,e,t){return p(this,null,function*(){let i=La(n,!0).put({[Rv]:e,value:t});return new Bn(i).toPromise()})}function kM(n,e){return p(this,null,function*(){let t=La(n,!1).get(e),i=yield new Bn(t).toPromise();return i===void 0?null:i.value})}function Yy(n,e){let t=La(n,!0).delete(e);return new Bn(t).toPromise()}var OM=800,FM=3,LM=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield zd(),this.db)})}_withRetries(t){return p(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>FM)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return Nv()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=SM._getInstance(xM()),this.receiver._subscribe("keyChanged",(t,i)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){if(this.activeServiceWorker=yield MM(),!this.activeServiceWorker)return;this.sender=new Gd(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||NM()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let t=yield zd();return yield Ky(t,xa,"1"),yield Yy(t,xa),!0}catch{}return!1})}_withPendingWrite(t){return p(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>Ky(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return p(this,null,function*(){let i=yield this._withRetries(r=>kM(r,t));return this.localCache[t]=i,i})}_remove(t){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>Yy(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return p(this,null,function*(){let t=yield this._withRetries(s=>{let o=La(s,!1).getAll();return new Bn(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),OM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Pv=LM;var zB=Iv("rcb"),qB=new Vn(3e4,6e4);function VM(n,e){return e?Ot(e):(T(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Zr=class extends Ma{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return kd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return kd(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function jM(n){return IM(n.auth,new Zr(n),n.bypassAuthState)}function BM(n){let{auth:e,user:t}=n;return T(t,e,"internal-error"),wM(t,new Zr(n),n.bypassAuthState)}function UM(n){return p(this,null,function*(){let{auth:e,user:t}=n;return T(t,e,"internal-error"),vM(t,new Zr(n),n.bypassAuthState)})}var qd=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jM;case"linkViaPopup":case"linkViaRedirect":return UM;case"reauthViaPopup":case"reauthViaRedirect":return BM;default:sn(this.auth,"internal-error")}}resolve(e){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var KB=new Vn(2e3,1e4);var HM="pendingRedirect",Ia=new Map,Kd=class n extends qd{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return p(this,null,function*(){let e=Ia.get(this.auth._key());if(!e){try{let i=(yield $M(this.resolver,this.auth))?yield hn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ia.set(this.auth._key(),e)}return this.bypassAuthState||Ia.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return hn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,hn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function $M(n,e){return p(this,null,function*(){let t=zM(e),i=GM(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function WM(n,e){Ia.set(n._key(),e)}function GM(n){return Ot(n._redirectPersistence)}function zM(n){return wa(HM,n.config.apiKey,n.name)}function qM(n,e,t=!1){return p(this,null,function*(){if(Oe(n.app))return Promise.reject(rn(n));let i=Fa(n),r=VM(i,e),o=yield new Kd(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var KM=10*60*1e3,Yd=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!kv(e)){let i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ln(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zy(e))}saveEventToCache(e){this.cachedEventUids.add(Zy(e)),this.lastProcessedEventTime=Date.now()}};function Zy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function kv({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function YM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kv(n);default:return!1}}function ZM(t){return p(this,arguments,function*(n,e={}){return Oi(n,"GET","/v1/projects",e)})}var QM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JM=/^https?/;function XM(n){return p(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield ZM(n);for(let t of e)try{if(eN(t))return}catch{}sn(n,"unauthorized-domain")})}function eN(n){let e=Fd(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!JM.test(t))return!1;if(QM.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var tN=new Vn(3e4,6e4);function Qy(){let n=It().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function nN(n){return new Promise((e,t)=>{function i(){Qy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qy(),t(Ln(n,"network-request-failed"))},timeout:tN.get()})}if(It().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(It().gapi?.load)i();else{let r=Iv("iframefcb");return It()[r]=()=>{gapi.load?i():t(Ln(n,"network-request-failed"))},fM(`${pM()}?onload=${r}`).catch(s=>t(s))}}).catch(e=>{throw Ea=null,e})}var Ea=null;function iN(n){return Ea=Ea||nN(n),Ea}var rN=new Vn(5e3,15e3),sN="__/auth/iframe",oN="emulator/auth/iframe",aN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lN(n){let e=n.config;T(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Xd(e,oN):`https://${n.config.authDomain}/${sN}`,i={apiKey:e.apiKey,appName:n.name,v:en},r=cN.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${On(i).slice(1)}`}function uN(n){return p(this,null,function*(){let e=yield iN(n),t=It().gapi;return T(t,n,"internal-error"),e.open({where:document.body,url:lN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aN,dontclear:!0},i=>new Promise((r,s)=>p(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Ln(n,"network-request-failed"),a=It().setTimeout(()=>{s(o)},rN.get());function c(){It().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var dN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hN=500,fN=600,pN="_blank",gN="http://localhost",ka=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function mN(n,e,t,i=hN,r=fN){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Y(E({},dN),{width:i.toString(),height:r.toString(),top:s,left:o}),l=Ee().toLowerCase();t&&(a=pv(l)?pN:t),hv(l)&&(e=e||gN,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(cM(l)&&a!=="_self")return _N(e||"",a),new ka(null);let d=window.open(e||"",a,u);T(d,n,"popup-blocked");try{d.focus()}catch{}return new ka(d)}function _N(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var yN="__/auth/handler",vN="emulator/auth/handler",wN=encodeURIComponent("fac");function Jy(n,e,t,i,r,s){return p(this,null,function*(){T(n.config.authDomain,n,"auth-domain-config-required"),T(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:en,eventId:r};if(e instanceof Na){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Br(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof $d){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${wN}=${encodeURIComponent(c)}`:"";return`${IN(n)}?${On(a).slice(1)}${l}`})}function IN({config:n}){return n.emulator?Xd(n,vN):`https://${n.authDomain}/${yN}`}var Od="webStorageSupport",Zd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rh,this._completeRedirectFn=qM,this._overrideRedirectResult=WM}_openPopup(e,t,i,r){return p(this,null,function*(){on(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=yield Jy(e,t,i,Fd(),r);return mN(e,s,Mv())})}_openRedirect(e,t,i,r){return p(this,null,function*(){yield this._originValidation(e);let s=yield Jy(e,t,i,Fd(),r);return AM(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(on(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return p(this,null,function*(){let t=yield uN(e),i=new Yd(e);return t.register("authEvent",r=>(T(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Od,{type:Od},r=>{let s=r?.[0]?.[Od];s!==void 0&&t(!!s),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vv()||fv()||th()}},Ov=Zd;var Xy="@firebase/auth",ev="1.11.1";var Qd=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function EN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DN(n){Xt(new ze("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;T(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wv(n)},l=new Hd(i,r,s,c);return gM(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xt(new ze("auth-internal",e=>{let t=Fa(e.getProvider("auth").getImmediate());return(i=>new Qd(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),it(Xy,ev,EN(n)),it(Xy,ev,"esm2020")}var CN=5*60,bN=yd("authIdTokenMaxAge")||CN,tv=null,TN=n=>e=>p(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>bN)return;let r=t?.token;tv!==r&&(tv=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function sh(n=_a()){let e=Gr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ev(n,{popupRedirectResolver:Ov,persistence:[Pv,Av,rh]}),i=yd("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=TN(s.toString());Sv(t,o,()=>o(t.currentUser)),Tv(t,a=>o(a))}}let r=md("auth");return r&&Dv(t,`http://${r}`),t}function SN(){return document.getElementsByTagName("head")?.[0]??document}hM({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Ln("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",SN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DN("Browser");var Fv="@firebase/database",Lv="1.1.0";var cf="";function AN(n){cf=n}var fh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),fe(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ki(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var ph=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ge(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var gw=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fh(e)}}catch{}return new ph},Hn=gw("localStorage"),gh=gw("sessionStorage");var Vi=new Qt("@firebase/database"),mw=function(){let n=1;return function(){return n++}}(),_w=function(n){let e=Sy(n),t=new ca;t.update(e);let i=t.digest();return la.encodeByteArray(i)},ps=function(...n){let e="";for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ps.apply(null,i):typeof i=="object"?e+=fe(i):e+=i,e+=" "}return e},Wn=null,Vv=!0,MN=function(n,e){m(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Vi.logLevel=Z.VERBOSE,Wn=Vi.log.bind(Vi),e&&gh.set("logging_enabled",!0)):typeof n=="function"?Wn=n:(Wn=null,gh.remove("logging_enabled"))},Ce=function(...n){if(Vv===!0&&(Vv=!1,Wn===null&&gh.get("logging_enabled")===!0&&MN(!0)),Wn){let e=ps.apply(null,n);Wn(e)}},gs=function(n){return function(...e){Ce(n,...e)}},mh=function(...n){let e="FIREBASE INTERNAL ERROR: "+ps(...n);Vi.error(e)},Ft=function(...n){let e=`FIREBASE FATAL ERROR: ${ps(...n)}`;throw Vi.error(e),new Error(e)},Ne=function(...n){let e="FIREBASE WARNING: "+ps(...n);Vi.warn(e)},NN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ne("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},lf=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},xN=function(n){if(yt()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Bi="[MIN_NAME]",Gn="[MAX_NAME]",Ki=function(n,e){if(n===e)return 0;if(n===Bi||e===Gn)return-1;if(e===Bi||n===Gn)return 1;{let t=jv(n),i=jv(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},RN=function(n,e){return n===e?0:n<e?-1:1},Jr=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+fe(e))},uf=function(n){if(typeof n!="object"||n===null)return fe(n);let e=[];for(let i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=fe(e[i]),t+=":",t+=uf(n[e[i]]);return t+="}",t},yw=function(n,e){let t=n.length;if(t<=e)return[n];let i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function xe(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var vw=function(n){m(!lf(n),"Invalid JSON number");let e=11,t=52,i=(1<<e-1)-1,r,s,o,a,c;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(r?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},PN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},kN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ON(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}var FN=new RegExp("^-?(0*)\\d{1,10}$"),LN=-2147483648,VN=2147483647,jv=function(n){if(FN.test(n)){let e=Number(n);if(e>=LN&&e<=VN)return e}return null},Yi=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Ne("Exception was thrown by user callback.",t),e},Math.floor(0))}},jN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},is=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var _h=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Oe(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Ne(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var yh=class{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Ce("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ne(e)}},rs=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),ja="5",ww="v",Iw="s",Ew="r",Dw="f",Cw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bw="ls",Tw="p",vh="ac",Sw="websocket",Aw="long_polling";var Ba=class{constructor(e,t,i,r,s=!1,o="",a=!1,c=!1,l=null){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function BN(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Mw(n,e,t){m(typeof e=="string","typeof type must == string"),m(typeof t=="object","typeof params must == object");let i;if(e===Sw)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Aw)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);BN(n)&&(t.ns=n.namespace);let r=[];return xe(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var wh=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Ge(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return py(this.counters_)}};var oh={},ah={};function df(n){let e=n.toString();return oh[e]||(oh[e]=new wh),oh[e]}function UN(n,e){let t=n.toString();return ah[t]||(ah[t]=e()),ah[t]}var Ih=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Yi(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Bv="start",HN="close",$N="pLPCommand",WN="pRTLPCB",Nw="id",xw="pw",Rw="ser",GN="cb",zN="seg",qN="ts",KN="d",YN="dframe",Pw=1870,kw=30,ZN=Pw-kw,QN=25e3,JN=3e4,Eh=class n{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gs(e),this.stats_=df(t),this.urlFn=c=>(this.appCheckToken&&(c[vh]=this.appCheckToken),Mw(t,Aw,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ih(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(JN)),xN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dh((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Bv)this.id=a,this.password=c;else if(o===HN)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[Bv]="t",i[Rw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[GN]=this.scriptTagHolder.uniqueCallbackIdentifier),i[ww]=ja,this.transportSessionId&&(i[Iw]=this.transportSessionId),this.lastSessionId&&(i[bw]=this.lastSessionId),this.applicationId&&(i[Tw]=this.applicationId),this.appCheckToken&&(i[vh]=this.appCheckToken),typeof location<"u"&&location.hostname&&Cw.test(location.hostname)&&(i[Ew]=Dw);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return yt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!PN()&&!kN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=fe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=pd(t),r=yw(i,ZN);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(yt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[YN]="t",i[Nw]=e,i[xw]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=fe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Dh=class n{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,yt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=mw(),window[$N+this.uniqueCallbackIdentifier]=e,window[WN+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ce("frame writing exception"),a.stack&&Ce(a.stack),Ce(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ce("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Nw]=this.myID,e[xw]=this.myPW,e[Rw]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kw+i.length<=Pw;){let o=this.pendingSegs.shift();i=i+"&"+zN+r+"="+o.seg+"&"+qN+r+"="+o.ts+"&"+KN+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(QN)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){yt()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Ce("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var XN=16384,ex=45e3,Ua=null;typeof MozWebSocket<"u"?Ua=MozWebSocket:typeof WebSocket<"u"&&(Ua=WebSocket);var Xr=(()=>{class n{constructor(t,i,r,s,o,a,c){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gs(this.connId),this.stats_=df(i),this.connURL=n.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){let a={};return a[ww]=ja,!yt()&&typeof location<"u"&&location.hostname&&Cw.test(location.hostname)&&(a[Ew]=Dw),i&&(a[Iw]=i),r&&(a[bw]=r),s&&(a[vh]=s),o&&(a[Tw]=o),Mw(t,Sw,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hn.set("previous_websocket_failure",!0);try{let r;if(yt()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${ja}/${cf}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Ua(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Ua!==null&&!n.forceDisallow_}static previouslyFailed(){return Hn.isInMemoryStorage||Hn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hn.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=ki(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(m(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let i=fe(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=yw(i,XN);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ex))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),tx=(()=>{class n{static get ALL_TRANSPORTS(){return[Eh,Xr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let i=Xr&&Xr.isAvailable(),r=i&&!Xr.previouslyFailed();if(t.webSocketOnly&&(i||Ne("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Xr];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),nx=6e4,ix=5e3,rx=10*1024,sx=100*1024,ch="t",Uv="d",ox="s",Hv="r",ax="e",$v="o",Wv="a",Gv="n",zv="p",cx="h",Ch=class{constructor(e,t,i,r,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gs("c:"+this.id+":"),this.transportManager_=new tx(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=is(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>sx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>rx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ch in e){let t=e[ch];t===Wv?this.upgradeIfSecondaryHealthy_():t===Hv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===$v&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Jr("t",e),i=Jr("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:zv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Gv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Jr("t",e),i=Jr("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Jr(ch,e);if(Uv in e){let i=e[Uv];if(t===cx){let r=E({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===Gv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===ox?this.onConnectionShutdown_(i):t===Hv?this.onReset_(i):t===ax?mh("Server Error: "+i):t===$v?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mh("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ja!==i&&Ne("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),is(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(nx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):is(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ix))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:zv,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ha=class{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}};var $a=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Wa=class n extends $a{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!jr()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var qv=32,Kv=768,Q=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function W(){return new Q("")}function P(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ln(n){return n.pieces_.length-n.pieceNum_}function X(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Q(n.pieces_,e)}function Ow(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function lx(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Fw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Lw(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Q(e,0)}function ge(n,e){let t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Q)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Q(t,0)}function O(n){return n.pieceNum_>=n.pieces_.length}function Ae(n,e){let t=P(n),i=P(e);if(t===null)return e;if(t===i)return Ae(X(n),X(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function hf(n,e){if(ln(n)!==ln(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function st(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(ln(n)>ln(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}var bh=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Fw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Hr(this.parts_[i]);Vw(this)}};function ux(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Hr(e),Vw(n)}function dx(n){let e=n.parts_.pop();n.byteLength_-=Hr(e),n.parts_.length>0&&(n.byteLength_-=1)}function Vw(n){if(n.byteLength_>Kv)throw new Error(n.errorPrefix_+"has a key path longer than "+Kv+" bytes ("+n.byteLength_+").");if(n.parts_.length>qv)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qv+") or object contains a cycle "+Un(n))}function Un(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Th=class n extends $a{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var es=1e3,hx=60*5*1e3,Yv=30*1e3,fx=1.3,px=3e4,gx="server_kill",Zv=3,ff=(()=>{class n extends Ha{constructor(t,i,r,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=gs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=es,this.maxReconnectDelay_=hx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!yt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Th.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Wa.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){let s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(fe(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();let i=new xt,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(t,i,r,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){let i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Ge(t,"w")){let r=Zt(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Ne(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||by(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Yv)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=Cy(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){let r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),m(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);let o={p:t},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+fe(t));let i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):mh("Unrecognized action received from server: "+fe(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=es,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=es,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>px&&(this.reconnectDelay_=es),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fx)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,r())},u=function(h){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ce("getToken() completed but was canceled"):(Ce("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new Ch(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,g=>{Ne(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(gx)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Ne(h),l())}}})}interrupt(t){Ce("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ce("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Br(this.interruptReasons_)&&(this.reconnectDelay_=es,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(o=>uf(o)).join("$"):r="default";let s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){let r=new Q(t).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Ce("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Zv&&(this.reconnectDelay_=Yv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Ce("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Zv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";yt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+cf.replace(/\./g,"-")]=1,jr()?t["framework.cordova"]=1:ha()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Wa.getInstance().currentlyOnline();return Br(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),k=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Ui=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new k(Bi,e),r=new k(Bi,t);return this.compare(i,r)!==0}minPost(){return k.MIN}};var Va,Ga=class extends Ui{static get __EMPTY_NODE(){return Va}static set __EMPTY_NODE(e){Va=e}compare(e,t){return Ki(e.name,t.name)}isDefinedOn(e){throw kn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return k.MIN}maxPost(){return new k(Gn,Va)}makePost(e,t){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new k(e,Va)}toString(){return".key"}},ji=new Ga;var Li=class{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},rt=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??qe.EMPTY_NODE,this.right=o??qe.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this,o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return qe.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return qe.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Sh=class{copy(e,t,i,r,s){return this}insert(e,t,i){return new rt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},qe=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,rt.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Li(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Li(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Li(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Li(this.root_,null,this.comparator_,!0,e)}};qe.EMPTY_NODE=new Sh;function mx(n,e){return Ki(n.name,e.name)}function pf(n,e){return Ki(n,e)}var Ah;function _x(n){Ah=n}var jw=function(n){return typeof n=="number"?"number:"+vw(n):"string:"+n},Bw=function(n){if(n.isLeafNode()){let e=n.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ge(e,".sv"),"Priority must be a string or number.")}else m(n===Ah||n.isEmpty(),"priority of unexpected type.");m(n===Ah||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Qv,Hi=(()=>{class n{static set __childrenNodeConstructor(t){Qv=t}static get __childrenNodeConstructor(){return Qv}constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Bw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return O(t)?this:P(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let r=P(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(m(r!==".priority"||ln(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(X(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+jw(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=vw(this.value_):t+=this.value_,this.lazyHash_=_w(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(m(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return m(s>=0,"Unknown leaf type: "+i),m(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Uw,Hw;function yx(n){Uw=n}function vx(n){Hw=n}var Mh=class extends Ui{compare(e,t){let i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?Ki(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return k.MIN}maxPost(){return new k(Gn,new Hi("[PRIORITY-POST]",Hw))}makePost(e,t){let i=Uw(e);return new k(t,new Hi("[PRIORITY-POST]",i))}toString(){return".priority"}},oe=new Mh;var wx=Math.log(2),Nh=class{constructor(e){let t=s=>parseInt(Math.log(s)/wx,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},za=function(n,e,t,i){n.sort(e);let r=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=n[c],h=t?t(d):d,new rt(h,d.node,rt.BLACK,null,null);{let f=parseInt(u/2,10)+c,g=r(c,f),_=r(f+1,l);return d=n[f],h=t?t(d):d,new rt(h,d.node,rt.BLACK,g,_)}},s=function(c){let l=null,u=null,d=n.length,h=function(g,_){let I=d-g,x=d;d-=g;let ae=r(I+1,x),J=n[I],_e=t?t(J):J;f(new rt(_e,J.node,_,null,ae))},f=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),I=Math.pow(2,c.count-(g+1));_?h(I,rt.BLACK):(h(I,rt.BLACK),h(I,rt.RED))}return u},o=new Nh(n.length),a=s(o);return new qe(i||e,a)};var lh,Fi={},$i=class n{static get Default(){return m(Fi&&oe,"ChildrenNode.ts has not been loaded"),lh=lh||new n({".priority":Fi},{".priority":oe}),lh}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Zt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qe?t:null}hasIndex(e){return Ge(this.indexSet_,e.toString())}addIndex(e,t){m(e!==ji,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(k.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=za(i,e.getCompare()):a=Fi;let c=e.toString(),l=E({},this.indexSet_);l[c]=e;let u=E({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let i=Ur(this.indexes_,(r,s)=>{let o=Zt(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),r===Fi)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(k.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),za(a,o.getCompare())}else return Fi;else{let a=t.get(e.name),c=r;return a&&(c=c.remove(new k(e.name,a))),c.insert(e,e.node)}});return new n(i,this.indexSet_)}removeFromIndexes(e,t){let i=Ur(this.indexes_,r=>{if(r===Fi)return r;{let s=t.get(e.name);return s?r.remove(new k(e.name,s)):r}});return new n(i,this.indexSet_)}};var ts,N=(()=>{class n{static get EMPTY_NODE(){return ts||(ts=new n(new qe(pf),null,$i.Default))}constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Bw(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ts}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?ts:i}}getChild(t){let i=P(t);return i===null?this:this.getImmediateChild(i).getChild(X(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(m(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let r=new k(t,i),s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?ts:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){let r=P(t);if(r===null)return i;{m(P(t)!==".priority"||ln(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(X(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(oe,(a,c)=>{i[a]=c.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+jw(this.getPriority().val())+":"),this.forEachChild(oe,(i,r)=>{let s=r.hash();s!==""&&(t+=":"+i+":"+s)}),this.lazyHash_=t===""?"":_w(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new k(t,i));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new k(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new k(i,this.children_.get(i)):null}forEachChild(t,i){let r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,k.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,k.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ms?-1:0}withIndex(t){if(t===ji||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===ji||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(oe),s=i.getIterator(oe),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===ji?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),xh=class extends N{constructor(){super(new qe(pf),N.EMPTY_NODE,$i.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return N.EMPTY_NODE}isEmpty(){return!1}},ms=new xh;Object.defineProperties(k,{MIN:{value:new k(Bi,N.EMPTY_NODE)},MAX:{value:new k(Gn,ms)}});Ga.__EMPTY_NODE=N.EMPTY_NODE;Hi.__childrenNodeConstructor=N;_x(ms);vx(ms);var Ix=!0;function pe(n,e=null){if(n===null)return N.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Hi(t,pe(e))}if(!(n instanceof Array)&&Ix){let t=[],i=!1;if(xe(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=pe(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),t.push(new k(o,c)))}}),t.length===0)return N.EMPTY_NODE;let s=za(t,mx,o=>o.name,pf);if(i){let o=za(t,oe.getCompare());return new N(s,pe(e),new $i({".priority":o},{".priority":oe}))}else return new N(s,pe(e),$i.Default)}else{let t=N.EMPTY_NODE;return xe(n,(i,r)=>{if(Ge(n,i)&&i.substring(0,1)!=="."){let s=pe(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(pe(e))}}yx(pe);var Rh=class extends Ui{constructor(e){super(),this.indexPath_=e,m(!O(e)&&P(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?Ki(e.name,t.name):s}makePost(e,t){let i=pe(e),r=N.EMPTY_NODE.updateChild(this.indexPath_,i);return new k(t,r)}maxPost(){let e=N.EMPTY_NODE.updateChild(this.indexPath_,ms);return new k(Gn,e)}toString(){return Fw(this.indexPath_,0).join("/")}};var Ph=class extends Ui{compare(e,t){let i=e.node.compareTo(t.node);return i===0?Ki(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return k.MIN}maxPost(){return k.MAX}makePost(e,t){let i=pe(e);return new k(t,i)}toString(){return".value"}},Ex=new Ph;function $w(n){return{type:"value",snapshotNode:n}}function Wi(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function cs(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ls(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Dx(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var us=class{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(cs(t,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Wi(t,i)):o.trackChildChange(ls(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(oe,(r,s)=>{t.hasChild(r)||i.trackChildChange(cs(r,s))}),t.isLeafNode()||t.forEachChild(oe,(r,s)=>{if(e.hasChild(r)){let o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(ls(r,s,o))}else i.trackChildChange(Wi(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?N.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var qa=class n{constructor(e){this.indexedFilter_=new us(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new k(t,i))||(i=N.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=N.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(N.EMPTY_NODE);let s=this;return t.forEachChild(oe,(o,a)=>{s.matches(new k(o,a))||(r=r.updateImmediateChild(o,N.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var kh=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{let i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new qa(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new k(t,i))||(i=N.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=N.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=N.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(N.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,N.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let c=new k(t,i),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let d=a.getImmediateChild(t),h=r.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===t||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(u&&!i.isEmpty()&&f>=0)return s?.trackChildChange(ls(t,i,d)),a.updateImmediateChild(t,i);{s?.trackChildChange(cs(t,d));let _=a.updateImmediateChild(t,N.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(Wi(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return i.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(cs(l.name,l.node)),s.trackChildChange(Wi(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(l.name,N.EMPTY_NODE)):e}};var Oh=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bi}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Cx(n){return n.loadsAllData()?new us(n.getIndex()):n.hasLimit()?new kh(n):new qa(n)}function Jv(n){let e={};if(n.isDefault())return e;let t;if(n.index_===oe?t="$priority":n.index_===Ex?t="$value":n.index_===ji?t="$key":(m(n.index_ instanceof Rh,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=fe(t),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";e[i]=fe(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+fe(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";e[i]=fe(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+fe(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Xv(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==oe&&(e.i=n.index_.toString()),e}var Fh=class n extends Ha{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=gs("p:rest:"),this.listens_={}}listen(e,t,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,i),a={};this.listens_[o]=a;let c=Jv(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,i),Zt(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",r(h,null)}})}unlisten(e,t){let i=n.getListenId_(e,t);delete this.listens_[i]}get(e){let t=Jv(e._queryParams),i=e._path.toString(),r=new xt;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+On(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ki(a.responseText)}catch{Ne("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&Ne("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var Lh=class{constructor(){this.rootNode_=N.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Ka(){return{value:null,children:new Map}}function Ww(n,e,t){if(O(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let i=P(e);n.children.has(i)||n.children.set(i,Ka());let r=n.children.get(i);e=X(e),Ww(r,e,t)}}function Vh(n,e,t){n.value!==null?t(e,n.value):bx(n,(i,r)=>{let s=new Q(e.toString()+"/"+i);Vh(r,s,t)})}function bx(n,e){n.children.forEach((t,i)=>{e(i,t)})}var jh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=E({},e);return this.last_&&xe(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}};var ew=10*1e3,Tx=30*1e3,Sx=5*60*1e3,Bh=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new jh(e);let i=ew+(Tx-ew)*Math.random();is(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;xe(e,(r,s)=>{s>0&&Ge(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),is(this.reportStats_.bind(this),Math.floor(Math.random()*2*Sx))}};var Et=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Et||{});function Gw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mf(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Uh=class n{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Et.ACK_USER_WRITE,this.source=Gw()}operationForChild(e){if(O(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Q(e));return new n(W(),t,this.revert)}}else return m(P(this.path)===e,"operationForChild called for unrelated child."),new n(X(this.path),this.affectedTree,this.revert)}};var Ya=class n{constructor(e,t){this.source=e,this.path=t,this.type=Et.LISTEN_COMPLETE}operationForChild(e){return O(this.path)?new n(this.source,W()):new n(this.source,X(this.path))}};var Gi=class n{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Et.OVERWRITE}operationForChild(e){return O(this.path)?new n(this.source,W(),this.snap.getImmediateChild(e)):new n(this.source,X(this.path),this.snap)}};var Za=class n{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Et.MERGE}operationForChild(e){if(O(this.path)){let t=this.children.subtree(new Q(e));return t.isEmpty()?null:t.value?new Gi(this.source,W(),t.value):new n(this.source,W(),t)}else return m(P(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,X(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Dt=class{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(O(e))return this.isFullyInitialized()&&!this.filtered_;let t=P(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Hh=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Ax(n,e,t,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Dx(o.childName,o.snapshotNode))}),ns(n,r,"child_removed",e,i,t),ns(n,r,"child_added",e,i,t),ns(n,r,"child_moved",s,i,t),ns(n,r,"child_changed",e,i,t),ns(n,r,"value",e,i,t),r}function ns(n,e,t,i,r,s){let o=i.filter(a=>a.type===t);o.sort((a,c)=>Nx(n,a,c)),o.forEach(a=>{let c=Mx(n,a,s);r.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function Mx(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Nx(n,e,t){if(e.childName==null||t.childName==null)throw kn("Should only compare child_ events.");let i=new k(e.childName,e.snapshotNode),r=new k(t.childName,t.snapshotNode);return n.index_.compare(i,r)}function uc(n,e){return{eventCache:n,serverCache:e}}function ss(n,e,t,i){return uc(new Dt(e,t,i),n.serverCache)}function zw(n,e,t,i){return uc(n.eventCache,new Dt(e,t,i))}function Qa(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function zn(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var uh,xx=()=>(uh||(uh=new qe(RN)),uh),Re=class n{static fromObject(e){let t=new n(null);return xe(e,(i,r)=>{t=t.set(new Q(i),r)}),t}constructor(e,t=xx()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:W(),value:this.value};if(O(e))return null;{let i=P(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(X(e),t);return s!=null?{path:ge(new Q(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(O(e))return this;{let t=P(e),i=this.children.get(t);return i!==null?i.subtree(X(e)):new n(null)}}set(e,t){if(O(e))return new n(t,this.children);{let i=P(e),s=(this.children.get(i)||new n(null)).set(X(e),t),o=this.children.insert(i,s);return new n(this.value,o)}}remove(e){if(O(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=P(e),i=this.children.get(t);if(i){let r=i.remove(X(e)),s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(O(e))return this.value;{let t=P(e),i=this.children.get(t);return i?i.get(X(e)):null}}setTree(e,t){if(O(e))return t;{let i=P(e),s=(this.children.get(i)||new n(null)).setTree(X(e),t),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(e){return this.fold_(W(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ge(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,W(),t)}findOnPath_(e,t,i){let r=this.value?i(t,this.value):!1;if(r)return r;if(O(e))return null;{let s=P(e),o=this.children.get(s);return o?o.findOnPath_(X(e),ge(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,W(),t)}foreachOnPath_(e,t,i){if(O(e))return this;{this.value&&i(t,this.value);let r=P(e),s=this.children.get(r);return s?s.foreachOnPath_(X(e),ge(t,r),i):new n(null)}}foreach(e){this.foreach_(W(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(ge(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}};var ot=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Re(null))}};function os(n,e,t){if(O(e))return new ot(new Re(t));{let i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=Ae(r,e);return s=s.updateChild(o,t),new ot(n.writeTree_.set(r,s))}else{let r=new Re(t),s=n.writeTree_.setTree(e,r);return new ot(s)}}}function tw(n,e,t){let i=n;return xe(t,(r,s)=>{i=os(i,ge(e,r),s)}),i}function nw(n,e){if(O(e))return ot.empty();{let t=n.writeTree_.setTree(e,new Re(null));return new ot(t)}}function $h(n,e){return Kn(n,e)!=null}function Kn(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Ae(t.path,e)):null}function iw(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(oe,(i,r)=>{e.push(new k(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new k(i,r.value))}),e}function an(n,e){if(O(e))return n;{let t=Kn(n,e);return t!=null?new ot(new Re(t)):new ot(n.writeTree_.subtree(e))}}function Wh(n){return n.writeTree_.isEmpty()}function zi(n,e){return qw(W(),n.writeTree_,e)}function qw(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=qw(ge(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(ge(n,".priority"),i)),t}}function dc(n,e){return Qw(e,n)}function Rx(n,e,t,i,r){m(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=os(n.visibleWrites,e,t)),n.lastWriteId=i}function Px(n,e){for(let t=0;t<n.allWrites.length;t++){let i=n.allWrites[t];if(i.writeId===e)return i}return null}function kx(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);m(t>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&Ox(a,i.path)?r=!1:st(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return Fx(n),!0;if(i.snap)n.visibleWrites=nw(n.visibleWrites,i.path);else{let a=i.children;xe(a,c=>{n.visibleWrites=nw(n.visibleWrites,ge(i.path,c))})}return!0}else return!1}function Ox(n,e){if(n.snap)return st(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&st(ge(n.path,t),e))return!0;return!1}function Fx(n){n.visibleWrites=Kw(n.allWrites,Lx,W()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Lx(n){return n.visible}function Kw(n,e,t){let i=ot.empty();for(let r=0;r<n.length;++r){let s=n[r];if(e(s)){let o=s.path,a;if(s.snap)st(t,o)?(a=Ae(t,o),i=os(i,a,s.snap)):st(o,t)&&(a=Ae(o,t),i=os(i,W(),s.snap.getChild(a)));else if(s.children){if(st(t,o))a=Ae(t,o),i=tw(i,a,s.children);else if(st(o,t))if(a=Ae(o,t),O(a))i=tw(i,W(),s.children);else{let c=Zt(s.children,P(a));if(c){let l=c.getChild(X(a));i=os(i,W(),l)}}}else throw kn("WriteRecord should have .snap or .children")}}return i}function Yw(n,e,t,i,r){if(!i&&!r){let s=Kn(n.visibleWrites,e);if(s!=null)return s;{let o=an(n.visibleWrites,e);if(Wh(o))return t;if(t==null&&!$h(o,W()))return null;{let a=t||N.EMPTY_NODE;return zi(o,a)}}}else{let s=an(n.visibleWrites,e);if(!r&&Wh(s))return t;if(!r&&t==null&&!$h(s,W()))return null;{let o=function(l){return(l.visible||r)&&(!i||!~i.indexOf(l.writeId))&&(st(l.path,e)||st(e,l.path))},a=Kw(n.allWrites,o,e),c=t||N.EMPTY_NODE;return zi(a,c)}}}function Vx(n,e,t){let i=N.EMPTY_NODE,r=Kn(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(oe,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){let s=an(n.visibleWrites,e);return t.forEachChild(oe,(o,a)=>{let c=zi(an(s,new Q(o)),a);i=i.updateImmediateChild(o,c)}),iw(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=an(n.visibleWrites,e);return iw(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function jx(n,e,t,i,r){m(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=ge(e,t);if($h(n.visibleWrites,s))return null;{let o=an(n.visibleWrites,s);return Wh(o)?r.getChild(t):zi(o,r.getChild(t))}}function Bx(n,e,t,i){let r=ge(e,t),s=Kn(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){let o=an(n.visibleWrites,r);return zi(o,i.getNode().getImmediateChild(t))}else return null}function Ux(n,e){return Kn(n.visibleWrites,e)}function Hx(n,e,t,i,r,s,o){let a,c=an(n.visibleWrites,e),l=Kn(c,W());if(l!=null)a=l;else if(t!=null)a=zi(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),f=h.getNext();for(;f&&u.length<r;)d(f,i)!==0&&u.push(f),f=h.getNext();return u}else return[]}function $x(){return{visibleWrites:ot.empty(),allWrites:[],lastWriteId:-1}}function Ja(n,e,t,i){return Yw(n.writeTree,n.treePath,e,t,i)}function _f(n,e){return Vx(n.writeTree,n.treePath,e)}function rw(n,e,t,i){return jx(n.writeTree,n.treePath,e,t,i)}function Xa(n,e){return Ux(n.writeTree,ge(n.treePath,e))}function Wx(n,e,t,i,r,s){return Hx(n.writeTree,n.treePath,e,t,i,r,s)}function yf(n,e,t){return Bx(n.writeTree,n.treePath,e,t)}function Zw(n,e){return Qw(ge(n.treePath,e),n.writeTree)}function Qw(n,e){return{treePath:n,writeTree:e}}var Gh=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;m(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),m(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,ls(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,cs(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,Wi(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,ls(i,e.snapshotNode,r.oldSnap));else throw kn("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var zh=class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}},Jw=new zh,ds=class{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new Dt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yf(this.writes_,e,i)}}getChildAfterChild(e,t,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zn(this.viewCache_),s=Wx(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}};function Gx(n){return{filter:n}}function zx(n,e){m(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function qx(n,e,t,i,r){let s=new Gh,o,a;if(t.type===Et.OVERWRITE){let l=t;l.source.fromUser?o=qh(n,e,l.path,l.snap,i,r,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!O(l.path),o=ec(n,e,l.path,l.snap,i,r,a,s))}else if(t.type===Et.MERGE){let l=t;l.source.fromUser?o=Yx(n,e,l.path,l.children,i,r,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Kh(n,e,l.path,l.children,i,r,a,s))}else if(t.type===Et.ACK_USER_WRITE){let l=t;l.revert?o=Jx(n,e,l.path,i,r,s):o=Zx(n,e,l.path,l.affectedTree,i,r,s)}else if(t.type===Et.LISTEN_COMPLETE)o=Qx(n,e,t.path,i,s);else throw kn("Unknown operation type: "+t.type);let c=s.getChanges();return Kx(e,o,c),{viewCache:o,changes:c}}function Kx(n,e,t){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Qa(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push($w(Qa(e)))}}function Xw(n,e,t,i,r,s){let o=e.eventCache;if(Xa(i,t)!=null)return e;{let a,c;if(O(t))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=zn(e),u=l instanceof N?l:N.EMPTY_NODE,d=_f(i,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Ja(i,zn(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=P(t);if(l===".priority"){m(ln(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=rw(i,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=X(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=rw(i,t,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=yf(i,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,r,s):a=o.getNode()}}return ss(e,a,o.isFullyInitialized()||O(t),n.filter.filtersNodes())}}function ec(n,e,t,i,r,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(O(t))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(t,i);l=u.updateFullNode(c.getNode(),f,null)}else{let f=P(t);if(!c.isCompleteForPath(t)&&ln(t)>1)return e;let g=X(t),I=c.getNode().getImmediateChild(f).updateChild(g,i);f===".priority"?l=u.updatePriority(c.getNode(),I):l=u.updateChild(c.getNode(),f,I,g,Jw,null)}let d=zw(e,l,c.isFullyInitialized()||O(t),u.filtersNodes()),h=new ds(r,d,s);return Xw(n,d,t,r,h,a)}function qh(n,e,t,i,r,s,o){let a=e.eventCache,c,l,u=new ds(r,e,s);if(O(t))l=n.filter.updateFullNode(e.eventCache.getNode(),i,o),c=ss(e,l,!0,n.filter.filtersNodes());else{let d=P(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),i),c=ss(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=X(t),f=a.getNode().getImmediateChild(d),g;if(O(h))g=i;else{let _=u.getCompleteChild(d);_!=null?Ow(h)===".priority"&&_.getChild(Lw(h)).isEmpty()?g=_:g=_.updateChild(h,i):g=N.EMPTY_NODE}if(f.equals(g))c=e;else{let _=n.filter.updateChild(a.getNode(),d,g,h,u,o);c=ss(e,_,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function sw(n,e){return n.eventCache.isCompleteForChild(e)}function Yx(n,e,t,i,r,s,o){let a=e;return i.foreach((c,l)=>{let u=ge(t,c);sw(e,P(u))&&(a=qh(n,a,u,l,r,s,o))}),i.foreach((c,l)=>{let u=ge(t,c);sw(e,P(u))||(a=qh(n,a,u,l,r,s,o))}),a}function ow(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Kh(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;O(t)?l=i:l=new Re(null).setTree(t,i);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),g=ow(n,f,h);c=ec(n,c,new Q(d),g,r,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let g=e.serverCache.getNode().getImmediateChild(d),_=ow(n,g,h);c=ec(n,c,new Q(d),_,r,s,o,a)}}),c}function Zx(n,e,t,i,r,s,o){if(Xa(r,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(O(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return ec(n,e,t,c.getNode().getChild(t),r,s,a,o);if(O(t)){let l=new Re(null);return c.getNode().forEachChild(ji,(u,d)=>{l=l.set(new Q(u),d)}),Kh(n,e,t,l,r,s,a,o)}else return e}else{let l=new Re(null);return i.foreach((u,d)=>{let h=ge(t,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),Kh(n,e,t,l,r,s,a,o)}}function Qx(n,e,t,i,r){let s=e.serverCache,o=zw(e,s.getNode(),s.isFullyInitialized()||O(t),s.isFiltered());return Xw(n,o,t,i,Jw,r)}function Jx(n,e,t,i,r,s){let o;if(Xa(i,t)!=null)return e;{let a=new ds(i,e,r),c=e.eventCache.getNode(),l;if(O(t)||P(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Ja(i,zn(e));else{let d=e.serverCache.getNode();m(d instanceof N,"serverChildren would be complete if leaf node"),u=_f(i,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=P(t),d=yf(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,X(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,N.EMPTY_NODE,X(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ja(i,zn(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Xa(i,W())!=null,ss(e,l,o,n.filter.filtersNodes())}}var Yh=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new us(i.getIndex()),s=Cx(i);this.processor_=Gx(s);let o=t.serverCache,a=t.eventCache,c=r.updateFullNode(N.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(N.EMPTY_NODE,a.getNode(),null),u=new Dt(c,o.isFullyInitialized(),r.filtersNodes()),d=new Dt(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=uc(d,u),this.eventGenerator_=new Hh(this.query_)}get query(){return this.query_}};function Xx(n){return n.viewCache_.serverCache.getNode()}function eR(n){return Qa(n.viewCache_)}function tR(n,e){let t=zn(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!O(e)&&!t.getImmediateChild(P(e)).isEmpty())?t.getChild(e):null}function aw(n){return n.eventRegistrations_.length===0}function nR(n,e){n.eventRegistrations_.push(e)}function cw(n,e,t){let i=[];if(t){m(e==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function lw(n,e,t,i){e.type===Et.MERGE&&e.source.queryId!==null&&(m(zn(n.viewCache_),"We should always have a full cache before handling merges"),m(Qa(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=qx(n.processor_,r,e,t,i);return zx(n.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,eI(n,s.changes,s.viewCache.eventCache.getNode(),null)}function iR(n,e){let t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(oe,(s,o)=>{i.push(Wi(s,o))}),t.isFullyInitialized()&&i.push($w(t.getNode())),eI(n,i,t.getNode(),e)}function eI(n,e,t,i){let r=i?[i]:n.eventRegistrations_;return Ax(n.eventGenerator_,e,t,r)}var tc,nc=class{constructor(){this.views=new Map}};function rR(n){m(!tc,"__referenceConstructor has already been defined"),tc=n}function sR(){return m(tc,"Reference.ts has not been loaded"),tc}function oR(n){return n.views.size===0}function vf(n,e,t,i){let r=e.source.queryId;if(r!==null){let s=n.views.get(r);return m(s!=null,"SyncTree gave us an op for an invalid query."),lw(s,e,t,i)}else{let s=[];for(let o of n.views.values())s=s.concat(lw(o,e,t,i));return s}}function tI(n,e,t,i,r){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Ja(t,r?i:null),c=!1;a?c=!0:i instanceof N?(a=_f(t,i),c=!1):(a=N.EMPTY_NODE,c=!1);let l=uc(new Dt(a,c,!1),new Dt(i,r,!1));return new Yh(e,l)}return o}function aR(n,e,t,i,r,s){let o=tI(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),nR(o,t),iR(o,t)}function cR(n,e,t,i){let r=e._queryIdentifier,s=[],o=[],a=un(n);if(r==="default")for(let[c,l]of n.views.entries())o=o.concat(cw(l,t,i)),aw(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(r);c&&(o=o.concat(cw(c,t,i)),aw(c)&&(n.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!un(n)&&s.push(new(sR())(e._repo,e._path)),{removed:s,events:o}}function nI(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function cn(n,e){let t=null;for(let i of n.views.values())t=t||tR(i,e);return t}function iI(n,e){if(e._queryParams.loadsAllData())return hc(n);{let i=e._queryIdentifier;return n.views.get(i)}}function rI(n,e){return iI(n,e)!=null}function un(n){return hc(n)!=null}function hc(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var ic;function lR(n){m(!ic,"__referenceConstructor has already been defined"),ic=n}function uR(){return m(ic,"Reference.ts has not been loaded"),ic}var dR=1,rc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Re(null),this.pendingWriteTree_=$x(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function wf(n,e,t,i,r){return Rx(n.pendingWriteTree_,e,t,i,r),r?ys(n,new Gi(Gw(),e,t)):[]}function $n(n,e,t=!1){let i=Px(n.pendingWriteTree_,e);if(kx(n.pendingWriteTree_,e)){let s=new Re(null);return i.snap!=null?s=s.set(W(),!0):xe(i.children,o=>{s=s.set(new Q(o),!0)}),ys(n,new Uh(i.path,s,t))}else return[]}function _s(n,e,t){return ys(n,new Gi(gf(),e,t))}function hR(n,e,t){let i=Re.fromObject(t);return ys(n,new Za(gf(),e,i))}function fR(n,e){return ys(n,new Ya(gf(),e))}function pR(n,e,t){let i=If(n,t);if(i){let r=Ef(i),s=r.path,o=r.queryId,a=Ae(s,e),c=new Ya(mf(o),a);return Df(n,s,c)}else return[]}function sc(n,e,t,i,r=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||rI(o,e))){let c=cR(o,e,t,i);oR(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!r){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(h,f)=>un(f));if(u&&!d){let h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=_R(h);for(let g=0;g<f.length;++g){let _=f[g],I=_.query,x=cI(n,_);n.listenProvider_.startListening(as(I),hs(n,I),x.hashFn,x.onComplete)}}}!d&&l.length>0&&!i&&(u?n.listenProvider_.stopListening(as(e),null):l.forEach(h=>{let f=n.queryToTagMap.get(pc(h));n.listenProvider_.stopListening(as(h),f)}))}yR(n,l)}return a}function sI(n,e,t,i){let r=If(n,i);if(r!=null){let s=Ef(r),o=s.path,a=s.queryId,c=Ae(o,e),l=new Gi(mf(a),c,t);return Df(n,o,l)}else return[]}function gR(n,e,t,i){let r=If(n,i);if(r){let s=Ef(r),o=s.path,a=s.queryId,c=Ae(o,e),l=Re.fromObject(t),u=new Za(mf(a),c,l);return Df(n,o,u)}else return[]}function Zh(n,e,t,i=!1){let r=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(h,f)=>{let g=Ae(h,r);s=s||cn(f,g),o=o||un(f)});let a=n.syncPointTree_.get(r);a?(o=o||un(a),s=s||cn(a,W())):(a=new nc,n.syncPointTree_=n.syncPointTree_.set(r,a));let c;s!=null?c=!0:(c=!1,s=N.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((f,g)=>{let _=cn(g,W());_&&(s=s.updateImmediateChild(f,_))}));let l=rI(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=pc(e);m(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=vR();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let u=dc(n.pendingWriteTree_,r),d=aR(a,e,t,u,s,c);if(!l&&!o&&!i){let h=iI(a,e);d=d.concat(wR(n,e,h))}return d}function fc(n,e,t){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ae(o,e),l=cn(a,c);if(l)return l});return Yw(r,e,s,t,!0)}function mR(n,e){let t=e._path,i=null;n.syncPointTree_.foreachOnPath(t,(l,u)=>{let d=Ae(l,t);i=i||cn(u,d)});let r=n.syncPointTree_.get(t);r?i=i||cn(r,W()):(r=new nc,n.syncPointTree_=n.syncPointTree_.set(t,r));let s=i!=null,o=s?new Dt(i,!0,!1):null,a=dc(n.pendingWriteTree_,e._path),c=tI(r,e,a,s?o.getNode():N.EMPTY_NODE,s);return eR(c)}function ys(n,e){return oI(e,n.syncPointTree_,null,dc(n.pendingWriteTree_,W()))}function oI(n,e,t,i){if(O(n.path))return aI(n,e,t,i);{let r=e.get(W());t==null&&r!=null&&(t=cn(r,W()));let s=[],o=P(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=Zw(i,o);s=s.concat(oI(a,c,l,u))}return r&&(s=s.concat(vf(r,n,i,t))),s}}function aI(n,e,t,i){let r=e.get(W());t==null&&r!=null&&(t=cn(r,W()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=Zw(i,o),u=n.operationForChild(o);u&&(s=s.concat(aI(u,a,c,l)))}),r&&(s=s.concat(vf(r,n,i,t))),s}function cI(n,e){let t=e.query,i=hs(n,t);return{hashFn:()=>(Xx(e)||N.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?pR(n,t._path,i):fR(n,t._path);{let s=ON(r,t);return sc(n,t,null,s)}}}}function hs(n,e){let t=pc(e);return n.queryToTagMap.get(t)}function pc(n){return n._path.toString()+"$"+n._queryIdentifier}function If(n,e){return n.tagToQueryMap.get(e)}function Ef(n){let e=n.indexOf("$");return m(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Q(n.substr(0,e))}}function Df(n,e,t){let i=n.syncPointTree_.get(e);m(i,"Missing sync point for query tag that we're tracking");let r=dc(n.pendingWriteTree_,e);return vf(i,t,r,null)}function _R(n){return n.fold((e,t,i)=>{if(t&&un(t))return[hc(t)];{let r=[];return t&&(r=nI(t)),xe(i,(s,o)=>{r=r.concat(o)}),r}})}function as(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(uR())(n._repo,n._path):n}function yR(n,e){for(let t=0;t<e.length;++t){let i=e[t];if(!i._queryParams.loadsAllData()){let r=pc(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function vR(){return dR++}function wR(n,e,t){let i=e._path,r=hs(n,e),s=cI(n,t),o=n.listenProvider_.startListening(as(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)m(!un(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!O(l)&&u&&un(u))return[hc(u).query];{let h=[];return u&&(h=h.concat(nI(u).map(f=>f.query))),xe(d,(f,g)=>{h=h.concat(g)}),h}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening(as(u),hs(n,u))}}return o}var Qh=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},Jh=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=ge(this.path_,e);return new n(this.syncTree_,t)}node(){return fc(this.syncTree_,this.path_)}},IR=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},uw=function(n,e,t){if(!n||typeof n!="object")return n;if(m(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return ER(n[".sv"],e,t);if(typeof n[".sv"]=="object")return DR(n[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},ER=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:m(!1,"Unexpected server value: "+n)}},DR=function(n,e,t){n.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&m(!1,"Unexpected increment value: "+i);let r=e.node();if(m(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},CR=function(n,e,t,i){return bf(e,new Jh(t,n),i)},Cf=function(n,e,t){return bf(n,new Qh(e),t)};function bf(n,e,t){let i=n.getPriority().val(),r=uw(i,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=uw(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new Hi(a,pe(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Hi(r))),o.forEachChild(oe,(a,c)=>{let l=bf(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var fs=class{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}};function gc(n,e){let t=e instanceof Q?e:new Q(e),i=n,r=P(t);for(;r!==null;){let s=Zt(i.node.children,r)||{children:{},childCount:0};i=new fs(r,i,s),t=X(t),r=P(t)}return i}function Yn(n){return n.node.value}function Tf(n,e){n.node.value=e,Xh(n)}function lI(n){return n.node.childCount>0}function bR(n){return Yn(n)===void 0&&!lI(n)}function mc(n,e){xe(n.node.children,(t,i)=>{e(new fs(t,n,i))})}function uI(n,e,t,i){t&&!i&&e(n),mc(n,r=>{uI(r,e,!0,i)}),t&&i&&e(n)}function TR(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function vs(n){return new Q(n.parent===null?n.name:vs(n.parent)+"/"+n.name)}function Xh(n){n.parent!==null&&SR(n.parent,n.name,n)}function SR(n,e,t){let i=bR(t),r=Ge(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,Xh(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,Xh(n))}var AR=/[\[\].#$\/\u0000-\u001F\u007F]/,MR=/[\[\].#$\u0000-\u001F\u007F]/,dh=10*1024*1024,dI=function(n){return typeof n=="string"&&n.length!==0&&!AR.test(n)},hI=function(n){return typeof n=="string"&&n.length!==0&&!MR.test(n)},NR=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hI(n)},xR=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!lf(n)||n&&typeof n=="object"&&Ge(n,".sv")},RR=function(n,e,t,i){i&&e===void 0||_c(fa(n,"value"),e,t)},_c=function(n,e,t){let i=t instanceof Q?new bh(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Un(i));if(typeof e=="function")throw new Error(n+"contains a function "+Un(i)+" with contents = "+e.toString());if(lf(e))throw new Error(n+"contains "+e.toString()+" "+Un(i));if(typeof e=="string"&&e.length>dh/3&&Hr(e)>dh)throw new Error(n+"contains a string greater than "+dh+" utf8 bytes "+Un(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(xe(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!dI(o)))throw new Error(n+" contains an invalid key ("+o+") "+Un(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ux(i,o),_c(n,a,i),dx(i)}),r&&s)throw new Error(n+' contains ".value" child '+Un(i)+" in addition to actual children.")}};var fI=function(n,e,t,i){if(!(i&&t===void 0)&&!hI(t))throw new Error(fa(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},PR=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),fI(n,e,t,i)},pI=function(n,e){if(P(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},kR=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!dI(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!NR(t))throw new Error(fa(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var ef=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Sf(n,e){let t=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();t!==null&&!hf(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function gI(n,e,t){Sf(n,t),mI(n,i=>hf(i,e))}function at(n,e,t){Sf(n,t),mI(n,i=>st(i,e)||st(e,i))}function mI(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;e(s)?(OR(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function OR(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let i=t.getEventRunner();Wn&&Ce("event: "+t.toString()),Yi(i)}}}var FR="repo_interrupt",LR=25,tf=class{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ef,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ka(),this.transactionQueueTree_=new fs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function VR(n,e,t){if(n.stats_=df(n.repoInfo_),n.forceRestClient_||jN())n.server_=new Fh(n.repoInfo_,(i,r,s,o)=>{dw(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>hw(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{fe(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ff(n.repoInfo_,e,(i,r,s,o)=>{dw(n,i,r,s,o)},i=>{hw(n,i)},i=>{BR(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=UN(n.repoInfo_,()=>new Bh(n.stats_,n.server_)),n.infoData_=new Lh,n.infoSyncTree_=new rc({startListening:(i,r,s,o)=>{let a=[],c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=_s(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Af(n,"connected",!1),n.serverSyncTree_=new rc({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{let l=o(a,c);at(n.eventQueue_,i._path,l)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function jR(n){let t=n.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function yc(n){return IR({timestamp:jR(n)})}function dw(n,e,t,i,r){n.dataUpdateCount++;let s=new Q(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){let c=Ur(t,l=>pe(l));o=gR(n.serverSyncTree_,s,c,r)}else{let c=pe(t);o=sI(n.serverSyncTree_,s,c,r)}else if(i){let c=Ur(t,l=>pe(l));o=hR(n.serverSyncTree_,s,c)}else{let c=pe(t);o=_s(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=wc(n,s)),at(n.eventQueue_,a,o)}function hw(n,e){Af(n,"connected",e),e===!1&&$R(n)}function BR(n,e){xe(e,(t,i)=>{Af(n,t,i)})}function Af(n,e,t){let i=new Q("/.info/"+e),r=pe(t);n.infoData_.updateSnapshot(i,r);let s=_s(n.infoSyncTree_,i,r);at(n.eventQueue_,i,s)}function Mf(n){return n.nextWriteId_++}function UR(n,e,t){let i=mR(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(r=>{let s=pe(r).withIndex(e._queryParams.getIndex());Zh(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=_s(n.serverSyncTree_,e._path,s);else{let a=hs(n.serverSyncTree_,e);o=sI(n.serverSyncTree_,e._path,s,a)}return at(n.eventQueue_,e._path,o),sc(n.serverSyncTree_,e,t,null,!0),s},r=>(ws(n,"get for query "+fe(e)+" failed: "+r),Promise.reject(new Error(r))))}function HR(n,e,t,i,r){ws(n,"set",{path:e.toString(),value:t,priority:i});let s=yc(n),o=pe(t,i),a=fc(n.serverSyncTree_,e),c=Cf(o,a,s),l=Mf(n),u=wf(n.serverSyncTree_,e,c,l,!0);Sf(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{let g=h==="ok";g||Ne("set at "+e+" failed: "+h);let _=$n(n.serverSyncTree_,l,!g);at(n.eventQueue_,e,_),zR(n,r,h,f)});let d=wI(n,e);wc(n,d),at(n.eventQueue_,d,[])}function $R(n){ws(n,"onDisconnectEvents");let e=yc(n),t=Ka();Vh(n.onDisconnect_,W(),(r,s)=>{let o=CR(r,s,n.serverSyncTree_,e);Ww(t,r,o)});let i=[];Vh(t,W(),(r,s)=>{i=i.concat(_s(n.serverSyncTree_,r,s));let o=wI(n,r);wc(n,o)}),n.onDisconnect_=Ka(),at(n.eventQueue_,W(),i)}function WR(n,e,t){let i;P(e._path)===".info"?i=Zh(n.infoSyncTree_,e,t):i=Zh(n.serverSyncTree_,e,t),gI(n.eventQueue_,e._path,i)}function fw(n,e,t){let i;P(e._path)===".info"?i=sc(n.infoSyncTree_,e,t):i=sc(n.serverSyncTree_,e,t),gI(n.eventQueue_,e._path,i)}function GR(n){n.persistentConnection_&&n.persistentConnection_.interrupt(FR)}function ws(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ce(t,...e)}function zR(n,e,t,i){e&&Yi(()=>{if(t==="ok")e(null);else{let r=(t||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,e(o)}})}function qR(n,e,t,i,r,s){ws(n,"transaction on "+e);let o={path:e,update:t,onComplete:i,status:null,order:mw(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Nf(n,e,void 0);o.currentInputSnapshot=a;let c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{_c("transaction failed: Data returned ",c,o.path),o.status=0;let l=gc(n.transactionQueueTree_,e),u=Yn(l)||[];u.push(o),Tf(l,u);let d;typeof c=="object"&&c!==null&&Ge(c,".priority")?(d=Zt(c,".priority"),m(xR(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(fc(n.serverSyncTree_,e)||N.EMPTY_NODE).getPriority().val();let h=yc(n),f=pe(c,d),g=Cf(f,a,h);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=g,o.currentWriteId=Mf(n);let _=wf(n.serverSyncTree_,e,g,o.currentWriteId,o.applyLocally);at(n.eventQueue_,e,_),vc(n,n.transactionQueueTree_)}}function Nf(n,e,t){return fc(n.serverSyncTree_,e,t)||N.EMPTY_NODE}function vc(n,e=n.transactionQueueTree_){if(e||Ic(n,e),Yn(e)){let t=yI(n,e);m(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&KR(n,vs(e),t)}else lI(e)&&mc(e,t=>{vc(n,t)})}function KR(n,e,t){let i=t.map(l=>l.currentWriteId),r=Nf(n,e,i),s=r,o=r.hash();for(let l=0;l<t.length;l++){let u=t[l];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ae(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{ws(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat($n(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();Ic(n,gc(n.transactionQueueTree_,e)),vc(n,n.transactionQueueTree_),at(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)Yi(d[h])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Ne("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}wc(n,e)}},o)}function wc(n,e){let t=_I(n,e),i=vs(t),r=yI(n,t);return YR(n,r,i),i}function YR(n,e,t){if(e.length===0)return;let i=[],r=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ae(t,c.path),u=!1,d;if(m(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,r=r.concat($n(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=LR)u=!0,d="maxretry",r=r.concat($n(n.serverSyncTree_,c.currentWriteId,!0));else{let h=Nf(n,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){_c("transaction failed: Data returned ",f,c.path);let g=pe(f);typeof f=="object"&&f!=null&&Ge(f,".priority")||(g=g.updatePriority(h.getPriority()));let I=c.currentWriteId,x=yc(n),ae=Cf(g,h,x);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=ae,c.currentWriteId=Mf(n),o.splice(o.indexOf(I),1),r=r.concat(wf(n.serverSyncTree_,c.path,ae,c.currentWriteId,c.applyLocally)),r=r.concat($n(n.serverSyncTree_,I,!0))}else u=!0,d="nodata",r=r.concat($n(n.serverSyncTree_,c.currentWriteId,!0))}at(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}Ic(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Yi(i[a]);vc(n,n.transactionQueueTree_)}function _I(n,e){let t,i=n.transactionQueueTree_;for(t=P(e);t!==null&&Yn(i)===void 0;)i=gc(i,t),e=X(e),t=P(e);return i}function yI(n,e){let t=[];return vI(n,e,t),t.sort((i,r)=>i.order-r.order),t}function vI(n,e,t){let i=Yn(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);mc(e,r=>{vI(n,r,t)})}function Ic(n,e){let t=Yn(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,Tf(e,t.length>0?t:void 0)}mc(e,i=>{Ic(n,i)})}function wI(n,e){let t=vs(_I(n,e)),i=gc(n.transactionQueueTree_,e);return TR(i,r=>{hh(n,r)}),hh(n,i),uI(i,r=>{hh(n,r)}),t}function hh(n,e){let t=Yn(e);if(t){let i=[],r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(m(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat($n(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Tf(e,void 0):t.length=s+1,at(n.eventQueue_,vs(e),r);for(let o=0;o<i.length;o++)Yi(i[o])}}function ZR(n){let e="",t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function QR(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ne(`Invalid query segment '${t}' in query '${n}'`)}return e}var pw=function(n,e){let t=JR(n),i=t.namespace;t.domain==="firebase.com"&&Ft(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Ft("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||NN();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Ba(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new Q(t.pathString)}},JR=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(r=ZR(n.substring(u,d)));let h=QR(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")t="localhost";else if(f.split(".").length<=2)t=f;else{let g=e.indexOf(".");i=e.substring(0,g).toLowerCase(),t=e.substring(g+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var oc=class{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+fe(this.snapshot.exportVal())}},ac=class{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var cc=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var nf=class n{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return O(this._path)?null:Ow(this._path)}get ref(){return new ct(this._repo,this._path)}get _queryIdentifier(){let e=Xv(this._queryParams),t=uf(e);return t==="{}"?"default":t}get _queryObject(){return Xv(this._queryParams)}isEqual(e){if(e=De(e),!(e instanceof n))return!1;let t=this._repo===e._repo,i=hf(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+lx(this._path)}};var ct=class n extends nf{constructor(e,t){super(e,t,new Oh,!1)}get parent(){let e=Lw(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},qi=class n{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new Q(e),i=qn(this.ref,e);return new n(this._node.getChild(t),i,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new n(r,qn(this.ref,i),oe)))}hasChild(e){let t=new Q(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function dn(n,e){return n=De(n),n._checkNotDeleted("ref"),e!==void 0?qn(n._root,e):n._root}function qn(n,e){return n=De(n),P(n._path)===null?PR("child","path",e,!1):fI("child","path",e,!1),new ct(n._repo,ge(n._path,e))}function II(n,e){n=De(n),pI("set",n._path),RR("set",e,n._path,!1);let t=new xt;return HR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Ec(n){n=De(n);let e=new cc(()=>{}),t=new lc(e);return UR(n._repo,n,t).then(i=>new qi(i,new ct(n._repo,n._path),n._queryParams.getIndex()))}var lc=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let i=t._queryParams.getIndex();return new oc("value",this,new qi(e.snapshotNode,new ct(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ac(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},rf=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ac(this,e,t):null}createEvent(e,t){m(e.childName!=null,"Child events should have a childName.");let i=qn(new ct(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new oc(e.type,this,new qi(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function XR(n,e,t,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let c=t,l=(u,d)=>{fw(n._repo,n,a),c(u,d)};l.userCallback=t.userCallback,l.context=t.context,t=l}let o=new cc(t,s||void 0),a=e==="value"?new lc(o):new rf(e,o);return WR(n._repo,n,a),()=>fw(n._repo,n,a)}function Dc(n,e,t,i){return XR(n,"value",e,t,i)}rR(ct);lR(ct);var eP="FIREBASE_DATABASE_EMULATOR_HOST",sf={},tP=!1;function nP(n,e,t,i){let r=e.lastIndexOf(":"),s=e.substring(0,r),o=Yt(s);n.repoInfo_=new Ba(e,o,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function iP(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||Ft("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ce("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=pw(s,r),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[eP]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=pw(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let u=r&&c?new rs(rs.OWNER):new yh(n.name,n.options,e);kR("Invalid Firebase Database URL",o),O(o.path)||Ft("Database URL must point to the root of a Firebase Database (not including a child path).");let d=sP(a,n,u,new _h(n,t));return new of(d,n)}function rP(n,e){let t=sf[e];(!t||t[n.key]!==n)&&Ft(`Database ${e}(${n.repoInfo_}) has already been deleted.`),GR(n),delete t[n.key]}function sP(n,e,t,i){let r=sf[e.name];r||(r={},sf[e.name]=r);let s=r[n.toURLString()];return s&&Ft("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new tf(n,tP,t,i),r[n.toURLString()]=s,s}var of=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(VR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ct(this._repo,W())),this._rootInternal}_delete(){return this._rootInternal!==null&&(rP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ft("Cannot call "+e+" on a deleted database.")}};function EI(n=_a(),e){let t=Gr(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let i=my("database");i&&oP(t,...i)}return t}function oP(n,e,t,i={}){n=De(n),n._checkNotDeleted("useEmulator");let r=`${e}:${t}`,s=n._repoInternal;if(n._instanceStarted){if(r===n._repoInternal.repoInfo_.host&&vt(i,s.repoInfo_.emulatorOptions))return;Ft("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Ft('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new rs(rs.OWNER);else if(i.mockUserToken){let a=typeof i.mockUserToken=="string"?i.mockUserToken:_y(i.mockUserToken,n.app.options.projectId);o=new rs(a)}Yt(e)&&(ua(e),da("Database",!0)),nP(s,r,i,o)}function aP(n){AN(en),Xt(new ze("database",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return iP(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),it(Fv,Lv,n),it(Fv,Lv,"esm2020")}var af=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function xf(n,e,t){if(n=De(n),pI("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let i=t?.applyLocally??!0,r=new xt,s=(a,c,l)=>{let u=null;a?r.reject(a):(u=new qi(l,new ct(n._repo,n._path),oe),r.resolve(new af(c,u)))},o=Dc(n,()=>{});return qR(n._repo,n._path,e,s,o,i),r.promise}ff.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ff.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};aP();function cP(n,e){if(n&1){let t=tt();y(0,"button",8),q("click",function(){let r=H(t).$implicit,s=w();return $(s.selectedTab=r.key)}),D(1),v()}if(n&2){let t=e.$implicit,i=w();$e("active",i.selectedTab===t.key),xn("aria-selected",i.selectedTab===t.key),b(),Rn(" ",t.label," ")}}function lP(n,e){if(n&1&&(y(0,"div",9),D(1),v()),n&2){let t=w();b(),we(t.bannerText)}}function uP(n,e){if(n&1){let t=tt();y(0,"div",27),q("click",function(){H(t);let r=w().$implicit,s=w(2);return $(s.toggleAction(r))}),y(1,"div",28)(2,"div",29),D(3),v(),y(4,"div",30),D(5),v()()()}if(n&2){let t=w().$implicit,i=w(2);$e("active",i.pointsDayStates[t.id]),b(3),we(t.name),b(2),Rn("",t.points," points")}}function dP(n,e){if(n&1){let t=tt();y(0,"div",27),q("click",function(){let r=H(t).$implicit,s=w(4);return $(s.toggleAction(r))}),y(1,"div",28)(2,"div",29),D(3),v(),y(4,"div",30),D(5),v()()()}if(n&2){let t=e.$implicit,i=w(4);$e("active",i.pointsDayStates[t.id]),b(3),we(t.name),b(2),Rn("",t.points," points")}}function hP(n,e){if(n&1&&(y(0,"div",31)(1,"div",32),D(2),v(),y(3,"div",33),He(4,dP,6,4,"div",34),v()()),n&2){let t=w().$implicit;b(2),we(t.name),b(2),de("ngForOf",t.children)}}function fP(n,e){if(n&1&&(Tu(0),He(1,uP,6,4,"div",25)(2,hP,5,2,"div",26),Su()),n&2){let t=e.$implicit,i=w(2);b(),de("ngIf",i.isAction(t)),b(),de("ngIf",i.isGroup(t))}}function pP(n,e){n&1&&(y(0,"div",35),D(1,"No actions configured. Add items in Configuration."),v())}function gP(n,e){if(n&1){let t=tt();y(0,"div",36),q("click",function(){let r=H(t).$implicit,s=w(2);return $(s.selectPointsDay(r.key))}),y(1,"div",37),D(2),v(),y(3,"div",38),D(4),v()()}if(n&2){let t=e.$implicit,i=w(2);$e("selected",t.key===i.ymd(i.selectedPointsDay)),b(2),we(t.label),b(2),we(t.count)}}function mP(n,e){if(n&1){let t=tt();y(0,"section",10)(1,"div",11)(2,"div",12),D(3),v(),y(4,"div",13),D(5),v(),y(6,"div",14),D(7,"Total points"),v()(),y(8,"div",15),He(9,fP,3,2,"ng-container",16)(10,pP,2,0,"div",17),v(),y(11,"section",18)(12,"div",12),D(13,"This Week"),v(),y(14,"div",19),D(15),v(),y(16,"div",20),He(17,gP,5,4,"div",21),v()(),y(18,"div",22)(19,"button",23),q("click",function(){H(t);let r=w();return $(r.prevPointsWeek())}),D(20,"\u2039"),v(),y(21,"button",24),q("click",function(){H(t);let r=w();return $(r.nextPointsWeek())}),D(22,"\u203A"),v()()()}if(n&2){let t=w();b(3),Rn("Points for ",t.selectedPointsDayLabel,""),b(2),we(t.pointsDayTotal),b(4),de("ngForOf",t.pointItems),b(),de("ngIf",t.pointItems.length===0),b(5),we(t.pointsRangeLabel),b(2),de("ngForOf",t.pointsWeekDays),b(4),de("disabled",!t.canGoNextPointsWeek)}}function _P(n,e){if(n&1&&(y(0,"div",46)(1,"div",37),D(2),v(),y(3,"div",38),D(4),v()()),n&2){let t=e.$implicit;b(2),we(t.label),b(2),we(t.count)}}function yP(n,e){if(n&1){let t=tt();y(0,"section",10)(1,"section",39)(2,"div",12),D(3),v(),y(4,"div",13),D(5),v(),y(6,"button",40),q("click",function(){H(t);let r=w();return $(r.tap())}),D(7,"+1"),v(),y(8,"div",41),D(9),v()(),y(10,"section",42),$o(11,"div",43),y(12,"div",19),D(13),v(),y(14,"div",44),He(15,_P,5,2,"div",45),v()(),y(16,"div",22)(17,"button",23),q("click",function(){H(t);let r=w();return $(r.prevWeek())}),D(18,"\u2039"),v(),y(19,"button",24),q("click",function(){H(t);let r=w();return $(r.nextWeek())}),D(20,"\u203A"),v()()()}if(n&2){let t=w();b(3),we(t.todayLabel),b(2),we(t.todayCount),b(),de("disabled",t.tapBusy||!t.uid),b(3),we(t.status||" "),b(4),we(t.rangeLabel),b(2),de("ngForOf",t.weekDays),b(4),de("disabled",!t.canGoNextWeek)}}function vP(n,e){if(n&1){let t=tt();y(0,"div",61)(1,"div",62),D(2,"Standalone Action"),v(),y(3,"div",63)(4,"label")(5,"span"),D(6,"Name"),v(),y(7,"input",64),zt("ngModelChange",function(r){H(t);let s=w().$implicit;return Pn(s.name,r)||(s.name=r),$(r)}),q("ngModelChange",function(r){H(t);let s=w().$implicit,o=w(2);return $(o.updateActionName(s,r))}),v()(),y(8,"label")(9,"span"),D(10,"Points"),v(),y(11,"input",65),zt("ngModelChange",function(r){H(t);let s=w().$implicit;return Pn(s.points,r)||(s.points=r),$(r)}),q("ngModelChange",function(r){H(t);let s=w().$implicit,o=w(2);return $(o.updateActionPoints(s,r))}),v()()(),y(12,"div",66)(13,"button",55),q("click",function(){H(t);let r=w(),s=r.$implicit,o=r.index,a=w(2);return $(a.duplicateAction(s,o))}),D(14,"Duplicate"),v(),y(15,"button",67),q("click",function(){H(t);let r=w().index,s=w(2);return $(s.removeRootAction(r))}),D(16,"Delete"),v()()()}if(n&2){let t=w().$implicit;b(7),Gt("ngModel",t.name),b(4),Gt("ngModel",t.points)}}function wP(n,e){if(n&1){let t=tt();y(0,"div",71)(1,"div",59),D(2,"\u2630"),v(),y(3,"div",63)(4,"label")(5,"span"),D(6,"Name"),v(),y(7,"input",64),zt("ngModelChange",function(r){let s=H(t).$implicit;return Pn(s.name,r)||(s.name=r),$(r)}),q("ngModelChange",function(r){let s=H(t).$implicit,o=w(4);return $(o.updateActionName(s,r))}),v()(),y(8,"label")(9,"span"),D(10,"Points"),v(),y(11,"input",65),zt("ngModelChange",function(r){let s=H(t).$implicit;return Pn(s.points,r)||(s.points=r),$(r)}),q("ngModelChange",function(r){let s=H(t).$implicit,o=w(4);return $(o.updateActionPoints(s,r))}),v()()(),y(12,"div",66)(13,"button",55),q("click",function(){let r=H(t),s=r.$implicit,o=r.index,a=w(2).$implicit,c=w(2);return $(c.duplicateAction(s,o,a))}),D(14,"Duplicate"),v(),y(15,"button",67),q("click",function(){let r=H(t).index,s=w(2).$implicit,o=w(2);return $(o.removeChildAction(s,r))}),D(16,"Delete"),v()()()}if(n&2){let t=e.$implicit;b(7),Gt("ngModel",t.name),b(4),Gt("ngModel",t.points)}}function IP(n,e){if(n&1){let t=tt();y(0,"div",61)(1,"div",62),D(2,"Group"),v(),y(3,"label",68)(4,"span"),D(5,"Group name"),v(),y(6,"input",64),zt("ngModelChange",function(r){H(t);let s=w().$implicit;return Pn(s.name,r)||(s.name=r),$(r)}),q("ngModelChange",function(r){H(t);let s=w().$implicit,o=w(2);return $(o.updateGroupName(s,r))}),v()(),y(7,"div",66)(8,"button",55),q("click",function(){H(t);let r=w().index,s=w(2);return $(s.duplicateGroup(r))}),D(9,"Duplicate group"),v(),y(10,"button",67),q("click",function(){H(t);let r=w().index,s=w(2);return $(s.removeGroup(r))}),D(11,"Delete group"),v()(),y(12,"div",69),q("cdkDropListDropped",function(r){H(t);let s=w().$implicit,o=w(2);return $(o.dropChild(s,r))}),He(13,wP,17,2,"div",70),v(),y(14,"button",55),q("click",function(){H(t);let r=w().$implicit,s=w(2);return $(s.addChildAction(r))}),D(15,"+ Add action"),v()()}if(n&2){let t=w().$implicit;b(6),Gt("ngModel",t.name),b(6),de("cdkDropListData",t.children),b(),de("ngForOf",t.children)}}function EP(n,e){if(n&1&&(y(0,"div",58)(1,"div",59),D(2,"\u2630"),v(),He(3,vP,17,2,"div",60)(4,IP,16,3,"div",60),v()),n&2){let t=e.$implicit,i=w(2);b(3),de("ngIf",i.isAction(t)),b(),de("ngIf",i.isGroup(t))}}function DP(n,e){if(n&1){let t=tt();y(0,"section",47)(1,"div",48)(2,"div",49)(3,"div")(4,"div",50),D(5,"Global Banner"),v(),y(6,"div",51),D(7,"Leave empty to hide the message bar."),v()(),y(8,"button",52),q("click",function(){H(t);let r=w();return $(r.persistBanner())}),D(9,"Save"),v()(),y(10,"textarea",53),zt("ngModelChange",function(r){H(t);let s=w();return Pn(s.bannerText,r)||(s.bannerText=r),$(r)}),v()(),y(11,"div",48)(12,"div",49)(13,"div",50),D(14,"Points Structure"),v(),y(15,"div",54)(16,"button",55),q("click",function(){H(t);let r=w();return $(r.addRootAction())}),D(17,"+ Action"),v(),y(18,"button",55),q("click",function(){H(t);let r=w();return $(r.addGroup())}),D(19,"+ Group"),v()()(),y(20,"div",56),q("cdkDropListDropped",function(r){H(t);let s=w();return $(s.dropRoot(r))}),He(21,EP,5,2,"div",57),v()()()}if(n&2){let t=w();b(10),Gt("ngModel",t.bannerText),b(11),de("ngForOf",t.pointItems)}}var CP={apiKey:"AIzaSyBjDvBqWHphOtEiI94ruYeRTXdaeeMRTQs",authDomain:"bettermescratchpad.firebaseapp.com",databaseURL:"https://bettermescratchpad-default-rtdb.firebaseio.com",projectId:"bettermescratchpad",storageBucket:"bettermescratchpad.firebasestorage.app",messagingSenderId:"516986845541",appId:"1:516986845541:web:75cd67831a7cc9d8f1498c",measurementId:"G-QLQBD1T7YC"},CI=!1,DI=n=>String(n).padStart(2,"0"),Zn=n=>`${n.getFullYear()}-${DI(n.getMonth()+1)}-${DI(n.getDate())}`,Cc=n=>n.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"}),bc=n=>{let e=new Date(n);return e.setHours(0,0,0,0),e},Lt=(n,e)=>{let t=new Date(n);return t.setDate(t.getDate()+e),t},Zi=n=>{let e=n.getDay(),t=CI?e:e===0?6:e-1,i=new Date(n);return i.setHours(0,0,0,0),i.setDate(i.getDate()-t),i},bP=n=>{let[e,t,i]=n.split("-").map(Number);return bc(new Date(e,(t||1)-1,i||1))},bI=(()=>{class n{constructor(){this.tabs=[{key:"points",label:"Points Earned"},{key:"times",label:"Times Gained Control"},{key:"config",label:"Configuration"}],this.selectedTab="points",this.status="Connecting\u2026",this.todayLabel="",this.todayCount="\u2014",this.rangeLabel="",this.weekDays=[],this.tapBusy=!1,this.enableRealtime=!0,this.bannerText="",this.pointItems=[],this.pointsDayStates={},this.pointsDayTotal=0,this.selectedPointsDay=bc(new Date),this.selectedPointsDayLabel="",this.pointsWeekDays=[],this.pointsRangeLabel="",this.toggleLocks={},this.ymd=Zn,this.today=bc(new Date),this.viewingWeekStart=Zi(this.today),this.pointsViewingWeekStart=Zi(this.today),this.app=Rd(CP),this.auth=sh(this.app),this.db=EI(this.app),this.localConfigKey="betterme_points_config",this.permissionDeniedCodes=["PERMISSION_DENIED","permission_denied"],this.uid=null,this.dayNames=CI?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.todayLabel=`Today \u2022 ${Cc(this.today)}`,this.selectedPointsDayLabel=Cc(this.selectedPointsDay),this.prepareWeekDays(),this.preparePointsWeekDays()}ngOnInit(){if(!this.enableRealtime){this.status="";return}this.authUnsubscribe=ih(this.auth,t=>p(this,null,function*(){if(!t){yield Qr(this.auth);return}this.uid=t.uid,this.status="",this.attachTodayListener(),this.attachPointsDayListener(),yield this.loadPointsConfig(),this.renderWeek(),this.renderPointsWeek()}))}ngOnDestroy(){this.todayUnsubscribe?.(),this.pointsDayUnsubscribe?.(),this.authUnsubscribe?.()}get canGoNextWeek(){return Zi(this.today).getTime()>this.viewingWeekStart.getTime()}get canGoNextPointsWeek(){return Zi(this.today).getTime()>this.pointsViewingWeekStart.getTime()}isGroup(t){return t.type==="group"}isAction(t){return t.type==="action"}tap(){return p(this,null,function*(){if(!(!this.todayRef||!this.uid)){this.tapBusy=!0;try{yield xf(this.todayRef,t=>(t||0)+1)}catch(t){console.error("Increment failed",t),this.status="Increment failed. Please try again."}finally{this.tapBusy=!1}}})}toggleAction(t){return p(this,null,function*(){var a;if(!(yield this.ensureAuthenticated()))return;let i=Zn(this.selectedPointsDay),r=dn(this.db,`users/${this.uid}/points/days/${i}`),s=E({},this.pointsDayStates),o=this.pointsDayTotal;if(!this.toggleLocks[t.id]){this.toggleLocks=Y(E({},this.toggleLocks),{[t.id]:!0});try{let l=yield this.runWithReauth(()=>xf(r,d=>{let h=d&&typeof d=="object"?{total:Number(d.total)||0,actions:d.actions||{}}:{total:Number(d)||0,actions:{}},f=E({},h.actions),g=h.total;return!!h.actions[t.id]?(g=Math.max(0,g-t.points),delete f[t.id]):(g+=t.points,f[t.id]=!0),{total:g,actions:f}},{applyLocally:!1}));if(!l.committed||!l.snapshot.exists())throw new Error("Points update was not committed");if(Zn(this.selectedPointsDay)!==i)return;let u=l.snapshot.val();this.pointsDayStates=u.actions||{},this.pointsDayTotal=Number(u.total)||0,this.pointsWeekDays=this.pointsWeekDays.map(d=>d.key===i?Y(E({},d),{count:this.pointsDayTotal}):d)}catch(l){console.error("Toggle failed",l);let u=this.isPermissionDenied(l)?"Permission denied saving your points. Please reload to re-authenticate.":"Unable to update points right now. Please try again.";this.status=u,this.pointsDayStates=s,this.pointsDayTotal=o,this.pointsWeekDays=this.pointsWeekDays.map(d=>d.key===i?Y(E({},d),{count:o}):d)}finally{let c=this.toggleLocks,{[a=t.id]:l}=c,u=Qi(c,[Of(a)]);this.toggleLocks=u}}})}prevWeek(){this.setViewingWeek(Lt(this.viewingWeekStart,-7))}nextWeek(){if(!this.canGoNextWeek)return;let t=Lt(this.viewingWeekStart,7),i=Zi(this.today);this.setViewingWeek(t>i?i:t)}prevPointsWeek(){this.setPointsViewingWeek(Lt(this.pointsViewingWeekStart,-7))}nextPointsWeek(){if(!this.canGoNextPointsWeek)return;let t=Lt(this.pointsViewingWeekStart,7),i=Zi(this.today);this.setPointsViewingWeek(t>i?i:t)}selectPointsDay(t){this.selectedPointsDay=bP(t),this.selectedPointsDayLabel=Cc(this.selectedPointsDay),this.attachPointsDayListener()}addRootAction(){this.pointItems=[...this.pointItems,this.createAction("New action",1)],this.persistPointsConfig()}addGroup(){this.pointItems=[...this.pointItems,{id:this.generateId(),type:"group",name:"New group",children:[this.createAction("New action",1)]}],this.persistPointsConfig()}addChildAction(t){t.children=[...t.children,this.createAction("New action",1)],this.persistPointsConfig()}duplicateAction(t,i,r){let s=this.createAction(`${t.name} (Copy)`,t.points);if(r){let o=typeof i=="number"?i+1:r.children.indexOf(t)+1;r.children=this.insertAt(r.children,o,s)}else{let o=typeof i=="number"?i+1:this.pointItems.indexOf(t)+1;this.pointItems=this.insertAt(this.pointItems,o,s)}this.persistPointsConfig()}duplicateGroup(t){let i=this.pointItems[t];if(!this.isGroup(i))return;let r={id:this.generateId(),type:"group",name:`${i.name} (Copy)`,children:i.children.map(s=>this.createAction(s.name,s.points))};this.pointItems=this.insertAt(this.pointItems,t+1,r),this.persistPointsConfig()}removeRootAction(t){confirm("Delete this action?")&&(this.pointItems=this.pointItems.filter((i,r)=>r!==t),this.persistPointsConfig())}removeGroup(t){confirm("Delete this group and all of its actions?")&&(this.pointItems=this.pointItems.filter((i,r)=>r!==t),this.persistPointsConfig())}removeChildAction(t,i){confirm("Delete this action?")&&(t.children=t.children.filter((r,s)=>s!==i),this.persistPointsConfig())}dropRoot(t){t.previousIndex!==t.currentIndex&&(aa(this.pointItems,t.previousIndex,t.currentIndex),this.persistPointsConfig())}dropChild(t,i){i.previousIndex!==i.currentIndex&&(aa(t.children,i.previousIndex,i.currentIndex),this.persistPointsConfig())}updateActionName(t,i){t.name=i,this.persistPointsConfig()}updateActionPoints(t,i){let r=typeof i=="number"?i:Number(i);t.points=Number.isFinite(r)?r:0,this.persistPointsConfig()}updateGroupName(t,i){t.name=i,this.persistPointsConfig()}persistBanner(){return p(this,null,function*(){yield this.persistPointsConfig()})}createAction(t,i){return{id:this.generateId(),type:"action",name:t,points:i}}insertAt(t,i,r){let s=[...t];return s.splice(i,0,r),s}setViewingWeek(t){this.viewingWeekStart=t,this.prepareWeekDays(),this.renderWeek()}setPointsViewingWeek(t){this.pointsViewingWeekStart=t,this.preparePointsWeekDays();let i=this.pointsViewingWeekStart.getTime(),r=Lt(this.pointsViewingWeekStart,6).getTime(),s=this.selectedPointsDay.getTime();(s<i||s>r)&&(this.selectedPointsDay=bc(this.pointsViewingWeekStart),this.selectedPointsDayLabel=Cc(this.selectedPointsDay),this.attachPointsDayListener()),this.renderPointsWeek()}prepareWeekDays(){this.updateRangeLabel(),this.weekDays=Array.from({length:7},(t,i)=>{let r=Lt(this.viewingWeekStart,i);return{label:this.dayNames[i],key:Zn(r),count:"\u2014"}})}preparePointsWeekDays(){this.updatePointsRangeLabel(),this.pointsWeekDays=Array.from({length:7},(t,i)=>{let r=Lt(this.pointsViewingWeekStart,i);return{label:this.dayNames[i],key:Zn(r),count:0}})}renderWeek(){return p(this,null,function*(){if(!this.uid)return;let t=dn(this.db,`users/${this.uid}/daily`),i=yield Promise.all(this.weekDays.map(r=>Ec(qn(t,`${r.key}/count`))));this.weekDays=this.weekDays.map((r,s)=>Y(E({},r),{count:i[s].exists()?i[s].val():0}))})}renderPointsWeek(){return p(this,null,function*(){if(!this.uid)return;let t=dn(this.db,`users/${this.uid}/points/days`),i=yield Promise.all(this.pointsWeekDays.map(r=>Ec(qn(t,`${r.key}/total`))));this.pointsWeekDays=this.pointsWeekDays.map((r,s)=>Y(E({},r),{count:i[s].exists()?i[s].val():0}))})}attachTodayListener(){return p(this,null,function*(){if(!this.uid)return;let t=Zn(this.today);this.todayRef=dn(this.db,`users/${this.uid}/daily/${t}/count`),this.todayUnsubscribe?.(),this.todayUnsubscribe=Dc(this.todayRef,i=>{let r=i.exists()?i.val():0;this.todayCount=r;let s=this.weekDays.findIndex(o=>o.key===t);s>=0&&(this.weekDays=this.weekDays.map((o,a)=>a===s?Y(E({},o),{count:r}):o))})})}attachPointsDayListener(){if(!this.uid)return;let t=Zn(this.selectedPointsDay);this.pointsDayRef=dn(this.db,`users/${this.uid}/points/days/${t}`),this.pointsDayUnsubscribe?.(),this.pointsDayUnsubscribe=Dc(this.pointsDayRef,i=>{let r=i.exists()?i.val():{total:0,actions:{}};this.pointsDayTotal=Number(r.total)||0,this.pointsDayStates=r.actions||{};let s=this.pointsWeekDays.findIndex(o=>o.key===t);s>=0&&(this.pointsWeekDays=this.pointsWeekDays.map((o,a)=>a===s?Y(E({},o),{count:this.pointsDayTotal}):o))})}loadPointsConfig(){return p(this,null,function*(){let t=!1;if(this.uid)try{let i=dn(this.db,`users/${this.uid}/points/config`),r=yield Ec(i);if(r.exists()){let s=r.val(),o=Array.isArray(s?.items)?s.items:[];this.pointItems=o.map(a=>a.type==="group"?{id:a.id||this.generateId(),type:"group",name:a.name||"Group",children:a.children?.map(c=>this.createAction(c.name,c.points))||[]}:{id:a.id||this.generateId(),type:"action",name:a.name||"Action",points:Number(a.points)||0}),this.bannerText=s?.banner||"",t=!0,this.persistLocalConfig()}}catch(i){console.error("Failed to load config from Firebase",i),this.status="Using local settings due to sync error."}if(!t){let i=this.loadLocalConfig();i?(this.pointItems=i.items,this.bannerText=i.banner):this.pointItems=[this.createAction("Wake up on time",5),{id:this.generateId(),type:"group",name:"Healthy choices",children:[this.createAction("Drink water",3),this.createAction("Take a walk",4)]},this.createAction("Reflect on the day",2)],yield this.persistPointsConfig()}})}persistPointsConfig(){return p(this,null,function*(){if(this.persistLocalConfig(),!this.uid)return;let t=dn(this.db,`users/${this.uid}/points/config`);try{yield II(t,{items:this.pointItems,banner:this.bannerText})}catch(i){console.error("Persist failed",i),this.status="Unable to sync to cloud; your changes are saved locally."}})}updateRangeLabel(){let t=this.viewingWeekStart,i=Lt(t,6);this.rangeLabel=`${t.toLocaleDateString(void 0,{month:"short",day:"numeric"})} \u2013 ${i.toLocaleDateString(void 0,{month:"short",day:"numeric"})}`}updatePointsRangeLabel(){let t=this.pointsViewingWeekStart,i=Lt(t,6);this.pointsRangeLabel=`${t.toLocaleDateString(void 0,{month:"short",day:"numeric"})} \u2013 ${i.toLocaleDateString(void 0,{month:"short",day:"numeric"})}`}generateId(){return Math.random().toString(36).slice(2,10)}persistLocalConfig(){if(typeof localStorage>"u")return;let t=JSON.stringify({items:this.pointItems,banner:this.bannerText});localStorage.setItem(this.localConfigKey,t)}ensureAuthenticated(){return p(this,null,function*(){if(this.uid)return!0;try{let t=yield Qr(this.auth);return this.uid=t.user?.uid||this.uid,!!this.uid}catch(t){return console.error("Auth failed",t),this.status="Unable to authenticate. Please reload the page.",!1}})}isPermissionDenied(t){let i=t?.code||"",r=t?.message||"";return this.permissionDeniedCodes.some(s=>i.includes(s)||r.includes(s))}runWithReauth(t){return p(this,null,function*(){try{return yield t()}catch(i){if(!this.isPermissionDenied(i))throw i;try{yield Qr(this.auth),this.uid=this.auth.currentUser?.uid||this.uid}catch(r){throw console.error("Re-auth failed",r),i}return yield t()}})}loadLocalConfig(){if(typeof localStorage>"u")return null;let t=localStorage.getItem(this.localConfigKey);if(!t)return null;try{let i=JSON.parse(t);return{items:(Array.isArray(i?.items)?i.items:[]).map(s=>s.type==="group"?{id:s.id||this.generateId(),type:"group",name:s.name||"Group",children:s.children?.map(o=>this.createAction(o.name,o.points))||[]}:{id:s.id||this.generateId(),type:"action",name:s.name||"Action",points:Number(s.points)||0}),banner:i?.banner||""}}catch(i){return console.error("Failed to read local config",i),null}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=vr({type:n,selectors:[["app-root"]],standalone:!0,features:[Dr],decls:10,vars:5,consts:[[1,"app"],[1,"app-header"],[1,"title"],["role","tablist","aria-label","Main navigation",1,"tabs"],["class","tab","role","tab",3,"active","click",4,"ngFor","ngForOf"],["class","banner",4,"ngIf"],["class","panel",4,"ngIf"],["class","panel config",4,"ngIf"],["role","tab",1,"tab",3,"click"],[1,"banner"],[1,"panel"],[1,"section-head"],[1,"week-label"],[1,"count"],[1,"status","muted"],[1,"points-list"],[4,"ngFor","ngForOf"],["class","empty muted",4,"ngIf"],[1,"week","points-week"],[1,"range-label"],[1,"week-strip","points-week-strip"],["class","day",3,"selected","click",4,"ngFor","ngForOf"],[1,"week-nav"],["aria-label","Previous week",1,"btn",3,"click"],["aria-label","Next week",1,"btn",3,"click","disabled"],["class","action-row",3,"active","click",4,"ngIf"],["class","group-block",4,"ngIf"],[1,"action-row",3,"click"],[1,"text"],[1,"name"],[1,"meta"],[1,"group-block"],[1,"group-title"],[1,"group-actions"],["class","action-row",3,"active","click",4,"ngFor","ngForOf"],[1,"empty","muted"],[1,"day",3,"click"],[1,"dow"],[1,"mini"],[1,"today"],[1,"tap",3,"click","disabled"],[1,"status"],[1,"week"],["aria-hidden","true",1,"week-label"],[1,"week-strip"],["class","day",4,"ngFor","ngForOf"],[1,"day"],[1,"panel","config"],[1,"card"],[1,"card-head"],[1,"title-sm"],[1,"muted"],[1,"btn","primary",3,"click"],["rows","2","placeholder","Type an announcement",3,"ngModelChange","ngModel"],[1,"actions"],[1,"btn",3,"click"],["cdkDropList","",1,"config-list",3,"cdkDropListDropped"],["cdkDrag","","class","config-item",4,"ngFor","ngForOf"],["cdkDrag","",1,"config-item"],["cdkDragHandle","","aria-hidden","true",1,"drag-handle"],["class","config-body",4,"ngIf"],[1,"config-body"],[1,"config-title"],[1,"fields"],["type","text",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[1,"row-actions"],[1,"btn","danger",3,"click"],[1,"wide"],["cdkDropList","",1,"child-list",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","","class","config-child",4,"ngFor","ngForOf"],["cdkDrag","",1,"config-child"]],template:function(i,r){i&1&&(y(0,"main",0)(1,"header",1)(2,"div",2),D(3,"Daily Progress"),v(),y(4,"div",3),He(5,cP,2,4,"button",4),v()(),He(6,lP,2,1,"div",5)(7,mP,23,7,"section",6)(8,yP,21,7,"section",6)(9,DP,22,2,"section",7),v()),i&2&&(b(5),de("ngForOf",r.tabs),b(),de("ngIf",r.bannerText),b(),de("ngIf",r.selectedTab==="points"),b(),de("ngIf",r.selectedTab==="times"),b(),de("ngIf",r.selectedTab==="config"))},dependencies:[xu,Xm,e_,N_,Jo,Ku,S_,qu,ly,cy,ay,ry]})}}return n})();l_(bI,u_).catch(n=>console.error(n));
