var f_=Object.defineProperty,h_=Object.defineProperties;var p_=Object.getOwnPropertyDescriptors;var Br=Object.getOwnPropertySymbols,g_=Object.getPrototypeOf,Cu=Object.prototype.hasOwnProperty,Tu=Object.prototype.propertyIsEnumerable,m_=Reflect.get;var Du=(t,e,n)=>e in t?f_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D=(t,e)=>{for(var n in e||={})Cu.call(e,n)&&Du(t,n,e[n]);if(Br)for(var n of Br(e))Tu.call(e,n)&&Du(t,n,e[n]);return t},G=(t,e)=>h_(t,p_(e));var Ws=(t,e)=>{var n={};for(var r in t)Cu.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Br)for(var r of Br(t))e.indexOf(r)<0&&Tu.call(t,r)&&(n[r]=t[r]);return n};var Ct=(t,e,n)=>m_(g_(t),n,e);var h=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var bu=null;var Gs=1,Su=Symbol("SIGNAL");function A(t){let e=bu;return bu=t,e}var Nu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function __(t){if(!(Ys(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Gs)){if(!t.producerMustRecompute(t)&&!zs(t)){t.dirty=!1,t.lastCleanEpoch=Gs;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Gs}}function Au(t){return t&&(t.nextProducerIndex=0),A(t)}function Mu(t,e){if(A(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ys(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)qs(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function zs(t){Hr(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(__(n),r!==n.version))return!0}return!1}function Ru(t){if(Hr(t),Ys(t))for(let e=0;e<t.producerNode.length;e++)qs(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function qs(t,e){if(y_(t),Hr(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)qs(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Hr(i),i.producerIndexOfThis[r]=e}}function Ys(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Hr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function y_(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function v_(){throw new Error}var I_=v_;function Pu(t){I_=t}function ne(t){return typeof t=="function"}function $r(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Wr=$r(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Pn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(s){e=s instanceof Wr?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{xu(s)}catch(o){e=e??[],o instanceof Wr?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Wr(e)}}add(e){var n;if(e&&e!==this)if(this.closed)xu(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Pn(n,e)}remove(e){let{_finalizers:n}=this;n&&Pn(n,e),e instanceof t&&e._removeParent(this)}};re.EMPTY=(()=>{let t=new re;return t.closed=!0,t})();var Ks=re.EMPTY;function Gr(t){return t instanceof re||t&&"closed"in t&&ne(t.remove)&&ne(t.add)&&ne(t.unsubscribe)}function xu(t){ne(t)?t():t.unsubscribe()}var me={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Zt={setTimeout(t,e,...n){let{delegate:r}=Zt;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Zt;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ku(t){Zt.setTimeout(()=>{let{onUnhandledError:e}=me;if(e)e(t);else throw t})}function Qs(){}var Ou=Zs("C",void 0,void 0);function Lu(t){return Zs("E",void 0,t)}function Fu(t){return Zs("N",t,void 0)}function Zs(t,e,n){return{kind:t,value:e,error:n}}var Tt=null;function Jt(t){if(me.useDeprecatedSynchronousErrorHandling){let e=!Tt;if(e&&(Tt={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Tt;if(Tt=null,n)throw r}}else t()}function Vu(t){me.useDeprecatedSynchronousErrorHandling&&Tt&&(Tt.errorThrown=!0,Tt.error=t)}var bt=class extends re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gr(e)&&e.add(this)):this.destination=D_}static create(e,n,r){return new Xt(e,n,r)}next(e){this.isStopped?Xs(Fu(e),this):this._next(e)}error(e){this.isStopped?Xs(Lu(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xs(Ou,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},E_=Function.prototype.bind;function Js(t,e){return E_.call(t,e)}var eo=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){zr(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){zr(r)}else zr(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){zr(n)}}},Xt=class extends bt{constructor(e,n,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&me.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Js(e.next,s),error:e.error&&Js(e.error,s),complete:e.complete&&Js(e.complete,s)}):i=e}this.destination=new eo(i)}};function zr(t){me.useDeprecatedSynchronousErrorHandling?Vu(t):ku(t)}function w_(t){throw t}function Xs(t,e){let{onStoppedNotification:n}=me;n&&Zt.setTimeout(()=>n(t,e))}var D_={closed:!0,next:Qs,error:w_,complete:Qs};var Uu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ju(t){return t}function Bu(t){return t.length===0?ju:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var to=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=T_(n)?n:new Xt(n,r,i);return Jt(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Hu(r),new r((i,s)=>{let o=new Xt({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Uu](){return this}pipe(...n){return Bu(n)(this)}toPromise(n){return n=Hu(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Hu(t){var e;return(e=t??me.Promise)!==null&&e!==void 0?e:Promise}function C_(t){return t&&ne(t.next)&&ne(t.error)&&ne(t.complete)}function T_(t){return t&&t instanceof bt||C_(t)&&Gr(t)}function b_(t){return ne(t?.lift)}function $u(t){return e=>{if(b_(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Wu(t,e,n,r,i){return new no(t,e,n,r,i)}var no=class extends bt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Gu=$r(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class t extends to{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new qr(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Gu}next(n){Jt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Jt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Jt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Ks:(this.currentObservers=null,s.push(n),new re(()=>{this.currentObservers=null,Pn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new to;return n.source=this,n}}return t.create=(e,n)=>new qr(e,n),t})(),qr=class extends nt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ks}};var xn=class extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function ro(t,e){return $u((n,r)=>{let i=0;n.subscribe(Wu(r,s=>{r.next(t.call(e,s,i++))}))})}var M=class extends Error{constructor(e,n){super(Yo(e,n)),this.code=e}};function Yo(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function _i(t){return{toString:t}.toString()}var Yr="__parameters__";function S_(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Nd(t,e,n){return _i(()=>{let r=S_(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Yr)?c[Yr]:Object.defineProperty(c,Yr,{value:[]})[Yr];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var On=globalThis;function L(t){for(let e in t)if(t[e]===L)return e;throw Error("Could not find renamed property on target object.")}function ve(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ve).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function zu(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var N_=L({__forward_ref__:L});function Ad(t){return t.__forward_ref__=Ad,t.toString=function(){return ve(this())},t}function ye(t){return A_(t)?t():t}function A_(t){return typeof t=="function"&&t.hasOwnProperty(N_)&&t.__forward_ref__===Ad}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ko(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qo(t){return qu(t,Md)||qu(t,Rd)}function qu(t,e){return t.hasOwnProperty(e)?t[e]:null}function M_(t){let e=t&&(t[Md]||t[Rd]);return e||null}function Yu(t){return t&&(t.hasOwnProperty(Ku)||t.hasOwnProperty(R_))?t[Ku]:null}var Md=L({\u0275prov:L}),Ku=L({\u0275inj:L}),Rd=L({ngInjectableDef:L}),R_=L({ngInjectorDef:L}),F=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Pd(t){return t&&!!t.\u0275providers}var P_=L({\u0275cmp:L}),x_=L({\u0275dir:L}),k_=L({\u0275pipe:L});var Qu=L({\u0275fac:L}),Ln=L({__NG_ELEMENT_ID__:L}),Zu=L({__NG_ENV_ID__:L});function xd(t){return typeof t=="string"?t:t==null?"":String(t)}function O_(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():xd(t)}function L_(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new M(-200,t)}function Zo(t,e){throw new M(-201,!1)}var T=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(T||{}),go;function kd(){return go}function Me(t){let e=go;return go=t,e}function Od(t,e,n){let r=Qo(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&T.Optional)return null;if(e!==void 0)return e;Zo(t,"Injector")}var F_={},Fn=F_,mo="__NG_DI_FLAG__",ei="ngTempTokenPath",V_="ngTokenPath",U_=/\n/gm,j_="\u0275",Ju="__source",sn;function B_(){return sn}function en(t){let e=sn;return sn=t,e}function H_(t,e=T.Default){if(sn===void 0)throw new M(-203,!1);return sn===null?Od(t,void 0,e):sn.get(t,e&T.Optional?null:void 0,e)}function k(t,e=T.Default){return(kd()||H_)(ye(t),e)}function z(t,e=T.Default){return k(t,yi(e))}function yi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function _o(t){let e=[];for(let n=0;n<t.length;n++){let r=ye(t[n]);if(Array.isArray(r)){if(r.length===0)throw new M(900,!1);let i,s=T.Default;for(let o=0;o<r.length;o++){let a=r[o],c=$_(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(k(i,s))}else e.push(k(r))}return e}function Ld(t,e){return t[mo]=e,t.prototype[mo]=e,t}function $_(t){return t[mo]}function W_(t,e,n,r){let i=t[ei];throw e[Ju]&&i.unshift(e[Ju]),t.message=G_(`
`+t.message,i,n,r),t[V_]=i,t[ei]=null,t}function G_(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==j_?t.slice(2):t;let i=ve(e);if(Array.isArray(e))i=e.map(ve).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):ve(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(U_,`
  `)}`}var Fd=Ld(Nd("Optional"),8);var z_=Ld(Nd("SkipSelf"),4);function Vn(t,e){let n=t.hasOwnProperty(Qu);return n?t[Qu]:null}function Jo(t,e){t.forEach(n=>Array.isArray(n)?Jo(n,e):e(n))}function Vd(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ti(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Un={},Re=[],jn=new F(""),Ud=new F("",-1),jd=new F(""),ni=class{get(e,n=Fn){if(n===Fn){let r=new Error(`NullInjectorError: No provider for ${ve(e)}!`);throw r.name="NullInjectorError",r}return n}},Bd=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Bd||{}),ke=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ke||{}),Nt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Nt||{});function q_(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function yo(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];K_(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Y_(t){return t===3||t===4||t===6}function K_(t){return t.charCodeAt(0)===64}function Xo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Xu(t,n,i,null,e[++r]):Xu(t,n,i,null,null))}}return t}function Xu(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Hd="ng-template";function Q_(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&q_(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ea(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function ea(t){return t.type===4&&t.value!==Hd}function Z_(t,e,n){let r=t.type===4&&!n?Hd:t.value;return e===r}function J_(t,e,n){let r=4,i=t.attrs,s=i!==null?ty(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!_e(r)&&!_e(c))return!1;if(o&&_e(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Z_(t,c,n)||c===""&&e.length===1){if(_e(r))return!1;o=!0}}else if(r&8){if(i===null||!Q_(t,i,c,n)){if(_e(r))return!1;o=!0}}else{let l=e[++a],u=X_(c,i,ea(t),n);if(u===-1){if(_e(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(_e(r))return!1;o=!0}}}}return _e(r)||o}function _e(t){return(t&1)===0}function X_(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return ny(e,t)}function ey(t,e,n=!1){for(let r=0;r<e.length;r++)if(J_(t,e[r],n))return!0;return!1}function ty(t){for(let e=0;e<t.length;e++){let n=t[e];if(Y_(n))return e}return t.length}function ny(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ed(t,e){return t?":not("+e.trim()+")":e}function ry(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!_e(o)&&(e+=ed(s,i),i=""),r=o,s=s||!_e(r);n++}return i!==""&&(e+=ed(s,i)),e}function iy(t){return t.map(ry).join(",")}function sy(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!_e(i))break;i=s}r++}return{attrs:e,classes:n}}function $d(t){return _i(()=>{let e=qd(t),n=G(D({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Bd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ke.Emulated,styles:t.styles||Re,_:null,schemas:t.schemas||null,tView:null,id:""});Yd(n);let r=t.dependencies;return n.directiveDefs=nd(r,!1),n.pipeDefs=nd(r,!0),n.id=ly(n),n})}function oy(t){return cn(t)||Gd(t)}function ay(t){return t!==null}function ta(t){return _i(()=>({type:t.type,bootstrap:t.bootstrap||Re,declarations:t.declarations||Re,imports:t.imports||Re,exports:t.exports||Re,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function td(t,e){if(t==null)return Un;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Nt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Nt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Wd(t){return _i(()=>{let e=qd(t);return Yd(e),e})}function cn(t){return t[P_]||null}function Gd(t){return t[x_]||null}function zd(t){return t[k_]||null}function cy(t){let e=cn(t)||Gd(t)||zd(t);return e!==null?e.standalone:!1}function qd(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Un,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Re,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:td(t.inputs,e),outputs:td(t.outputs),debugInfo:null}}function Yd(t){t.features?.forEach(e=>e(t))}function nd(t,e){if(!t)return null;let n=e?zd:oy;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(ay)}function ly(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Kd(t){return{\u0275providers:t}}function uy(...t){return{\u0275providers:Qd(!0,t),\u0275fromNgModule:!0}}function Qd(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Jo(e,o=>{let a=o;vo(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Zd(i,s),n}function Zd(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];na(i,s=>{e(s,r)})}}function vo(t,e,n,r){if(t=ye(t),!t)return!1;let i=null,s=Yu(t),o=!s&&cn(t);if(!s&&!o){let c=t.ngModule;if(s=Yu(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)vo(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Jo(s.imports,u=>{vo(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Zd(l,e)}if(!a){let l=Vn(i)||(()=>new i);e({provide:i,useFactory:l,deps:Re},i),e({provide:jd,useValue:i,multi:!0},i),e({provide:jn,useValue:()=>k(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;na(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function na(t,e){for(let n of t)Pd(n)&&(n=n.\u0275providers),Array.isArray(n)?na(n,e):e(n)}var dy=L({provide:String,useValue:L});function Jd(t){return t!==null&&typeof t=="object"&&dy in t}function fy(t){return!!(t&&t.useExisting)}function hy(t){return!!(t&&t.useFactory)}function Io(t){return typeof t=="function"}var vi=new F(""),Kr={},py={},io;function ra(){return io===void 0&&(io=new ni),io}var it=class{},ri=class extends it{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wo(e,o=>this.processProvider(o)),this.records.set(Ud,tn(void 0,this)),i.has("environment")&&this.records.set(it,tn(void 0,this));let s=this.records.get(vi);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(jd,Re,T.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=A(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),A(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=en(this),r=Me(void 0),i;try{return e()}finally{en(n),Me(r)}}get(e,n=Fn,r=T.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Zu))return e[Zu](this);r=yi(r);let i,s=en(this),o=Me(void 0);try{if(!(r&T.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=Iy(e)&&Qo(e);l&&this.injectableDefInScope(l)?c=tn(Eo(e),Kr):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&T.Self?ra():this.parent;return n=r&T.Optional&&n===Fn?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ei]=a[ei]||[]).unshift(ve(e)),s)throw a;return W_(a,e,"R3InjectorError",this.source)}else throw a}finally{Me(o),en(s)}}resolveInjectorInitializers(){let e=A(null),n=en(this),r=Me(void 0),i;try{let s=this.get(jn,Re,T.Self);for(let o of s)o()}finally{en(n),Me(r),A(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ve(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(e){e=ye(e);let n=Io(e)?e:ye(e&&e.provide),r=my(e);if(!Io(e)&&e.multi===!0){let i=this.records.get(n);i||(i=tn(void 0,Kr,!0),i.factory=()=>_o(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=A(null);try{return n.value===Kr&&(n.value=py,n.value=n.factory()),typeof n.value=="object"&&n.value&&vy(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{A(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ye(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Eo(t){let e=Qo(t),n=e!==null?e.factory:Vn(t);if(n!==null)return n;if(t instanceof F)throw new M(204,!1);if(t instanceof Function)return gy(t);throw new M(204,!1)}function gy(t){if(t.length>0)throw new M(204,!1);let n=M_(t);return n!==null?()=>n.factory(t):()=>new t}function my(t){if(Jd(t))return tn(void 0,t.useValue);{let e=_y(t);return tn(e,Kr)}}function _y(t,e,n){let r;if(Io(t)){let i=ye(t);return Vn(i)||Eo(i)}else if(Jd(t))r=()=>ye(t.useValue);else if(hy(t))r=()=>t.useFactory(..._o(t.deps||[]));else if(fy(t))r=()=>k(ye(t.useExisting));else{let i=ye(t&&(t.useClass||t.provide));if(yy(t))r=()=>new i(..._o(t.deps));else return Vn(i)||Eo(i)}return r}function tn(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yy(t){return!!t.deps}function vy(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Iy(t){return typeof t=="function"||typeof t=="object"&&t instanceof F}function wo(t,e){for(let n of t)Array.isArray(n)?wo(n,e):n&&Pd(n)?wo(n.\u0275providers,e):e(n)}function Ey(){return kd()!==void 0||B_()!=null}function wy(t){return typeof t=="function"}var qe=0,S=1,y=2,K=3,Ie=4,Ee=5,ii=6,Bn=7,We=8,ln=9,Oe=10,ie=11,Hn=12,rd=13,Kn=14,Ge=15,Ii=16,nn=17,un=18,Ei=19,Xd=20,rt=21,so=22,At=23,st=25,ef=1;var Mt=7,si=8,oi=9,de=10,ia=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ia||{});function on(t){return Array.isArray(t)&&typeof t[ef]=="object"}function Ye(t){return Array.isArray(t)&&t[ef]===!0}function tf(t){return(t.flags&4)!==0}function sa(t){return t.componentOffset>-1}function oa(t){return(t.flags&1)===1}function Qn(t){return!!t.template}function Dy(t){return(t[y]&512)!==0}var Do=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function nf(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function rf(){return sf}function sf(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ty),Cy}rf.ngInherit=!0;function Cy(){let t=af(this),e=t?.current;if(e){let n=t.previous;if(n===Un)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ty(t,e,n,r,i){let s=this.declaredInputs[r],o=af(t)||by(t,{previous:Un,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Do(l&&l.currentValue,n,c===Un),nf(t,e,i,n)}var of="__ngSimpleChanges__";function af(t){return t[of]||null}function by(t,e){return t[of]=e}var id=null;var Pe=function(t,e,n){id?.(t,e,n)},Sy="svg",Ny="math",Ay=!1;function My(){return Ay}function Le(t){for(;Array.isArray(t);)t=t[qe];return t}function Ry(t,e){return Le(e[t])}function we(t,e){return Le(e[t.index])}function cf(t,e){return t.data[e]}function fn(t,e){let n=e[t];return on(n)?n:n[qe]}function aa(t){return(t[y]&128)===128}function Py(t){return Ye(t[K])}function ai(t,e){return e==null?null:t[e]}function lf(t){t[nn]=0}function xy(t){t[y]&1024||(t[y]|=1024,aa(t)&&$n(t))}function ca(t){return!!(t[y]&9216||t[At]?.dirty)}function Co(t){t[Oe].changeDetectionScheduler?.notify(1),ca(t)?$n(t):t[y]&64&&(My()?(t[y]|=1024,$n(t)):t[Oe].changeDetectionScheduler?.notify())}function $n(t){t[Oe].changeDetectionScheduler?.notify();let e=Wn(t);for(;e!==null&&!(e[y]&8192||(e[y]|=8192,!aa(e)));)e=Wn(e)}function uf(t,e){if((t[y]&256)===256)throw new M(911,!1);t[rt]===null&&(t[rt]=[]),t[rt].push(e)}function ky(t,e){if(t[rt]===null)return;let n=t[rt].indexOf(e);n!==-1&&t[rt].splice(n,1)}function Wn(t){let e=t[K];return Ye(e)?e[K]:e}var R={lFrame:yf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Oy(){return R.lFrame.elementDepthCount}function Ly(){R.lFrame.elementDepthCount++}function Fy(){R.lFrame.elementDepthCount--}function df(){return R.bindingsEnabled}function Vy(){return R.skipHydrationRootTNode!==null}function Uy(t){return R.skipHydrationRootTNode===t}function jy(){R.skipHydrationRootTNode=null}function Q(){return R.lFrame.lView}function xt(){return R.lFrame.tView}function Ke(){let t=ff();for(;t!==null&&t.type===64;)t=t.parent;return t}function ff(){return R.lFrame.currentTNode}function By(){let t=R.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Zn(t,e){let n=R.lFrame;n.currentTNode=t,n.isParent=e}function hf(){return R.lFrame.isParent}function Hy(){R.lFrame.isParent=!1}function $y(t){return R.lFrame.bindingIndex=t}function pf(){return R.lFrame.bindingIndex++}function Wy(){return R.lFrame.inI18n}function Gy(t,e){let n=R.lFrame;n.bindingIndex=n.bindingRootIndex=t,To(e)}function zy(){return R.lFrame.currentDirectiveIndex}function To(t){R.lFrame.currentDirectiveIndex=t}function gf(t){R.lFrame.currentQueryIndex=t}function qy(t){let e=t[S];return e.type===2?e.declTNode:e.type===1?t[Ee]:null}function mf(t,e,n){if(n&T.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&T.Host);)if(i=qy(s),i===null||(s=s[Kn],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=R.lFrame=_f();return r.currentTNode=e,r.lView=t,!0}function la(t){let e=_f(),n=t[S];R.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _f(){let t=R.lFrame,e=t===null?null:t.child;return e===null?yf(t):e}function yf(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function vf(){let t=R.lFrame;return R.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var If=vf;function ua(){let t=vf();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function da(){return R.lFrame.selectedIndex}function Rt(t){R.lFrame.selectedIndex=t}function Yy(){let t=R.lFrame;return cf(t.tView,t.selectedIndex)}function Ky(){return R.lFrame.currentNamespace}var Ef=!0;function fa(){return Ef}function ha(t){Ef=t}function Qy(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=sf(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function pa(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Qr(t,e,n){wf(t,e,3,n)}function Zr(t,e,n,r){(t[y]&3)===n&&wf(t,e,n,r)}function oo(t,e){let n=t[y];(n&3)===e&&(n&=16383,n+=1,t[y]=n)}function wf(t,e,n,r){let i=r!==void 0?t[nn]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[nn]+=65536),(a<s||s==-1)&&(Zy(t,n,e,c),t[nn]=(t[nn]&4294901760)+c+2),c++}function sd(t,e){Pe(4,t,e);let n=A(null);try{e.call(t)}finally{A(n),Pe(5,t,e)}}function Zy(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[y]>>14<t[nn]>>16&&(t[y]&3)===e&&(t[y]+=16384,sd(a,s)):sd(a,s)}var an=-1,Gn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Jy(t){return t instanceof Gn}function Xy(t){return(t.flags&8)!==0}function ev(t){return(t.flags&16)!==0}function Df(t){return t!==an}function ci(t){return t&32767}function tv(t){return t>>16}function li(t,e){let n=tv(t),r=e;for(;n>0;)r=r[Kn],n--;return r}var bo=!0;function od(t){let e=bo;return bo=t,e}var nv=256,Cf=nv-1,Tf=5,rv=0,xe={};function iv(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ln)&&(r=n[Ln]),r==null&&(r=n[Ln]=rv++);let i=r&Cf,s=1<<i;e.data[t+(i>>Tf)]|=s}function bf(t,e){let n=Sf(t,e);if(n!==-1)return n;let r=e[S];r.firstCreatePass&&(t.injectorIndex=e.length,ao(r.data,t),ao(e,null),ao(r.blueprint,null));let i=ga(t,e),s=t.injectorIndex;if(Df(i)){let o=ci(i),a=li(i,e),c=a[S].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function ao(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Sf(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ga(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Pf(i),r===null)return an;if(n++,i=i[Kn],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return an}function sv(t,e,n){iv(t,e,n)}function Nf(t,e,n){if(n&T.Optional||t!==void 0)return t;Zo(e,"NodeInjector")}function Af(t,e,n,r){if(n&T.Optional&&r===void 0&&(r=null),!(n&(T.Self|T.Host))){let i=t[ln],s=Me(void 0);try{return i?i.get(e,r,n&T.Optional):Od(e,r,n&T.Optional)}finally{Me(s)}}return Nf(r,e,n)}function Mf(t,e,n,r=T.Default,i){if(t!==null){if(e[y]&2048&&!(r&T.Self)){let o=uv(t,e,n,r,xe);if(o!==xe)return o}let s=Rf(t,e,n,r,xe);if(s!==xe)return s}return Af(e,n,r,i)}function Rf(t,e,n,r,i){let s=cv(n);if(typeof s=="function"){if(!mf(e,t,r))return r&T.Host?Nf(i,n,r):Af(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&T.Optional))Zo(n);else return o}finally{If()}}else if(typeof s=="number"){let o=null,a=Sf(t,e),c=an,l=r&T.Host?e[Ge][Ee]:null;for((a===-1||r&T.SkipSelf)&&(c=a===-1?ga(t,e):e[a+8],c===an||!cd(r,!1)?a=-1:(o=e[S],a=ci(c),e=li(c,e)));a!==-1;){let u=e[S];if(ad(s,a,u.data)){let d=ov(a,e,n,o,r,l);if(d!==xe)return d}c=e[a+8],c!==an&&cd(r,e[S].data[a+8]===l)&&ad(s,a,e)?(o=u,a=ci(c),e=li(c,e)):a=-1}}return i}function ov(t,e,n,r,i,s){let o=e[S],a=o.data[t+8],c=r==null?sa(a)&&bo:r!=o&&(a.type&3)!==0,l=i&T.Host&&s===a,u=av(a,o,n,c,l);return u!==null?zn(e,o,u,a):xe}function av(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let p=d;p<f;p++){let g=o[p];if(p<c&&n===g||p>=c&&g.type===n)return p}if(i){let p=o[c];if(p&&Qn(p)&&p.type===n)return c}return null}function zn(t,e,n,r){let i=t[n],s=e.data;if(Jy(i)){let o=i;o.resolving&&L_(O_(s[n]));let a=od(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Me(o.injectImpl):null,u=mf(t,r,T.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Qy(n,s[n],e)}finally{l!==null&&Me(l),od(a),o.resolving=!1,If()}}return i}function cv(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ln)?t[Ln]:void 0;return typeof e=="number"?e>=0?e&Cf:lv:e}function ad(t,e,n){let r=1<<t;return!!(n[e+(t>>Tf)]&r)}function cd(t,e){return!(t&T.Self)&&!(t&T.Host&&e)}var St=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Mf(this._tNode,this._lView,e,yi(r),n)}};function lv(){return new St(Ke(),Q())}function uv(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[y]&2048&&!(o[y]&512);){let a=Rf(s,o,n,r|T.Self,xe);if(a!==xe)return a;let c=s.parent;if(!c){let l=o[Xd];if(l){let u=l.get(n,xe,r);if(u!==xe)return u}c=Pf(o),o=o[Kn]}s=c}return i}function Pf(t){let e=t[S],n=e.type;return n===2?e.declTNode:n===1?t[Ee]:null}function ld(t,e=null,n=null,r){let i=dv(t,e,n,r);return i.resolveInjectorInitializers(),i}function dv(t,e=null,n=null,r,i=new Set){let s=[n||Re,uy(t)];return r=r||(typeof t=="object"?void 0:ve(t)),new ri(s,e||ra(),r||null,i)}var ma=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Fn}static{this.NULL=new ni}static create(n,r){if(Array.isArray(n))return ld({name:""},r,n,"");{let i=n.name??"";return ld({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=B({token:t,providedIn:"any",factory:()=>k(Ud)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();var fv="ngOriginalError";function co(t){return t[fv]}var ze=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&co(e);for(;n&&co(n);)n=co(n);return n||null}},xf=new F("",{providedIn:"root",factory:()=>z(ze).handleError.bind(void 0)}),kf=(()=>{class t{static{this.__NG_ELEMENT_ID__=hv}static{this.__NG_ENV_ID__=n=>n}}return t})(),So=class extends kf{constructor(e){super(),this._lView=e}onDestroy(e){return uf(this._lView,e),()=>ky(this._lView,e)}};function hv(){return new So(Q())}function pv(){return wi(Ke(),Q())}function wi(t,e){return new _a(we(t,e))}var _a=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=pv}}return t})();var No=class extends nt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Ey()&&(this.destroyRef=z(kf,{optional:!0})??void 0)}emit(e){let n=A(null);try{super.next(e)}finally{A(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=lo(s),i&&(i=lo(i)),o&&(o=lo(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof re&&e.add(a),a}};function lo(t){return e=>{setTimeout(t,void 0,e)}}var kn=No;function Of(t){return(t.flags&128)===128}var Lf=new Map,gv=0;function mv(){return gv++}function _v(t){Lf.set(t[Ei],t)}function yv(t){Lf.delete(t[Ei])}var ud="__ngContext__";function Pt(t,e){on(e)?(t[ud]=e[Ei],_v(e)):t[ud]=e}function Ff(t){return Uf(t[Hn])}function Vf(t){return Uf(t[Ie])}function Uf(t){for(;t!==null&&!Ye(t);)t=t[Ie];return t}var Ao;function jf(t){Ao=t}function vv(){if(Ao!==void 0)return Ao;if(typeof document<"u")return document;throw new M(210,!1)}var ya=new F("",{providedIn:"root",factory:()=>Iv}),Iv="ng",va=new F(""),hn=new F("",{providedIn:"platform",factory:()=>"unknown"});var Ia=new F("",{providedIn:"root",factory:()=>vv().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ev="h",wv="b";var Dv=()=>null;function Ea(t,e,n=!1){return Dv(t,e,n)}var Bf=!1,Cv=new F("",{providedIn:"root",factory:()=>Bf});var kt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(kt||{}),Tv;function wa(t,e){return Tv(t,e)}function rn(t,e,n,r,i){if(r!=null){let s,o=!1;Ye(r)?s=r:on(r)&&(o=!0,r=r[qe]);let a=Le(r);t===0&&n!==null?i==null?zf(e,n,a):ui(e,n,a,i||null,!0):t===1&&n!==null?ui(e,n,a,i||null,!0):t===2?Hv(e,a,o):t===3&&e.destroyNode(a),s!=null&&Wv(e,t,s,n,i)}}function bv(t,e){return t.createText(e)}function Sv(t,e,n){t.setValue(e,n)}function Hf(t,e,n){return t.createElement(e,n)}function Nv(t,e){$f(t,e),e[qe]=null,e[Ee]=null}function Av(t,e,n,r,i,s){r[qe]=i,r[Ee]=e,Di(t,r,n,1,i,s)}function $f(t,e){e[Oe].changeDetectionScheduler?.notify(1),Di(t,e,e[ie],2,null,null)}function Mv(t){let e=t[Hn];if(!e)return uo(t[S],t);for(;e;){let n=null;if(on(e))n=e[Hn];else{let r=e[de];r&&(n=r)}if(!n){for(;e&&!e[Ie]&&e!==t;)on(e)&&uo(e[S],e),e=e[K];e===null&&(e=t),on(e)&&uo(e[S],e),n=e&&e[Ie]}e=n}}function Rv(t,e,n,r){let i=de+r,s=n.length;r>0&&(n[i-1][Ie]=e),r<s-de?(e[Ie]=n[i],Vd(n,de+r,e)):(n.push(e),e[Ie]=null),e[K]=n;let o=e[Ii];o!==null&&n!==o&&Pv(o,e);let a=e[un];a!==null&&a.insertView(t),Co(e),e[y]|=128}function Pv(t,e){let n=t[oi],i=e[K][K][Ge];e[Ge]!==i&&(t[y]|=ia.HasTransplantedViews),n===null?t[oi]=[e]:n.push(e)}function Wf(t,e){let n=t[oi],r=n.indexOf(e);n.splice(r,1)}function Mo(t,e){if(t.length<=de)return;let n=de+e,r=t[n];if(r){let i=r[Ii];i!==null&&i!==t&&Wf(i,r),e>0&&(t[n-1][Ie]=r[Ie]);let s=ti(t,de+e);Nv(r[S],r);let o=s[un];o!==null&&o.detachView(s[S]),r[K]=null,r[Ie]=null,r[y]&=-129}return r}function Gf(t,e){if(!(e[y]&256)){let n=e[ie];n.destroyNode&&Di(t,e,n,3,null,null),Mv(e)}}function uo(t,e){if(e[y]&256)return;let n=A(null);try{e[y]&=-129,e[y]|=256,e[At]&&Ru(e[At]),kv(t,e),xv(t,e),e[S].type===1&&e[ie].destroy();let r=e[Ii];if(r!==null&&Ye(e[K])){r!==e[K]&&Wf(r,e);let i=e[un];i!==null&&i.detachView(t)}yv(e)}finally{A(n)}}function xv(t,e){let n=t.cleanup,r=e[Bn];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Bn]=null);let i=e[rt];if(i!==null){e[rt]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function kv(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Gn)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Pe(4,a,c);try{c.call(a)}finally{Pe(5,a,c)}}else{Pe(4,i,s);try{s.call(i)}finally{Pe(5,i,s)}}}}}function Ov(t,e,n){return Lv(t,e.parent,n)}function Lv(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[qe];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===ke.None||s===ke.Emulated)return null}return we(r,n)}}function ui(t,e,n,r,i){t.insertBefore(e,n,r,i)}function zf(t,e,n){t.appendChild(e,n)}function dd(t,e,n,r,i){r!==null?ui(t,e,n,r,i):zf(t,e,n)}function Fv(t,e,n,r){t.removeChild(e,n,r)}function Da(t,e){return t.parentNode(e)}function Vv(t,e){return t.nextSibling(e)}function Uv(t,e,n){return Bv(t,e,n)}function jv(t,e,n){return t.type&40?we(t,n):null}var Bv=jv,fd;function Ca(t,e,n,r){let i=Ov(t,r,e),s=e[ie],o=r.parent||e[Ee],a=Uv(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)dd(s,i,n[c],a,!1);else dd(s,i,n,a,!1);fd!==void 0&&fd(s,r,e,n,i)}function Jr(t,e){if(e!==null){let n=e.type;if(n&3)return we(e,t);if(n&4)return Ro(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Jr(t,r);{let i=t[e.index];return Ye(i)?Ro(-1,i):Le(i)}}else{if(n&32)return wa(e,t)()||Le(t[e.index]);{let r=qf(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wn(t[Ge]);return Jr(i,r)}else return Jr(t,e.next)}}}return null}function qf(t,e){if(e!==null){let r=t[Ge][Ee],i=e.projection;return r.projection[i]}return null}function Ro(t,e){let n=de+t+1;if(n<e.length){let r=e[n],i=r[S].firstChild;if(i!==null)return Jr(r,i)}return e[Mt]}function Hv(t,e,n){let r=Da(t,e);r&&Fv(t,r,e,n)}function Ta(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Pt(Le(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Ta(t,e,n.child,r,i,s,!1),rn(e,t,i,a,s);else if(c&32){let l=wa(n,r),u;for(;u=l();)rn(e,t,i,u,s);rn(e,t,i,a,s)}else c&16?$v(t,e,r,n,i,s):rn(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Di(t,e,n,r,i,s){Ta(n,r,t.firstChild,e,i,s,!1)}function $v(t,e,n,r,i,s){let o=n[Ge],c=o[Ee].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];rn(e,t,i,u,s)}else{let l=c,u=o[K];Of(r)&&(l.flags|=128),Ta(t,e,l,u,i,s,!0)}}function Wv(t,e,n,r,i){let s=n[Mt],o=Le(n);s!==o&&rn(e,t,r,s,i);for(let a=de;a<n.length;a++){let c=n[a];Di(c[S],c,t,e,r,s)}}function Gv(t,e,n){t.setAttribute(e,"style",n)}function Yf(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Kf(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&yo(t,e,r),i!==null&&Yf(t,e,i),s!==null&&Gv(t,e,s)}var Ci={};function Fe(t=1){Qf(xt(),Q(),da()+t,!1)}function Qf(t,e,n,r){if(!r)if((e[y]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Qr(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Zr(e,s,0,n)}Rt(n)}function Jn(t,e=T.Default){let n=Q();if(n===null)return k(t,e);let r=Ke();return Mf(r,n,ye(t),e)}function Zf(t,e,n,r,i,s){let o=A(null);try{let a=null;i&Nt.SignalBased&&(a=e[r][Su]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Nt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):nf(e,a,r,s)}finally{A(o)}}function zv(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Rt(~i);else{let s=i,o=n[++r],a=n[++r];Gy(o,s);let c=e[s];a(2,c)}}}finally{Rt(-1)}}function Ti(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[qe]=i,d[y]=r|4|128|8|64,(l!==null||t&&t[y]&2048)&&(d[y]|=2048),lf(d),d[K]=d[Kn]=t,d[We]=n,d[Oe]=o||t&&t[Oe],d[ie]=a||t&&t[ie],d[ln]=c||t&&t[ln]||null,d[Ee]=s,d[Ei]=mv(),d[ii]=u,d[Xd]=l,d[Ge]=e.type==2?t[Ge]:d,d}function bi(t,e,n,r,i){let s=t.data[e];if(s===null)s=qv(t,e,n,r,i),Wy()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=By();s.injectorIndex=o===null?-1:o.injectorIndex}return Zn(s,!0),s}function qv(t,e,n,r,i){let s=ff(),o=hf(),a=o?s:s&&s.parent,c=t.data[e]=Jv(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Jf(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xf(t,e,n,r,i){let s=da(),o=r&2;try{Rt(-1),o&&e.length>st&&Qf(t,e,st,!1),Pe(o?2:0,i),n(r,i)}finally{Rt(s),Pe(o?3:1,i)}}function eh(t,e,n){if(tf(e)){let r=A(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{A(r)}}}function th(t,e,n){df()&&(sI(t,e,n,we(n,e)),(n.flags&64)===64&&oh(t,e,n))}function nh(t,e,n=we){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function rh(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ba(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ba(t,e,n,r,i,s,o,a,c,l,u){let d=st+r,f=d+i,p=Yv(d,f),g=typeof l=="function"?l():l;return p[S]={type:t,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function Yv(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ci);return n}function Kv(t,e,n,r){let s=r.get(Cv,Bf)||n===ke.ShadowDom,o=t.selectRootElement(e,s);return Qv(o),o}function Qv(t){Zv(t)}var Zv=()=>null;function Jv(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Vy()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function hd(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Nt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?pd(r,n,l,a,c):pd(r,n,l,a)}return r}function pd(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function Xv(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=n?n.get(d):null,p=f?f.inputs:null,g=f?f.outputs:null;c=hd(0,d.inputs,u,c,p),l=hd(1,d.outputs,u,l,g);let _=c!==null&&o!==null&&!ea(e)?pI(c,u,o):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function eI(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function tI(t,e,n,r,i,s,o,a){let c=we(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Sa(t,n,u,r,i),sa(e)&&nI(n,e.index)):e.type&3?(r=eI(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function nI(t,e){let n=fn(e,t);n[y]&16||(n[y]|=64)}function ih(t,e,n,r){if(df()){let i=r===null?null:{"":-1},s=aI(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&sh(t,e,n,o,i,a),i&&cI(n,r,i)}n.mergedAttrs=Xo(n.mergedAttrs,n.attrs)}function sh(t,e,n,r,i,s){for(let l=0;l<r.length;l++)sv(bf(n,e),t,r[l].type);uI(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Jf(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Xo(n.mergedAttrs,u.hostAttrs),dI(t,n,e,c,u),lI(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}Xv(t,n,s)}function rI(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;iI(o)!=a&&o.push(a),o.push(n,r,s)}}function iI(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function sI(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;sa(n)&&fI(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||bf(n,e),Pt(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=zn(e,t,a,n);if(Pt(l,e),o!==null&&hI(e,a-i,l,c,n,o),Qn(c)){let u=fn(n.index,e);u[We]=zn(e,t,a,n)}}}function oh(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=zy();try{Rt(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];To(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&oI(c,l)}}finally{Rt(-1),To(o)}}function oI(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function aI(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(ey(e,o.selectors,!1))if(r||(r=[]),Qn(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Po(t,e,c)}else r.unshift(o),Po(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Po(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function cI(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new M(-301,!1);r.push(e[i],s)}}}function lI(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Qn(e)&&(n[""]=t)}}function uI(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function dI(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Vn(i.type,!0)),o=new Gn(s,Qn(i),Jn);t.blueprint[r]=o,n[r]=o,rI(t,e,r,Jf(t,n,i.hostVars,Ci),i)}function fI(t,e,n){let r=we(e,t),i=rh(n),s=t[Oe].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Si(t,Ti(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function hI(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];Zf(r,n,c,l,u,d)}}function pI(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function ah(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ch(t,e){let n=t.contentQueries;if(n!==null){let r=A(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];gf(s),a.contentQueries(2,e[o],o)}}}finally{A(r)}}}function Si(t,e){return t[Hn]?t[rd][Ie]=e:t[Hn]=e,t[rd]=e,e}function xo(t,e,n){gf(0);let r=A(null);try{e(t,n)}finally{A(r)}}function gI(t){return t[Bn]||(t[Bn]=[])}function mI(t){return t.cleanup||(t.cleanup=[])}function lh(t,e){let n=t[ln],r=n?n.get(ze,null):null;r&&r.handleError(e)}function Sa(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];Zf(u,l,r,a,c,i)}}function _I(t,e,n){let r=Ry(e,t);Sv(t[ie],r,n)}function yI(t,e){let n=fn(e,t),r=n[S];vI(r,n);let i=n[qe];i!==null&&n[ii]===null&&(n[ii]=Ea(i,n[ln])),Na(r,n,n[We])}function vI(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Na(t,e,n){la(e);try{let r=t.viewQuery;r!==null&&xo(1,r,n);let i=t.template;i!==null&&Xf(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[un]?.finishViewCreation(t),t.staticContentQueries&&ch(t,e),t.staticViewQueries&&xo(2,t.viewQuery,n);let s=t.components;s!==null&&II(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[y]&=-5,ua()}}function II(t,e){for(let n=0;n<e.length;n++)yI(t,e[n])}function EI(t,e,n,r){let i=A(null);try{let s=e.tView,a=t[y]&4096?4096:16,c=Ti(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Ii]=l;let u=t[un];return u!==null&&(c[un]=u.createEmbeddedView(s)),Na(s,c,n),c}finally{A(i)}}function gd(t,e){return!e||e.firstChild===null||Of(t)}function wI(t,e,n,r=!0){let i=e[S];if(Rv(i,e,t,n),r){let o=Ro(n,t),a=e[ie],c=Da(a,t[Mt]);c!==null&&Av(i,t[Ee],a,e,c,o)}let s=e[ii];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function di(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Le(s)),Ye(s)&&DI(s,r);let o=n.type;if(o&8)di(t,e,n.child,r);else if(o&32){let a=wa(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=qf(e,n);if(Array.isArray(a))r.push(...a);else{let c=Wn(e[Ge]);di(c[S],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function DI(t,e){for(let n=de;n<t.length;n++){let r=t[n],i=r[S].firstChild;i!==null&&di(r[S],r,i,e)}t[Mt]!==t[qe]&&e.push(t[Mt])}var uh=[];function CI(t){return t[At]??TI(t)}function TI(t){let e=uh.pop()??Object.create(SI);return e.lView=t,e}function bI(t){t.lView[At]!==t&&(t.lView=null,uh.push(t))}var SI=G(D({},Nu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{$n(t.lView)},consumerOnSignalRead(){this.lView[At]=this}}),dh=100;function fh(t,e=!0,n=0){let r=t[Oe],i=r.rendererFactory,s=!1;s||i.begin?.();try{NI(t,n)}catch(o){throw e&&lh(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function NI(t,e){ko(t,e);let n=0;for(;ca(t);){if(n===dh)throw new M(103,!1);n++,ko(t,1)}}function AI(t,e,n,r){let i=e[y];if((i&256)===256)return;let s=!1;!s&&e[Oe].inlineEffectRunner?.flush(),la(e);let o=null,a=null;!s&&MI(t)&&(a=CI(e),o=Au(a));try{lf(e),$y(t.bindingStartIndex),n!==null&&Xf(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Qr(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Zr(e,d,0,null),oo(e,0)}if(RI(e),hh(e,0),t.contentQueries!==null&&ch(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Qr(e,d)}else{let d=t.contentHooks;d!==null&&Zr(e,d,1),oo(e,1)}zv(t,e);let l=t.components;l!==null&&gh(e,l,0);let u=t.viewQuery;if(u!==null&&xo(2,u,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Qr(e,d)}else{let d=t.viewHooks;d!==null&&Zr(e,d,2),oo(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[so]){for(let d of e[so])d();e[so]=null}s||(e[y]&=-73)}catch(c){throw $n(e),c}finally{a!==null&&(Mu(a,o),bI(a)),ua()}}function MI(t){return t.type!==2}function hh(t,e){for(let n=Ff(t);n!==null;n=Vf(n))for(let r=de;r<n.length;r++){let i=n[r];ph(i,e)}}function RI(t){for(let e=Ff(t);e!==null;e=Vf(e)){if(!(e[y]&ia.HasTransplantedViews))continue;let n=e[oi];for(let r=0;r<n.length;r++){let i=n[r],s=i[K];xy(i)}}}function PI(t,e,n){let r=fn(e,t);ph(r,n)}function ph(t,e){aa(t)&&ko(t,e)}function ko(t,e){let r=t[S],i=t[y],s=t[At],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&zs(s)),s&&(s.dirty=!1),t[y]&=-9217,o)AI(r,t,r.template,t[We]);else if(i&8192){hh(t,1);let a=r.components;a!==null&&gh(t,a,1)}}function gh(t,e,n){for(let r=0;r<e.length;r++)PI(t,e[r],n)}function Aa(t){for(t[Oe].changeDetectionScheduler?.notify();t;){t[y]|=64;let e=Wn(t);if(Dy(t)&&!e)return t;t=e}return null}var qn=class{get rootNodes(){let e=this._lView,n=e[S];return di(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[We]}set context(e){this._lView[We]=e}get destroyed(){return(this._lView[y]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[K];if(Ye(e)){let n=e[si],r=n?n.indexOf(this):-1;r>-1&&(Mo(e,r),ti(n,r))}this._attachedToViewContainer=!1}Gf(this._lView[S],this._lView)}onDestroy(e){uf(this._lView,e)}markForCheck(){Aa(this._cdRefInjectingView||this._lView)}detach(){this._lView[y]&=-129}reattach(){Co(this._lView),this._lView[y]|=128}detectChanges(){this._lView[y]|=1024,fh(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,$f(this._lView[S],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e,Co(this._lView)}},Ma=(()=>{class t{static{this.__NG_ELEMENT_ID__=OI}}return t})(),xI=Ma,kI=class extends xI{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=EI(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new qn(i)}};function OI(){return LI(Ke(),Q())}function LI(t,e){return t.type&4?new kI(e,t,wi(t,e)):null}var mA=new RegExp(`^(\\d+)*(${wv}|${Ev})*(.*)`);var FI=()=>null;function md(t,e){return FI(t,e)}var Oo=class{},Lo=class{},fi=class{};function VI(t){let e=Error(`No component factory found for ${ve(t)}.`);return e[UI]=t,e}var UI="ngComponent";var Fo=class{resolveComponentFactory(e){throw VI(e)}},Ra=(()=>{class t{static{this.NULL=new Fo}}return t})(),Yn=class{};var jI=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>null})}}return t})(),fo={};var _d=new Set;function mh(t){_d.has(t)||(_d.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function yd(...t){}function BI(){let t=typeof On.requestAnimationFrame=="function",e=On[t?"requestAnimationFrame":"setTimeout"],n=On[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Y=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kn(!1),this.onMicrotaskEmpty=new kn(!1),this.onStable=new kn(!1),this.onError=new kn(!1),typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=BI().nativeRequestAnimationFrame,WI(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new M(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,HI,yd,yd);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},HI={};function Pa(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $I(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(On,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Vo(t),t.isCheckStableRunning=!0,Pa(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Vo(t))}function WI(t){let e=()=>{$I(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(GI(a))return n.invokeTask(i,s,o,a);try{return vd(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Id(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return vd(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Id(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Vo(t),Pa(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Vo(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function vd(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Id(t){t._nesting--,Pa(t)}function GI(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var _h=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Uo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=zu(i,a);else if(s==2){let c=a,l=e[++o];r=zu(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var jo=class extends Ra{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=cn(e);return new hi(n,this.ngModule)}};function Ed(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function zI(t){let e=t.toLowerCase();return e==="svg"?Sy:e==="math"?Ny:null}var Bo=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=yi(r);let i=this.injector.get(e,fo,r);return i!==fo||n===fo?i:this.parentInjector.get(e,n,r)}},hi=class extends fi{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Ed(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ed(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=iy(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=A(null);try{i=i||this.ngModule;let o=i instanceof it?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Bo(e,o):e,c=a.get(Yn,null);if(c===null)throw new M(407,!1);let l=a.get(jI,null),u=a.get(_h,null),d=a.get(Oo,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",_=r?Kv(p,r,this.componentDef.encapsulation,a):Hf(p,g,zI(g)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let j=null;_!==null&&(j=Ea(_,a,!0));let $=ba(0,null,null,1,0,null,null,null,null,null,null),U=Ti(null,$,null,b,null,null,f,p,a,null,j);la(U);let ce,Kt;try{let ge=this.componentDef,Qt,$s=null;ge.findHostDirectiveDefs?(Qt=[],$s=new Map,ge.findHostDirectiveDefs(ge,Qt,$s),Qt.push(ge)):Qt=[ge];let u_=qI(U,_),d_=YI(u_,_,ge,Qt,U,f,p);Kt=cf($,st),_&&ZI(p,ge,_,r),n!==void 0&&JI(Kt,this.ngContentSelectors,n),ce=QI(d_,ge,Qt,$s,U,[XI]),Na($,U,null)}finally{ua()}return new Ho(this.componentType,ce,wi(Kt,U),U,Kt)}finally{A(s)}}},Ho=class extends Lo{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new qn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Sa(s[S],s,i,e,n),this.previousInputValues.set(e,n);let o=fn(this._tNode.index,s);Aa(o)}}get injector(){return new St(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function qI(t,e){let n=t[S],r=st;return t[r]=e,bi(n,r,2,"#host",null)}function YI(t,e,n,r,i,s,o){let a=i[S];KI(r,t,e,o);let c=null;e!==null&&(c=Ea(e,i[ln]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ti(i,rh(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Po(a,t,r.length-1),Si(i,d),i[t.index]=d}function KI(t,e,n,r){for(let i of t)e.mergedAttrs=Xo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Uo(e,e.mergedAttrs,!0),n!==null&&Kf(r,n,e))}function QI(t,e,n,r,i,s){let o=Ke(),a=i[S],c=we(o,i);sh(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,f=zn(i,a,d,o);Pt(f,i)}oh(a,i,o),c&&Pt(c,i);let l=zn(i,a,o.directiveStart+o.componentOffset,o);if(t[We]=i[We]=l,s!==null)for(let u of s)u(l,e);return eh(a,o,i),l}function ZI(t,e,n,r){if(r)yo(t,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=sy(e.selectors[0]);i&&yo(t,n,i),s&&s.length>0&&Yf(t,n,s.join(" "))}}function JI(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function XI(){let t=Ke();pa(Q()[S],t)}var xa=(()=>{class t{static{this.__NG_ELEMENT_ID__=eE}}return t})();function eE(){let t=Ke();return nE(t,Q())}var tE=xa,yh=class extends tE{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return wi(this._hostTNode,this._hostLView)}get injector(){return new St(this._hostTNode,this._hostLView)}get parentInjector(){let e=ga(this._hostTNode,this._hostLView);if(Df(e)){let n=li(e,this._hostLView),r=ci(e),i=n[S].data[r+8];return new St(i,n)}else return new St(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=wd(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-de}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=md(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,gd(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!wy(e),a;if(o)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new hi(cn(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let _=(o?l:this.parentInjector).get(it,null);_&&(s=_)}let u=cn(c.componentType??{}),d=md(this._lContainer,u?.id??null),f=d?.firstChild??null,p=c.create(l,i,f,s);return this.insertImpl(p.hostView,a,gd(this._hostTNode,d)),p}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Py(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[K],l=new yh(c,c[Ee],c[K]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return wI(o,i,s,r),e.attachToViewContainerRef(),Vd(ho(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=wd(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Mo(this._lContainer,n);r&&(ti(ho(this._lContainer),n),Gf(r[S],r))}detach(e){let n=this._adjustIndex(e,-1),r=Mo(this._lContainer,n);return r&&ti(ho(this._lContainer),n)!=null?new qn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function wd(t){return t[si]}function ho(t){return t[si]||(t[si]=[])}function nE(t,e){let n,r=e[t.index];return Ye(r)?n=r:(n=ah(r,e,null,t),e[t.index]=n,Si(e,n)),iE(n,e,t,r),new yh(n,t,e)}function rE(t,e){let n=t[ie],r=n.createComment(""),i=we(e,t),s=Da(n,i);return ui(n,s,r,Vv(n,i),!1),r}var iE=aE,sE=()=>!1;function oE(t,e,n){return sE(t,e,n)}function aE(t,e,n,r){if(t[Mt])return;let i;n.type&8?i=Le(r):i=rE(e,n),t[Mt]=i}var dn=class{};var pi=class extends dn{constructor(e){super(),this.componentFactoryResolver=new jo(this),this.instance=null;let n=new ri([...e.providers,{provide:dn,useValue:this},{provide:Ra,useValue:this.componentFactoryResolver}],e.parent||ra(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function cE(t,e,n=null){return new pi({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var vh=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Ih(t){return uE(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function lE(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function uE(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Eh(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function dE(t){return(t.flags&32)===32}function fE(t,e,n,r,i,s,o,a,c){let l=e.consts,u=bi(e,t,4,o||null,ai(l,a));ih(e,n,u,ai(l,c)),pa(e,u);let d=u.tView=ba(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function ka(t,e,n,r,i,s,o,a){let c=Q(),l=xt(),u=t+st,d=l.firstCreatePass?fE(u,l,c,e,n,r,i,s,o):l.data[u];Zn(d,!1);let f=hE(l,c,d,t);fa()&&Ca(l,c,f,d),Pt(f,c);let p=ah(f,c,f,d);return c[u]=p,Si(c,p),oE(p,d,c),oa(d)&&th(l,c,d),o!=null&&nh(c,d,a),ka}var hE=pE;function pE(t,e,n,r){return ha(!0),e[ie].createComment("")}function gE(t,e,n,r){return Eh(t,pf(),n)?e+xd(n)+r:Ci}function Xn(t,e,n){let r=Q(),i=pf();if(Eh(r,i,e)){let s=xt(),o=Yy();tI(s,o,r,t,e,r[ie],n,!1)}return Xn}function Dd(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Sa(t,n,s[o],o,r)}function mE(t,e,n,r,i,s){let o=e.consts,a=ai(o,i),c=bi(e,t,2,r,a);return ih(e,n,c,ai(o,s)),c.attrs!==null&&Uo(c,c.attrs,!1),c.mergedAttrs!==null&&Uo(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function X(t,e,n,r){let i=Q(),s=xt(),o=st+t,a=i[ie],c=s.firstCreatePass?mE(o,s,i,e,n,r):s.data[o],l=_E(s,i,c,a,e,t);i[o]=l;let u=oa(c);return Zn(c,!0),Kf(a,l,c),!dE(c)&&fa()&&Ca(s,i,l,c),Oy()===0&&Pt(l,i),Ly(),u&&(th(s,i,c),eh(s,c,i)),r!==null&&nh(i,c),X}function se(){let t=Ke();hf()?Hy():(t=t.parent,Zn(t,!1));let e=t;Uy(e)&&jy(),Fy();let n=xt();return n.firstCreatePass&&(pa(n,t),tf(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Xy(e)&&Dd(n,e,Q(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ev(e)&&Dd(n,e,Q(),e.stylesWithoutHost,!1),se}function Oa(t,e,n,r){return X(t,e,n,r),se(),Oa}var _E=(t,e,n,r,i,s)=>(ha(!0),Hf(r,i,Ky()));var gi="en-US";var yE=gi;function vE(t){typeof t=="string"&&(yE=t.toLowerCase().replace(/_/g,"-"))}function er(t,e,n,r){let i=Q(),s=xt(),o=Ke();return EE(s,i,i[ie],o,t,e,r),er}function IE(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Bn],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function EE(t,e,n,r,i,s,o){let a=oa(r),l=t.firstCreatePass&&mI(t),u=e[We],d=gI(e),f=!0;if(r.type&3||o){let _=we(r,e),b=o?o(_):_,j=d.length,$=o?ce=>o(Le(ce[r.index])):r.index,U=null;if(!o&&a&&(U=IE(t,e,i,r.index)),U!==null){let ce=U.__ngLastListenerFn__||U;ce.__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,f=!1}else{s=Td(r,e,u,s,!1);let ce=n.listen(b,i,s);d.push(s,ce),l&&l.push(i,$,j,j+1)}}else s=Td(r,e,u,s,!1);let p=r.outputs,g;if(f&&p!==null&&(g=p[i])){let _=g.length;if(_)for(let b=0;b<_;b+=2){let j=g[b],$=g[b+1],Kt=e[j][$].subscribe(s),ge=d.length;d.push(s,Kt),l&&l.push(i,r.index,ge,-(ge+1))}}}function Cd(t,e,n,r){let i=A(null);try{return Pe(6,e,n),n(r)!==!1}catch(s){return lh(t,s),!1}finally{Pe(7,e,n),A(i)}}function Td(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?fn(t.index,e):e;Aa(a);let c=Cd(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=Cd(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function De(t,e=""){let n=Q(),r=xt(),i=t+st,s=r.firstCreatePass?bi(r,i,1,e,null):r.data[i],o=wE(r,n,s,e,t);n[i]=o,fa()&&Ca(r,n,o,s),Zn(s,!1)}var wE=(t,e,n,r,i)=>(ha(!0),bv(e[ie],r));function ot(t){return wh("",t,""),ot}function wh(t,e,n){let r=Q(),i=gE(r,t,e,n);return i!==Ci&&_I(r,da(),i),wh}var DE=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Qd(!1,n.type),i=r.length>0?cE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(k(it))})}}return t})();function Dh(t){mh("NgStandalone"),t.getStandaloneInjector=e=>e.get(DE).getOrCreateStandaloneInjector(t)}var Ch=new F("");function La(t){return!!t&&typeof t.then=="function"}function Th(t){return!!t&&typeof t.subscribe=="function"}var CE=new F(""),bh=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=z(CE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(La(s))n.push(s);else if(Th(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),TE=new F("");function bE(){Pu(()=>{throw new M(600,!1)})}function SE(t){return t.isBoundToModule}function NE(t,e,n){try{let r=n();return La(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Fa=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=z(xf),this.afterRenderEffectManager=z(_h),this.externalTestViews=new Set,this.beforeRender=new nt,this.afterTick=new nt,this.componentTypes=[],this.components=[],this.isStable=z(vh).hasPendingTasks.pipe(ro(n=>!n)),this._injector=z(it)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof fi;if(!this._injector.get(bh).done){let f=!i&&cy(n),p=!1;throw new M(405,p)}let o;i?o=n:o=this._injector.get(Ra).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=SE(o)?void 0:this._injector.get(dn),c=r||o.selector,l=o.create(ma.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Ch,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),po(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new M(101,!1);let r=A(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,A(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===dh)throw new M(103,!1);if(n){let s=r===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)AE(o,s,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>$o(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>$o(s))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;po(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(TE,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>po(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new M(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function po(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function AE(t,e,n){!e&&!$o(t)||ME(t,n,e)}function $o(t){return ca(t)}function ME(t,e,n){let r;n?(r=0,t[y]|=1024):t[y]&64?r=0:r=1,fh(t,e,r)}var RE=(()=>{class t{constructor(){this.zone=z(Y),this.applicationRef=z(Fa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function PE(t){return[{provide:Y,useFactory:t},{provide:jn,multi:!0,useFactory:()=>{let e=z(RE,{optional:!0});return()=>e.initialize()}},{provide:jn,multi:!0,useFactory:()=>{let e=z(LE);return()=>{e.initialize()}}},{provide:xf,useFactory:xE}]}function xE(){let t=z(Y),e=z(ze);return n=>t.runOutsideAngular(()=>e.handleError(n))}function kE(t){let e=PE(()=>new Y(OE(t)));return Kd([[],e])}function OE(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var LE=(()=>{class t{constructor(){this.subscription=new re,this.initialized=!1,this.zone=z(Y),this.pendingTasks=z(vh)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Y.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Y.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function FE(){return typeof $localize<"u"&&$localize.locale||gi}var Va=new F("",{providedIn:"root",factory:()=>z(Va,T.Optional|T.SkipSelf)||FE()});var Sh=new F("");var Xr=null;function VE(t=[],e){return ma.create({name:e,providers:[{provide:vi,useValue:"platform"},{provide:Sh,useValue:new Set([()=>Xr=null])},...t]})}function UE(t=[]){if(Xr)return Xr;let e=VE(t);return Xr=e,bE(),jE(e),e}function jE(t){t.get(va,null)?.forEach(n=>n())}var Wo=class{constructor(){}supports(e){return Ih(e)}create(e){return new Go(e)}},BE=(t,e)=>e,Go=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||BE}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<bd(r,i,s)?n:r,a=bd(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let p=f<s.length?s[f]:s[f]=0,g=p+f;u<=g&&g<l&&(s[f]=p+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Ih(e))throw new M(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,lE(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new zo(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new mi),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new mi),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zo=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},qo=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},mi=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new qo,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function bd(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Sd(){return new Ua([new Wo])}var Ua=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:Sd})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Sd()),deps:[[t,new z_,new Fd]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new M(901,!1)}}return t})();function Nh(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=UE(r),s=[kE(),...n||[]],a=new pi({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Y);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(ze,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:p=>{l.handleError(p)}})});let d=()=>a.destroy(),f=i.get(Sh);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),NE(l,c,()=>{let p=a.get(bh);return p.runInitializers(),p.donePromise.then(()=>{let g=a.get(Va,gi);vE(g||gi);let _=a.get(Fa);return e!==void 0&&_.bootstrap(e),_})})})}catch(e){return Promise.reject(e)}}var Mh=null;function Ha(){return Mh}function Rh(t){Mh??=t}var Ni=class{};var at=new F("");function Ph(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ba=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},xh=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ba(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),Ah(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Ah(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Jn(xa),Jn(Ma),Jn(Ua))}}static{this.\u0275dir=Wd({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function Ah(t,e){t.context.$implicit=e.item}var $a=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=ta({type:t})}static{this.\u0275inj=Ko({})}}return t})(),kh="browser",zE="server";function Wa(t){return t===zE}var Ai=class{};var qa=class extends Ni{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ya=class t extends qa{static makeCurrent(){Rh(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=KE();return n==null?null:QE(n)}resetBaseElement(){tr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ph(document.cookie,e)}},tr=null;function KE(){return tr=tr||document.querySelector("base"),tr?tr.getAttribute("href"):null}function QE(t){return new URL(t,document.baseURI).pathname}var ZE=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Ka=new F(""),Vh=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new M(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(k(Ka),k(Y))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Mi=class{constructor(e){this._doc=e}},Ga="ng-app-id",Uh=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wa(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Ga}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Ga),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Ga,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(k(at),k(ya),k(Ia,8),k(hn))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Za=/%COMP%/g,jh="%COMP%",JE=`_nghost-${jh}`,XE=`_ngcontent-${jh}`,ew=!0,tw=new F("",{providedIn:"root",factory:()=>ew});function nw(t){return XE.replace(Za,t)}function rw(t){return JE.replace(Za,t)}function Bh(t,e){return e.map(n=>n.replace(Za,t))}var Oh=(()=>{class t{constructor(n,r,i,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Wa(a),this.defaultRenderer=new nr(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ke.ShadowDom&&(r=G(D({},r),{encapsulation:ke.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Ri?i.applyToHost(n):i instanceof rr&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case ke.Emulated:s=new Ri(c,l,r,this.appId,u,o,a,d);break;case ke.ShadowDom:return new Qa(c,l,n,r,o,a,this.nonce,d);default:s=new rr(c,l,r,u,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(k(Vh),k(Uh),k(ya),k(tw),k(at),k(hn),k(Y),k(Ia))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),nr=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(za[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Lh(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Lh(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new M(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=za[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=za[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(kt.DashCase|kt.Important)?e.style.setProperty(n,r,i&kt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&kt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ha().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Lh(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Qa=class extends nr{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Bh(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rr=class extends nr{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Bh(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ri=class extends rr{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=nw(l),this.hostAttr=rw(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},iw=(()=>{class t extends Mi{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(k(at))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Fh=["alt","control","meta","shift"],sw={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ow={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},aw=(()=>{class t extends Mi{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ha().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Fh.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=sw[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Fh.forEach(o=>{if(o!==i){let a=ow[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(k(at))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function Hh(t,e){return Nh(D({rootComponent:t},cw(e)))}function cw(t){return{appProviders:[...hw,...t?.providers??[]],platformProviders:fw}}function lw(){Ya.makeCurrent()}function uw(){return new ze}function dw(){return jf(document),document}var fw=[{provide:hn,useValue:kh},{provide:va,useValue:lw,multi:!0},{provide:at,useFactory:dw,deps:[]}];var hw=[{provide:vi,useValue:"root"},{provide:ze,useFactory:uw,deps:[]},{provide:Ka,useClass:iw,multi:!0,deps:[at,Y,hn]},{provide:Ka,useClass:aw,multi:!0,deps:[at]},Oh,Uh,Vh,{provide:Yn,useExisting:Oh},{provide:Ai,useClass:ZE,deps:[]},[]];var $h={providers:[]};var Wh=()=>{};var Xa={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(t,e){if(!t)throw Ot(e)},Ot=function(t){return new Error("Firebase Database ("+Xa.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var qh=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pw=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,p=l&63;c||(p=64,o||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qh(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new ec;let f=s<<2|a>>4;if(r.push(f),l!==64){let p=a<<4&240|l>>2;if(r.push(p),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ec=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},nc=function(t){let e=qh(t);return xi.encodeByteArray(e,!0)},sr=function(t){return nc(t).replace(/\./g,"")},pn=function(t){try{return xi.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Yh(t){return Kh(void 0,t)}function Kh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!gw(n)||(t[n]=Kh(t[n],e[n]));return t}function gw(t){return t!=="__proto__"}function mw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var _w=()=>mw().__FIREBASE_DEFAULTS__,yw=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&pn(t[1]);return e&&JSON.parse(e)},rc=()=>{try{return Wh()||_w()||yw()||vw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ic=t=>rc()?.emulatorHosts?.[t],Qh=t=>{let e=ic(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sc=()=>rc()?.config,oc=t=>rc()?.[`_${t}`];var ct=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function lt(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function ki(t){return h(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function Zh(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=D({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sr(JSON.stringify(n)),sr(JSON.stringify(o)),""].join(".")}var ir={};function Iw(){let t={prod:[],emulator:[]};for(let e of Object.keys(ir))ir[e]?t.emulator.push(e):t.prod.push(e);return t}function Ew(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var Gh=!1;function Oi(t,e){if(typeof window>"u"||typeof document>"u"||!lt(window.location.host)||ir[t]===e||ir[t]||Gh)return;ir[t]=e;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",s=Iw().prod.length>0;function o(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Gh=!0,o()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=Ew(r),p=n("text"),g=document.getElementById(p)||document.createElement("span"),_=n("learnmore"),b=document.getElementById(_)||document.createElement("a"),j=n("preprendIcon"),$=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let U=f.element;a(U),u(b,_);let ce=l();c($,j),U.append($,g,b,ce),document.body.appendChild(U)}s?(g.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Z(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function or(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Z())}function Jh(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xh(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Li(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ep(){let t=Z();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ve(){return Xa.NODE_CLIENT===!0||Xa.NODE_ADMIN===!0}function tp(){try{return typeof indexedDB=="object"}catch{return!1}}function np(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var ww="FirebaseError",Ce=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ww,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}},Qe=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Dw(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ce(i,a,r)}};function Dw(t,e){return t.replace(Cw,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Cw=/\{\$([^}]+)}/g;function gn(t){return JSON.parse(t)}function H(t){return JSON.stringify(t)}var rp=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=gn(pn(s[0])||""),n=gn(pn(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var ip=function(t){let e=rp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},sp=function(t){let e=rp(t).claims;return typeof e=="object"&&e.admin===!0};function fe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ut(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ar(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cr(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ue(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(zh(s)&&zh(o)){if(!Ue(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function zh(t){return t!==null&&typeof t=="object"}function Lt(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Pi=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function op(t,e){let n=new tc(t,e);return n.subscribe.bind(n)}var tc=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Tw(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ja),i.error===void 0&&(i.error=Ja),i.complete===void 0&&(i.complete=Ja);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Tw(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ja(){}function ac(t,e){return`${t} failed: ${e} argument `}var ap=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,m(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lr=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var CM=4*60*60*1e3;function ee(t){return t&&t._delegate?t._delegate:t}var he=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ft="[DEFAULT]";var Fi=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ct;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sw(e))try{this.getOrInitializeService({instanceIdentifier:Ft})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ft){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return h(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ft){return this.instances.has(e)}getOptions(e=Ft){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ft){return this.component?this.component.multipleInstances?e:Ft:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function bw(t){return t===Ft?void 0:t}function Sw(t){return t.instantiationMode==="EAGER"}var ur=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Fi(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Nw=[],P=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(P||{}),Aw={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},Mw=P.INFO,Rw={[P.DEBUG]:"log",[P.VERBOSE]:"log",[P.INFO]:"info",[P.WARN]:"warn",[P.ERROR]:"error"},Pw=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Rw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},dt=class{constructor(e){this.name=e,this._logLevel=Mw,this._logHandler=Pw,this._userLogHandler=null,Nw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in P))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Aw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,P.DEBUG,...e),this._logHandler(this,P.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,P.VERBOSE,...e),this._logHandler(this,P.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,P.INFO,...e),this._logHandler(this,P.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,P.WARN,...e),this._logHandler(this,P.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,P.ERROR,...e),this._logHandler(this,P.ERROR,...e)}};var xw=(t,e)=>e.some(n=>t instanceof n),cp,lp;function kw(){return cp||(cp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ow(){return lp||(lp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var up=new WeakMap,lc=new WeakMap,dp=new WeakMap,cc=new WeakMap,dc=new WeakMap;function Lw(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(je(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&up.set(n,t)}).catch(()=>{}),dc.set(e,t),e}function Fw(t){if(lc.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});lc.set(t,e)}var uc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return je(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fp(t){uc=t(uc)}function Vw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Vi(this),e,...n);return dp.set(r,e.sort?e.sort():[e]),je(r)}:Ow().includes(t)?function(...e){return t.apply(Vi(this),e),je(up.get(this))}:function(...e){return je(t.apply(Vi(this),e))}}function Uw(t){return typeof t=="function"?Vw(t):(t instanceof IDBTransaction&&Fw(t),xw(t,kw())?new Proxy(t,uc):t)}function je(t){if(t instanceof IDBRequest)return Lw(t);if(cc.has(t))return cc.get(t);let e=Uw(t);return e!==t&&(cc.set(t,e),dc.set(e,t)),e}var Vi=t=>dc.get(t);function pp(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=je(o);return r&&o.addEventListener("upgradeneeded",c=>{r(je(o.result),c.oldVersion,c.newVersion,je(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var jw=["get","getKey","getAll","getAllKeys","count"],Bw=["put","add","delete","clear"],fc=new Map;function hp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fc.get(e))return fc.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Bw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jw.includes(n)))return;let s=function(o,...a){return h(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return fc.set(e,s),s}fp(t=>G(D({},t),{get:(e,n,r)=>hp(e,n)||t.get(e,n,r),has:(e,n)=>!!hp(e,n)||t.has(e,n)}));var pc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Hw(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Hw(t){return t.getComponent()?.type==="VERSION"}var gc="@firebase/app",gp="0.14.6";var Ze=new dt("@firebase/app"),$w="@firebase/app-compat",Ww="@firebase/analytics-compat",Gw="@firebase/analytics",zw="@firebase/app-check-compat",qw="@firebase/app-check",Yw="@firebase/auth",Kw="@firebase/auth-compat",Qw="@firebase/database",Zw="@firebase/data-connect",Jw="@firebase/database-compat",Xw="@firebase/functions",eD="@firebase/functions-compat",tD="@firebase/installations",nD="@firebase/installations-compat",rD="@firebase/messaging",iD="@firebase/messaging-compat",sD="@firebase/performance",oD="@firebase/performance-compat",aD="@firebase/remote-config",cD="@firebase/remote-config-compat",lD="@firebase/storage",uD="@firebase/storage-compat",dD="@firebase/firestore",fD="@firebase/ai",hD="@firebase/firestore-compat",pD="firebase",gD="12.6.0";var mc="[DEFAULT]",mD={[gc]:"fire-core",[$w]:"fire-core-compat",[Gw]:"fire-analytics",[Ww]:"fire-analytics-compat",[qw]:"fire-app-check",[zw]:"fire-app-check-compat",[Yw]:"fire-auth",[Kw]:"fire-auth-compat",[Qw]:"fire-rtdb",[Zw]:"fire-data-connect",[Jw]:"fire-rtdb-compat",[Xw]:"fire-fn",[eD]:"fire-fn-compat",[tD]:"fire-iid",[nD]:"fire-iid-compat",[rD]:"fire-fcm",[iD]:"fire-fcm-compat",[sD]:"fire-perf",[oD]:"fire-perf-compat",[aD]:"fire-rc",[cD]:"fire-rc-compat",[lD]:"fire-gcs",[uD]:"fire-gcs-compat",[dD]:"fire-fst",[hD]:"fire-fst-compat",[fD]:"fire-vertex","fire-js":"fire-js",[pD]:"fire-js-all"};var Ui=new Map,_D=new Map,_c=new Map;function mp(t,e){try{t.container.addComponent(e)}catch(n){Ze.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ht(t){let e=t.name;if(_c.has(e))return Ze.debug(`There were multiple attempts to register component ${e}.`),!1;_c.set(e,t);for(let n of Ui.values())mp(n,t);for(let n of _D.values())mp(n,t);return!0}function fr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function le(t){return t==null?!1:t.settings!==void 0}var yD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ft=new Qe("app","Firebase",yD);var yc=class{constructor(e,n,r){this._isDeleted=!1,this._options=D({},e),this._config=D({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new he("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}};var pt=gD;function Ec(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=D({name:mc,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ft.create("bad-app-name",{appName:String(i)});if(n||(n=sc()),!n)throw ft.create("no-options");let s=Ui.get(i);if(s){if(Ue(n,s.options)&&Ue(r,s.config))return s;throw ft.create("duplicate-app",{appName:i})}let o=new ur(i);for(let c of _c.values())o.addComponent(c);let a=new yc(n,r,o);return Ui.set(i,a),a}function ji(t=mc){let e=Ui.get(t);if(!e&&t===mc&&sc())return Ec();if(!e)throw ft.create("no-app",{appName:t});return e}function Te(t,e,n){let r=mD[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ze.warn(o.join(" "));return}ht(new he(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var vD="firebase-heartbeat-database",ID=1,dr="firebase-heartbeat-store",hc=null;function Ip(){return hc||(hc=pp(vD,ID,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dr)}catch(n){console.warn(n)}}}}).catch(t=>{throw ft.create("idb-open",{originalErrorMessage:t.message})})),hc}function ED(t){return h(this,null,function*(){try{let n=(yield Ip()).transaction(dr),r=yield n.objectStore(dr).get(Ep(t));return yield n.done,r}catch(e){if(e instanceof Ce)Ze.warn(e.message);else{let n=ft.create("idb-get",{originalErrorMessage:e?.message});Ze.warn(n.message)}}})}function _p(t,e){return h(this,null,function*(){try{let r=(yield Ip()).transaction(dr,"readwrite");yield r.objectStore(dr).put(e,Ep(t)),yield r.done}catch(n){if(n instanceof Ce)Ze.warn(n.message);else{let r=ft.create("idb-set",{originalErrorMessage:n?.message});Ze.warn(r.message)}}})}function Ep(t){return`${t.name}!${t.options.appId}`}var wD=1024,DD=30,vc=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Ic(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return h(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>DD){let i=TD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ze.warn(e)}})}getHeartbeatsHeader(){return h(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=yp(),{heartbeatsToSend:n,unsentEntries:r}=CD(this._heartbeatsCache.heartbeats),i=sr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ze.warn(e),""}})}};function yp(){return new Date().toISOString().substring(0,10)}function CD(t,e=wD){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ic=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return h(this,null,function*(){return tp()?np().then(()=>!0).catch(()=>!1):!1})}read(){return h(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield ED(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return h(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return _p(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return h(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return _p(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function vp(t){return sr(JSON.stringify({version:2,heartbeats:t})).length}function TD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function bD(t){ht(new he("platform-logger",e=>new pc(e),"PRIVATE")),ht(new he("heartbeat",e=>new vc(e),"PRIVATE")),Te(gc,gp,t),Te(gc,gp,"esm2020"),Te("fire-js","")}bD("");var SD="firebase",ND="12.6.0";Te(SD,ND,"app");function Lp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Fp=Lp,Vp=new Qe("auth","Firebase",Lp());var zi=new dt("@firebase/auth");function AD(t,...e){zi.logLevel<=P.WARN&&zi.warn(`Auth (${pt}): ${t}`,...e)}function Hi(t,...e){zi.logLevel<=P.ERROR&&zi.error(`Auth (${pt}): ${t}`,...e)}function yt(t,...e){throw Bc(t,...e)}function Vt(t,...e){return Bc(t,...e)}function Up(t,e,n){let r=G(D({},Fp()),{[e]:n});return new Qe("auth","Firebase",r).create(e,{appName:t.name})}function _t(t){return Up(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bc(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Vp.create(t,...e)}function v(t,e,...n){if(!t)throw Bc(e,...n)}function Je(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Hi(e),new Error(e)}function vt(t,e){t||Je(e)}function Tc(){return typeof self<"u"&&self.location?.href||""}function MD(){return wp()==="http:"||wp()==="https:"}function wp(){return typeof self<"u"&&self.location?.protocol||null}function RD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MD()||Xh()||"connection"in navigator)?navigator.onLine:!0}function PD(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ut=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,vt(n>e,"Short delay should be less than long delay!"),this.isMobile=or()||Li()}get(){return RD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Hc(t,e){vt(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var qi=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var xD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var kD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OD=new Ut(3e4,6e4);function is(t,e){return t.tenantId&&!e.tenantId?G(D({},e),{tenantId:t.tenantId}):e}function mn(s,o,a,c){return h(this,arguments,function*(t,e,n,r,i={}){return jp(t,i,()=>h(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Lt(D({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);let p=D({method:e,headers:f},l);return Jh()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&lt(t.emulatorConfig.host)&&(p.credentials="include"),qi.fetch()(yield Hp(t,t.config.apiHost,n,d),p)}))})}function jp(t,e,n){return h(this,null,function*(){t._canInitEmulator=!1;let r=D(D({},xD),e);try{let i=new bc(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Bi(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bi(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Bi(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Bi(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Up(t,u,l);yt(t,u)}}catch(i){if(i instanceof Ce)throw i;yt(t,"network-request-failed",{message:String(i)})}})}function Bp(s,o,a,c){return h(this,arguments,function*(t,e,n,r,i={}){let l=yield mn(t,e,n,r,i);return"mfaPendingCredential"in l&&yt(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function Hp(t,e,n,r){return h(this,null,function*(){let i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Hc(t.config,i):`${t.config.apiScheme}://${i}`;return kD.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var bc=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vt(this.auth,"network-request-failed")),OD.get())})}};function Bi(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Vt(t,e,r);return i.customData._tokenResponse=n,i}function LD(t,e){return h(this,null,function*(){return mn(t,"POST","/v1/accounts:delete",e)})}function Yi(t,e){return h(this,null,function*(){return mn(t,"POST","/v1/accounts:lookup",e)})}function hr(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $p(t,e=!1){return h(this,null,function*(){let n=ee(t),r=yield n.getIdToken(e),i=$c(r);v(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:hr(wc(i.auth_time)),issuedAtTime:hr(wc(i.iat)),expirationTime:hr(wc(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function wc(t){return Number(t)*1e3}function $c(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hi("JWT malformed, contained fewer than 3 sections"),null;try{let i=pn(n);return i?JSON.parse(i):(Hi("Failed to decode base64 JWT payload"),null)}catch(i){return Hi("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Dp(t){let e=$c(t);return v(e,"internal-error"),v(typeof e.exp<"u","internal-error"),v(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function gr(t,e,n=!1){return h(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ce&&FD(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function FD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Sc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>h(this,null,function*(){yield this.iteration()}),n)}iteration(){return h(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var mr=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hr(this.lastLoginAt),this.creationTime=hr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ki(t){return h(this,null,function*(){let e=t.auth,n=yield t.getIdToken(),r=yield gr(t,Yi(e,{idToken:n}));v(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let s=i.providerUserInfo?.length?Gp(i.providerUserInfo):[],o=VD(t.providerData,s),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!o?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new mr(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,u)})}function Wp(t){return h(this,null,function*(){let e=ee(t);yield Ki(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function VD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Gp(t){return t.map(r=>{var i=r,{providerId:e}=i,n=Ws(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function UD(t,e){return h(this,null,function*(){let n=yield jp(t,{},()=>h(this,null,function*(){let r=Lt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=yield Hp(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&lt(t.emulatorConfig.host)&&(c.credentials="include"),qi.fetch()(o,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function jD(t,e){return h(this,null,function*(){return mn(t,"POST","/v2/accounts:revokeToken",is(t,e))})}var pr=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v(typeof e.idToken<"u","internal-error"),v(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){v(e.length!==0,"internal-error");let n=Dp(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return h(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(v(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return h(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield UD(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(v(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(v(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(v(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Je("not implemented")}};function gt(t,e){v(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var mt=class t{constructor(s){var o=s,{uid:e,auth:n,stsTokenManager:r}=o,i=Ws(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mr(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return h(this,null,function*(){let n=yield gr(this,this.stsTokenManager.getToken(this.auth,e));return v(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return $p(this,e)}reload(){return Wp(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>D({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(G(D({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return h(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Ki(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return h(this,null,function*(){if(le(this.auth.app))return Promise.reject(_t(this.auth));let e=yield this.getIdToken();return yield gr(this,LD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return G(D({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>D({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:g,stsTokenManager:_}=n;v(d&&_,e,"internal-error");let b=pr.fromJSON(this.name,_);v(typeof d=="string",e,"internal-error"),gt(r,e.name),gt(i,e.name),v(typeof f=="boolean",e,"internal-error"),v(typeof p=="boolean",e,"internal-error"),gt(s,e.name),gt(o,e.name),gt(a,e.name),gt(c,e.name),gt(l,e.name),gt(u,e.name);let j=new t({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:l,lastLoginAt:u});return g&&Array.isArray(g)&&(j.providerData=g.map($=>D({},$))),c&&(j._redirectEventId=c),j}static _fromIdTokenResponse(e,n,r=!1){return h(this,null,function*(){let i=new pr;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ki(s),s})}static _fromGetAccountInfoResponse(e,n,r){return h(this,null,function*(){let i=n.users[0];v(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Gp(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new pr;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var Cp=new Map;function Xe(t){vt(t instanceof Function,"Expected a class definition");let e=Cp.get(t);return e?(vt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Cp.set(t,e),e)}var BD=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return h(this,null,function*(){return!0})}_set(n,r){return h(this,null,function*(){this.storage[n]=r})}_get(n){return h(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return h(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Nc=BD;function $i(t,e,n){return`firebase:${t}:${e}:${n}`}var Qi=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=$i(this.userKey,i.apiKey,s),this.fullPersistenceKey=$i("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return h(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Yi(this.auth,{idToken:e}).catch(()=>{});return n?mt._fromGetAccountInfoResponse(this.auth,n,e):null}return mt._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return h(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return h(this,null,function*(){if(!n.length)return new t(Xe(Nc),e,r);let i=(yield Promise.all(n.map(l=>h(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Xe(Nc),o=$i(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d;if(typeof u=="string"){let f=yield Yi(e,{idToken:u}).catch(()=>{});if(!f)break;d=yield mt._fromGetAccountInfoResponse(e,f,u)}else d=mt._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>h(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function Tp(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zp(e))return"Blackberry";if(Jp(e))return"Webos";if(qp(e))return"Safari";if((e.includes("chrome/")||Yp(e))&&!e.includes("edge/"))return"Chrome";if(Qp(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function zp(t=Z()){return/firefox\//i.test(t)}function qp(t=Z()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yp(t=Z()){return/crios\//i.test(t)}function Kp(t=Z()){return/iemobile/i.test(t)}function Qp(t=Z()){return/android/i.test(t)}function Zp(t=Z()){return/blackberry/i.test(t)}function Jp(t=Z()){return/webos/i.test(t)}function Wc(t=Z()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HD(t=Z()){return Wc(t)&&!!window.navigator?.standalone}function $D(){return ep()&&document.documentMode===10}function Xp(t=Z()){return Wc(t)||Qp(t)||Jp(t)||Zp(t)||/windows phone/i.test(t)||Kp(t)}function eg(t,e=[]){let n;switch(t){case"Browser":n=Tp(Z());break;case"Worker":n=`${Tp(Z())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pt}/${r}`}var Ac=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return h(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function WD(n){return h(this,arguments,function*(t,e={}){return mn(t,"GET","/v2/passwordPolicy",is(t,e))})}var GD=6,Mc=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??GD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Rc=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zi(this),this.idTokenSubscription=new Zi(this),this.beforeStateQueue=new Ac(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xe(n)),this._initializationPromise=this.queue(()=>h(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Qi.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return h(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return h(this,null,function*(){try{let n=yield Yi(this,{idToken:e}),r=yield mt._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return h(this,null,function*(){if(le(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return h(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return h(this,null,function*(){try{yield Ki(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=PD()}_delete(){return h(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return h(this,null,function*(){if(le(this.app))return Promise.reject(_t(this));let n=e?ee(e):null;return n&&v(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return h(this,null,function*(){if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>h(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return h(this,null,function*(){return le(this.app)?Promise.reject(_t(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return le(this.app)?Promise.reject(_t(this)):this.queue(()=>h(this,null,function*(){yield this.assertedPersistence.setPersistence(Xe(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return h(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return h(this,null,function*(){let e=yield WD(this),n=new Mc(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qe("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return h(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield jD(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,n){return h(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return h(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Xe(e)||this._popupRedirectResolver;v(n,this,"argument-error"),this.redirectPersistenceManager=yield Qi.create(this,[Xe(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return h(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>h(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return h(this,null,function*(){if(e===this.currentUser)return this.queue(()=>h(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(v(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return h(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return h(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return h(this,null,function*(){if(le(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&AD(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function ss(t){return ee(t)}var Zi=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=op(n=>this.observer=n)}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Gc={loadJS(){return h(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zD(t){Gc=t}function qD(t){return Gc.loadJS(t)}function YD(){return Gc.gapiScript}function tg(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function ng(t,e){let n=fr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Ue(s,e??{}))return i;yt(i,"already-initialized")}return n.initialize({options:e})}function KD(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Xe);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function rg(t,e,n){let r=ss(t);v(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=ig(e),{host:o,port:a}=QD(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){v(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),v(Ue(l,r.config.emulator)&&Ue(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,lt(o)?(ki(`${s}//${o}${c}`),Oi("Auth",!0)):i||ZD()}function ig(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QD(t){let e=ig(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:bp(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:bp(o)}}}function bp(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function ZD(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ji=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Je("not implemented")}_getIdTokenResponse(e){return Je("not implemented")}_linkToIdToken(e,n){return Je("not implemented")}_getReauthenticationResolver(e){return Je("not implemented")}};function Dc(t,e){return h(this,null,function*(){return Bp(t,"POST","/v1/accounts:signInWithIdp",is(t,e))})}var Xi=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Pc=class extends Xi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function JD(t,e){return h(this,null,function*(){return Bp(t,"POST","/v1/accounts:signUp",is(t,e))})}var jt=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return h(this,null,function*(){let s=yield mt._fromIdTokenResponse(e,r,i),o=Sp(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return h(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Sp(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Sp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function zc(t){return h(this,null,function*(){if(le(t.app))return Promise.reject(_t(t));let e=ss(t);if(yield e._initializationPromise,e.currentUser?.isAnonymous)return new jt({user:e.currentUser,providerId:null,operationType:"signIn"});let n=yield JD(e,{returnSecureToken:!0}),r=yield jt._fromIdTokenResponse(e,"signIn",n,!0);return yield e._updateCurrentUser(r.user),r})}var xc=class t extends Ce{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function sg(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xc._fromErrorAndOperation(t,s,e,r):s})}function XD(t,e,n=!1){return h(this,null,function*(){let r=yield gr(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return jt._forOperation(t,"link",r)})}function eC(t,e,n=!1){return h(this,null,function*(){let{auth:r}=t;if(le(r.app))return Promise.reject(_t(r));let i="reauthenticate";try{let s=yield gr(t,sg(r,i,e,t),n);v(s.idToken,r,"internal-error");let o=$c(s.idToken);v(o,r,"internal-error");let{sub:a}=o;return v(t.uid===a,r,"user-mismatch"),jt._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&yt(r,"user-mismatch"),s}})}function tC(t,e,n=!1){return h(this,null,function*(){if(le(t.app))return Promise.reject(_t(t));let r="signIn",i=yield sg(t,r,e),s=yield jt._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function og(t,e,n,r){return ee(t).onIdTokenChanged(e,n,r)}function ag(t,e,n){return ee(t).beforeAuthStateChanged(e,n)}function qc(t,e,n,r){return ee(t).onAuthStateChanged(e,n,r)}var es="__sak";var ts=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(es,"1"),this.storage.removeItem(es),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var nC=1e3,rC=10,iC=(()=>{class t extends ts{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xp(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);$D()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,rC):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},nC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return h(this,null,function*(){yield Ct(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return h(this,null,function*(){let r=yield Ct(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return h(this,null,function*(){yield Ct(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),cg=iC;var sC=(()=>{class t extends ts{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Yc=sC;function oC(t){return Promise.all(t.map(e=>h(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var aC=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return h(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>h(this,null,function*(){return u(r.origin,o)})),l=yield oC(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function lg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var kc=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return h(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=lg("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Be(){return window}function cC(t){Be().location.href=t}function ug(){return typeof Be().WorkerGlobalScope<"u"&&typeof Be().importScripts=="function"}function lC(){return h(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function uC(){return navigator?.serviceWorker?.controller||null}function dC(){return ug()?self:null}var dg="firebaseLocalStorageDb",fC=1,ns="firebaseLocalStorage",fg="fbase_key",Bt=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function os(t,e){return t.transaction([ns],e?"readwrite":"readonly").objectStore(ns)}function hC(){let t=indexedDB.deleteDatabase(dg);return new Bt(t).toPromise()}function Oc(){let t=indexedDB.open(dg,fC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(ns,{keyPath:fg})}catch(i){n(i)}}),t.addEventListener("success",()=>h(this,null,function*(){let r=t.result;r.objectStoreNames.contains(ns)?e(r):(r.close(),yield hC(),e(yield Oc()))}))})}function Np(t,e,n){return h(this,null,function*(){let r=os(t,!0).put({[fg]:e,value:n});return new Bt(r).toPromise()})}function pC(t,e){return h(this,null,function*(){let n=os(t,!1).get(e),r=yield new Bt(n).toPromise();return r===void 0?null:r.value})}function Ap(t,e){let n=os(t,!0).delete(e);return new Bt(n).toPromise()}var gC=800,mC=3,_C=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return h(this,null,function*(){return this.db?this.db:(this.db=yield Oc(),this.db)})}_withRetries(n){return h(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>mC)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return h(this,null,function*(){return ug()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return h(this,null,function*(){this.receiver=aC._getInstance(dC()),this.receiver._subscribe("keyChanged",(n,r)=>h(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>h(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return h(this,null,function*(){if(this.activeServiceWorker=yield lC(),!this.activeServiceWorker)return;this.sender=new kc(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return h(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||uC()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return h(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Oc();return yield Np(n,es,"1"),yield Ap(n,es),!0}catch{}return!1})}_withPendingWrite(n){return h(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return h(this,null,function*(){return this._withPendingWrite(()=>h(this,null,function*(){return yield this._withRetries(i=>Np(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return h(this,null,function*(){let r=yield this._withRetries(i=>pC(i,n));return this.localCache[n]=r,r})}_remove(n){return h(this,null,function*(){return this._withPendingWrite(()=>h(this,null,function*(){return yield this._withRetries(r=>Ap(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return h(this,null,function*(){let n=yield this._withRetries(s=>{let o=os(s,!1).getAll();return new Bt(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>h(this,null,function*(){return this._poll()}),gC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),hg=_C;var n0=tg("rcb"),r0=new Ut(3e4,6e4);function yC(t,e){return e?Xe(e):(v(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var _r=class extends Ji{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Dc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Dc(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function vC(t){return tC(t.auth,new _r(t),t.bypassAuthState)}function IC(t){let{auth:e,user:n}=t;return v(n,e,"internal-error"),eC(n,new _r(t),t.bypassAuthState)}function EC(t){return h(this,null,function*(){let{auth:e,user:n}=t;return v(n,e,"internal-error"),XD(n,new _r(t),t.bypassAuthState)})}var Lc=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>h(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return h(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vC;case"linkViaPopup":case"linkViaRedirect":return EC;case"reauthViaPopup":case"reauthViaRedirect":return IC;default:yt(this.auth,"internal-error")}}resolve(e){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var i0=new Ut(2e3,1e4);var wC="pendingRedirect",Wi=new Map,Fc=class t extends Lc{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return h(this,null,function*(){let e=Wi.get(this.auth._key());if(!e){try{let r=(yield DC(this.resolver,this.auth))?yield Ct(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wi.set(this.auth._key(),e)}return this.bypassAuthState||Wi.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return h(this,null,function*(){if(e.type==="signInViaRedirect")return Ct(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Ct(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return h(this,null,function*(){})}cleanUp(){}};function DC(t,e){return h(this,null,function*(){let n=bC(e),r=TC(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function CC(t,e){Wi.set(t._key(),e)}function TC(t){return Xe(t._redirectPersistence)}function bC(t){return $i(wC,t.config.apiKey,t.name)}function SC(t,e,n=!1){return h(this,null,function*(){if(le(t.app))return Promise.reject(_t(t));let r=ss(t),i=yC(r,e),o=yield new Fc(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var NC=10*60*1e3,Vc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!pg(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Vt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mp(e))}saveEventToCache(e){this.cachedEventUids.add(Mp(e)),this.lastProcessedEventTime=Date.now()}};function Mp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pg({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function AC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pg(t);default:return!1}}function MC(n){return h(this,arguments,function*(t,e={}){return mn(t,"GET","/v1/projects",e)})}var RC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PC=/^https?/;function xC(t){return h(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield MC(t);for(let n of e)try{if(kC(n))return}catch{}yt(t,"unauthorized-domain")})}function kC(t){let e=Tc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!PC.test(n))return!1;if(RC.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var OC=new Ut(3e4,6e4);function Rp(){let t=Be().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LC(t){return new Promise((e,n)=>{function r(){Rp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rp(),n(Vt(t,"network-request-failed"))},timeout:OC.get()})}if(Be().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Be().gapi?.load)r();else{let i=tg("iframefcb");return Be()[i]=()=>{gapi.load?r():n(Vt(t,"network-request-failed"))},qD(`${YD()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw Gi=null,e})}var Gi=null;function FC(t){return Gi=Gi||LC(t),Gi}var VC=new Ut(5e3,15e3),UC="__/auth/iframe",jC="emulator/auth/iframe",BC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $C(t){let e=t.config;v(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Hc(e,jC):`https://${t.config.authDomain}/${UC}`,r={apiKey:e.apiKey,appName:t.name,v:pt},i=HC.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Lt(r).slice(1)}`}function WC(t){return h(this,null,function*(){let e=yield FC(t),n=Be().gapi;return v(n,t,"internal-error"),e.open({where:document.body,url:$C(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BC,dontclear:!0},r=>new Promise((i,s)=>h(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Vt(t,"network-request-failed"),a=Be().setTimeout(()=>{s(o)},VC.get());function c(){Be().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var GC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,qC=600,YC="_blank",KC="http://localhost",rs=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function QC(t,e,n,r=zC,i=qC){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=G(D({},GC),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Z().toLowerCase();n&&(a=Yp(l)?YC:n),zp(l)&&(e=e||KC,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(HD(l)&&a!=="_self")return ZC(e||"",a),new rs(null);let d=window.open(e||"",a,u);v(d,t,"popup-blocked");try{d.focus()}catch{}return new rs(d)}function ZC(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var JC="__/auth/handler",XC="emulator/auth/handler",eT=encodeURIComponent("fac");function Pp(t,e,n,r,i,s){return h(this,null,function*(){v(t.config.authDomain,t,"auth-domain-config-required"),v(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:pt,eventId:i};if(e instanceof Xi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ar(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Pc){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${eT}=${encodeURIComponent(c)}`:"";return`${tT(t)}?${Lt(a).slice(1)}${l}`})}function tT({config:t}){return t.emulator?Hc(t,XC):`https://${t.authDomain}/${JC}`}var Cc="webStorageSupport",Uc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yc,this._completeRedirectFn=SC,this._overrideRedirectResult=CC}_openPopup(e,n,r,i){return h(this,null,function*(){vt(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=yield Pp(e,n,r,Tc(),i);return QC(e,s,lg())})}_openRedirect(e,n,r,i){return h(this,null,function*(){yield this._originValidation(e);let s=yield Pp(e,n,r,Tc(),i);return cC(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(vt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return h(this,null,function*(){let n=yield WC(e),r=new Vc(e);return n.register("authEvent",i=>(v(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cc,{type:Cc},i=>{let s=i?.[0]?.[Cc];s!==void 0&&n(!!s),yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Xp()||qp()||Wc()}},gg=Uc;var xp="@firebase/auth",kp="1.11.1";var jc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return h(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function nT(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rT(t){ht(new he("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;v(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eg(t)},l=new Rc(r,i,s,c);return KD(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ht(new he("auth-internal",e=>{let n=ss(e.getProvider("auth").getImmediate());return(r=>new jc(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Te(xp,kp,nT(t)),Te(xp,kp,"esm2020")}var iT=5*60,sT=oc("authIdTokenMaxAge")||iT,Op=null,oT=t=>e=>h(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sT)return;let i=n?.token;Op!==i&&(Op=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Kc(t=ji()){let e=fr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=ng(t,{popupRedirectResolver:gg,persistence:[hg,cg,Yc]}),r=oc("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=oT(s.toString());ag(n,o,()=>o(n.currentUser)),og(n,a=>o(a))}}let i=ic("auth");return i&&rg(n,`http://${i}`),n}function aT(){return document.getElementsByTagName("head")?.[0]??document}zD({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Vt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",aT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rT("Browser");var mg="@firebase/database",_g="1.1.0";var Zl="";function cT(t){Zl=t}var rl=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),H(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:gn(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var il=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return fe(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Kg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new rl(e)}}catch{}return new il},$t=Kg("localStorage"),sl=Kg("sessionStorage");var In=new dt("@firebase/database"),Qg=function(){let t=1;return function(){return t++}}(),Zg=function(t){let e=ap(t),n=new Pi;n.update(e);let r=n.digest();return xi.encodeByteArray(r)},kr=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=kr.apply(null,r):typeof r=="object"?e+=H(r):e+=r,e+=" "}return e},Wt=null,yg=!0,lT=function(t,e){m(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(In.logLevel=P.VERBOSE,Wt=In.log.bind(In),e&&sl.set("logging_enabled",!0)):typeof t=="function"?Wt=t:(Wt=null,sl.remove("logging_enabled"))},J=function(...t){if(yg===!0&&(yg=!1,Wt===null&&sl.get("logging_enabled")===!0&&lT(!0)),Wt){let e=kr.apply(null,t);Wt(e)}},Or=function(t){return function(...e){J(t,...e)}},ol=function(...t){let e="FIREBASE INTERNAL ERROR: "+kr(...t);In.error(e)},et=function(...t){let e=`FIREBASE FATAL ERROR: ${kr(...t)}`;throw In.error(e),new Error(e)},ue=function(...t){let e="FIREBASE WARNING: "+kr(...t);In.warn(e)},uT=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ue("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jl=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},dT=function(t){if(Ve()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},wn="[MIN_NAME]",Gt="[MAX_NAME]",Rn=function(t,e){if(t===e)return 0;if(t===wn||e===Gt)return-1;if(e===wn||t===Gt)return 1;{let n=vg(t),r=vg(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},fT=function(t,e){return t===e?0:t<e?-1:1},yr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+H(e))},Xl=function(t){if(typeof t!="object"||t===null)return H(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=H(e[r]),n+=":",n+=Xl(t[e[r]]);return n+="}",n},Jg=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function oe(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Xg=function(t){m(!Jl(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},hT=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},pT=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function gT(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var mT=new RegExp("^-?(0*)\\d{1,10}$"),_T=-2147483648,yT=2147483647,vg=function(t){if(mT.test(t)){let e=Number(t);if(e>=_T&&e<=yT)return e}return null},Lr=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw ue("Exception was thrown by user callback.",n),e},Math.floor(0))}},vT=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Dr=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var al=class{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,le(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){ue(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var cl=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(J("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ue(e)}},Cr=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),cs="5",em="v",tm="s",nm="r",rm="f",im=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sm="ls",om="p",ll="ac",am="websocket",cm="long_polling";var ls=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$t.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$t.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function IT(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function lm(t,e,n){m(typeof e=="string","typeof type must == string"),m(typeof n=="object","typeof params must == object");let r;if(e===am)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cm)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);IT(t)&&(n.ns=t.namespace);let i=[];return oe(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var ul=class{constructor(){this.counters_={}}incrementCounter(e,n=1){fe(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Yh(this.counters_)}};var Qc={},Zc={};function eu(t){let e=t.toString();return Qc[e]||(Qc[e]=new ul),Qc[e]}function ET(t,e){let n=t.toString();return Zc[n]||(Zc[n]=e()),Zc[n]}var dl=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Lr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Ig="start",wT="close",DT="pLPCommand",CT="pRTLPCB",um="id",dm="pw",fm="ser",TT="cb",bT="seg",ST="ts",NT="d",AT="dframe",hm=1870,pm=30,MT=hm-pm,RT=25e3,PT=3e4,fl=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Or(e),this.stats_=eu(n),this.urlFn=c=>(this.appCheckToken&&(c[ll]=this.appCheckToken),lm(n,cm,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new dl(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(PT)),dT(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hl((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ig)this.id=a,this.password=c;else if(o===wT)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[Ig]="t",r[fm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[TT]=this.scriptTagHolder.uniqueCallbackIdentifier),r[em]=cs,this.transportSessionId&&(r[tm]=this.transportSessionId),this.lastSessionId&&(r[sm]=this.lastSessionId),this.applicationId&&(r[om]=this.applicationId),this.appCheckToken&&(r[ll]=this.appCheckToken),typeof location<"u"&&location.hostname&&im.test(location.hostname)&&(r[nm]=rm);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Ve()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hT()&&!pT()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=H(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=nc(n),i=Jg(r,MT);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Ve())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[AT]="t",r[um]=e,r[dm]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=H(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},hl=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ve())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Qg(),window[DT+this.uniqueCallbackIdentifier]=e,window[CT+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){J("frame writing exception"),a.stack&&J(a.stack),J(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||J("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[um]=this.myID,e[dm]=this.myPW,e[fm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+pm+r.length<=hm;){let o=this.pendingSegs.shift();r=r+"&"+bT+i+"="+o.seg+"&"+ST+i+"="+o.ts+"&"+NT+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(RT)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Ve()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{J("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var xT=16384,kT=45e3,us=null;typeof MozWebSocket<"u"?us=MozWebSocket:typeof WebSocket<"u"&&(us=WebSocket);var vr=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Or(this.connId),this.stats_=eu(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[em]=cs,!Ve()&&typeof location<"u"&&location.hostname&&im.test(location.hostname)&&(a[nm]=rm),r&&(a[tm]=r),i&&(a[sm]=i),s&&(a[ll]=s),o&&(a[om]=o),lm(n,am,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$t.set("previous_websocket_failure",!0);try{let i;if(Ve()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${cs}/${Zl}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new us(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&us!==null&&!t.forceDisallow_}static previouslyFailed(){return $t.isInMemoryStorage||$t.get("previous_websocket_failure")===!0}markConnectionHealthy(){$t.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=gn(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(m(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=H(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Jg(r,xT);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(kT))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),OT=(()=>{class t{static get ALL_TRANSPORTS(){return[fl,vr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=vr&&vr.isAvailable(),i=r&&!vr.previouslyFailed();if(n.webSocketOnly&&(r||ue("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[vr];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),LT=6e4,FT=5e3,VT=10*1024,UT=100*1024,Jc="t",Eg="d",jT="s",wg="r",BT="e",Dg="o",Cg="a",Tg="n",bg="p",HT="h",pl=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Or("c:"+this.id+":"),this.transportManager_=new OT(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Dr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>UT?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>VT?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Jc in e){let n=e[Jc];n===Cg?this.upgradeIfSecondaryHealthy_():n===wg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Dg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=yr("t",e),r=yr("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Cg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Tg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=yr("t",e),r=yr("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=yr(Jc,e);if(Eg in e){let r=e[Eg];if(n===HT){let i=D({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Tg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===jT?this.onConnectionShutdown_(r):n===wg?this.onReset_(r):n===BT?ol("Server Error: "+r):n===Dg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ol("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),cs!==r&&ue("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Dr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(LT))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Dr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(FT))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bg,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($t.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ds=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var fs=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var hs=class t extends fs{static getInstance(){return new t}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!or()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Sg=32,Ng=768,x=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function N(){return new x("")}function E(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function wt(t){return t.pieces_.length-t.pieceNum_}function O(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new x(t.pieces_,e)}function gm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function $T(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function mm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _m(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new x(e,0)}function W(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof x)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new x(n,0)}function C(t){return t.pieceNum_>=t.pieces_.length}function te(t,e){let n=E(t),r=E(e);if(n===null)return e;if(n===r)return te(O(t),O(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tu(t,e){if(wt(t)!==wt(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Se(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(wt(t)>wt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var gl=class{constructor(e,n){this.errorPrefix_=n,this.parts_=mm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=lr(this.parts_[r]);ym(this)}};function WT(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=lr(e),ym(t)}function GT(t){let e=t.parts_.pop();t.byteLength_-=lr(e),t.parts_.length>0&&(t.byteLength_-=1)}function ym(t){if(t.byteLength_>Ng)throw new Error(t.errorPrefix_+"has a key path longer than "+Ng+" bytes ("+t.byteLength_+").");if(t.parts_.length>Sg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Sg+") or object contains a cycle "+Ht(t))}function Ht(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var ml=class t extends fs{static getInstance(){return new t}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ir=1e3,zT=60*5*1e3,Ag=30*1e3,qT=1.3,YT=3e4,KT="server_kill",Mg=3,nu=(()=>{class t extends ds{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Or("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ir,this.maxReconnectDelay_=zT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Ve())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ml.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&hs.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(H(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new ct,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&fe(n,"w")){let i=ut(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();ue(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||sp(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ag)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=ip(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+H(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ol("Unrecognized action received from server: "+H(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ir,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ir,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>YT&&(this.reconnectDelay_=Ir),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*qT)}this.onConnectStatus_(!1)}establishConnection_(){return h(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,p]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?J("getToken() completed but was canceled"):(J("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new pl(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{ue(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(KT)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&ue(f),l())}}})}interrupt(n){J("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){J("Resuming connection for reason: "+n),delete this.interruptReasons_[n],ar(this.interruptReasons_)&&(this.reconnectDelay_=Ir,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Xl(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new x(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){J("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Mg&&(this.reconnectDelay_=Ag,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){J("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Mg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Ve()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Zl.replace(/\./g,"-")]=1,or()?n["framework.cordova"]=1:Li()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=hs.getInstance().currentlyOnline();return ar(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),w=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Dn=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new w(wn,e),i=new w(wn,n);return this.compare(r,i)!==0}minPost(){return w.MIN}};var as,ps=class extends Dn{static get __EMPTY_NODE(){return as}static set __EMPTY_NODE(e){as=e}compare(e,n){return Rn(e.name,n.name)}isDefinedOn(e){throw Ot("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return w.MIN}maxPost(){return new w(Gt,as)}makePost(e,n){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new w(e,as)}toString(){return".key"}},En=new ps;var yn=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},be=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??pe.EMPTY_NODE,this.right=o??pe.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return pe.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return pe.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),_l=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new be(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},pe=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,be.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,be.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new yn(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new yn(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new yn(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new yn(this.root_,null,this.comparator_,!0,e)}};pe.EMPTY_NODE=new _l;function QT(t,e){return Rn(t.name,e.name)}function ru(t,e){return Rn(t,e)}var yl;function ZT(t){yl=t}var vm=function(t){return typeof t=="number"?"number:"+Xg(t):"string:"+t},Im=function(t){if(t.isLeafNode()){let e=t.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&fe(e,".sv"),"Priority must be a string or number.")}else m(t===yl||t.isEmpty(),"priority of unexpected type.");m(t===yl||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Rg,Cn=(()=>{class t{static set __childrenNodeConstructor(n){Rg=n}static get __childrenNodeConstructor(){return Rg}constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Im(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return C(n)?this:E(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=E(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||wt(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(O(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+vm(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Xg(this.value_):n+=this.value_,this.lazyHash_=Zg(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(m(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return m(s>=0,"Unknown leaf type: "+r),m(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Em,wm;function JT(t){Em=t}function XT(t){wm=t}var vl=class extends Dn{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Rn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return w.MIN}maxPost(){return new w(Gt,new Cn("[PRIORITY-POST]",wm))}makePost(e,n){let r=Em(e);return new w(n,new Cn("[PRIORITY-POST]",r))}toString(){return".priority"}},V=new vl;var eb=Math.log(2),Il=class{constructor(e){let n=s=>parseInt(Math.log(s)/eb,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},gs=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new be(f,d.node,be.BLACK,null,null);{let p=parseInt(u/2,10)+c,g=i(c,p),_=i(p+1,l);return d=t[p],f=n?n(d):d,new be(f,d.node,be.BLACK,g,_)}},s=function(c){let l=null,u=null,d=t.length,f=function(g,_){let b=d-g,j=d;d-=g;let $=i(b+1,j),U=t[b],ce=n?n(U):U;p(new be(ce,U.node,_,null,$))},p=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),b=Math.pow(2,c.count-(g+1));_?f(b,be.BLACK):(f(b,be.BLACK),f(b,be.RED))}return u},o=new Il(t.length),a=s(o);return new pe(r||e,a)};var Xc,_n={},Tn=class t{static get Default(){return m(_n&&V,"ChildrenNode.ts has not been loaded"),Xc=Xc||new t({".priority":_n},{".priority":V}),Xc}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){let n=ut(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof pe?n:null}hasIndex(e){return fe(this.indexSet_,e.toString())}addIndex(e,n){m(e!==En,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(w.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=gs(r,e.getCompare()):a=_n;let c=e.toString(),l=D({},this.indexSet_);l[c]=e;let u=D({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=cr(this.indexes_,(i,s)=>{let o=ut(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),i===_n)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(w.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),gs(a,o.getCompare())}else return _n;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new w(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=cr(this.indexes_,i=>{if(i===_n)return i;{let s=n.get(e.name);return s?i.remove(new w(e.name,s)):i}});return new t(r,this.indexSet_)}};var Er,I=(()=>{class t{static get EMPTY_NODE(){return Er||(Er=new t(new pe(ru),null,Tn.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Im(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Er}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Er:r}}getChild(n){let r=E(n);return r===null?this:this.getImmediateChild(r).getChild(O(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(m(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new w(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Er:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=E(n);if(i===null)return r;{m(E(n)!==".priority"||wt(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(O(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(V,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+vm(this.getPriority().val())+":"),this.forEachChild(V,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Zg(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new w(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new w(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new w(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,w.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,w.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Fr?-1:0}withIndex(n){if(n===En||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===En||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(V),s=r.getIterator(V),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===En?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),El=class extends I{constructor(){super(new pe(ru),I.EMPTY_NODE,Tn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return I.EMPTY_NODE}isEmpty(){return!1}},Fr=new El;Object.defineProperties(w,{MIN:{value:new w(wn,I.EMPTY_NODE)},MAX:{value:new w(Gt,Fr)}});ps.__EMPTY_NODE=I.EMPTY_NODE;Cn.__childrenNodeConstructor=I;ZT(Fr);XT(Fr);var tb=!0;function q(t,e=null){if(t===null)return I.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Cn(n,q(e))}if(!(t instanceof Array)&&tb){let n=[],r=!1;if(oe(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=q(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new w(o,c)))}}),n.length===0)return I.EMPTY_NODE;let s=gs(n,QT,o=>o.name,ru);if(r){let o=gs(n,V.getCompare());return new I(s,q(e),new Tn({".priority":o},{".priority":V}))}else return new I(s,q(e),Tn.Default)}else{let n=I.EMPTY_NODE;return oe(t,(r,i)=>{if(fe(t,r)&&r.substring(0,1)!=="."){let s=q(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(q(e))}}JT(q);var wl=class extends Dn{constructor(e){super(),this.indexPath_=e,m(!C(e)&&E(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Rn(e.name,n.name):s}makePost(e,n){let r=q(e),i=I.EMPTY_NODE.updateChild(this.indexPath_,r);return new w(n,i)}maxPost(){let e=I.EMPTY_NODE.updateChild(this.indexPath_,Fr);return new w(Gt,e)}toString(){return mm(this.indexPath_,0).join("/")}};var Dl=class extends Dn{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Rn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return w.MIN}maxPost(){return w.MAX}makePost(e,n){let r=q(e);return new w(n,r)}toString(){return".value"}},nb=new Dl;function Dm(t){return{type:"value",snapshotNode:t}}function bn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Nr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ar(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function rb(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Mr=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Nr(n,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(bn(n,r)):o.trackChildChange(Ar(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(V,(i,s)=>{n.hasChild(i)||r.trackChildChange(Nr(i,s))}),n.isLeafNode()||n.forEachChild(V,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Ar(i,s,o))}else r.trackChildChange(bn(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?I.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var ms=class t{constructor(e){this.indexedFilter_=new Mr(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new w(n,r))||(r=I.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=I.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(I.EMPTY_NODE);let s=this;return n.forEachChild(V,(o,a)=>{s.matches(new w(o,a))||(i=i.updateImmediateChild(o,I.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Cl=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ms(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new w(n,r))||(r=I.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=I.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=I.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(I.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,I.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,p)=>d(p,f)}else o=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let c=new w(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let p=f==null?1:o(f,c);if(u&&!r.isEmpty()&&p>=0)return s?.trackChildChange(Ar(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(Nr(n,d));let _=a.updateImmediateChild(n,I.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(bn(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Nr(l.name,l.node)),s.trackChildChange(bn(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,I.EMPTY_NODE)):e}};var Tl=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=V}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wn}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===V}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function ib(t){return t.loadsAllData()?new Mr(t.getIndex()):t.hasLimit()?new Cl(t):new ms(t)}function Pg(t){let e={};if(t.isDefault())return e;let n;if(t.index_===V?n="$priority":t.index_===nb?n="$value":t.index_===En?n="$key":(m(t.index_ instanceof wl,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=H(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=H(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+H(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=H(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+H(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function xg(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==V&&(e.i=t.index_.toString()),e}var bl=class t extends ds{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Or("p:rest:"),this.listens_={}}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=Pg(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),ut(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Pg(e._queryParams),r=e._path.toString(),i=new ct;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Lt(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=gn(a.responseText)}catch{ue("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ue("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Sl=class{constructor(){this.rootNode_=I.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function _s(){return{value:null,children:new Map}}function Cm(t,e,n){if(C(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=E(e);t.children.has(r)||t.children.set(r,_s());let i=t.children.get(r);e=O(e),Cm(i,e,n)}}function Nl(t,e,n){t.value!==null?n(e,t.value):sb(t,(r,i)=>{let s=new x(e.toString()+"/"+r);Nl(i,s,n)})}function sb(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Al=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=D({},e);return this.last_&&oe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var kg=10*1e3,ob=30*1e3,ab=5*60*1e3,Ml=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Al(e);let r=kg+(ob-kg)*Math.random();Dr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;oe(e,(i,s)=>{s>0&&fe(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Dr(this.reportStats_.bind(this),Math.floor(Math.random()*2*ab))}};var He=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(He||{});function Tm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function iu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function su(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Rl=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=He.ACK_USER_WRITE,this.source=Tm()}operationForChild(e){if(C(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new x(e));return new t(N(),n,this.revert)}}else return m(E(this.path)===e,"operationForChild called for unrelated child."),new t(O(this.path),this.affectedTree,this.revert)}};var ys=class t{constructor(e,n){this.source=e,this.path=n,this.type=He.LISTEN_COMPLETE}operationForChild(e){return C(this.path)?new t(this.source,N()):new t(this.source,O(this.path))}};var Sn=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=He.OVERWRITE}operationForChild(e){return C(this.path)?new t(this.source,N(),this.snap.getImmediateChild(e)):new t(this.source,O(this.path),this.snap)}};var vs=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=He.MERGE}operationForChild(e){if(C(this.path)){let n=this.children.subtree(new x(e));return n.isEmpty()?null:n.value?new Sn(this.source,N(),n.value):new t(this.source,N(),n)}else return m(E(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,O(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var $e=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(C(e))return this.isFullyInitialized()&&!this.filtered_;let n=E(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Pl=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function cb(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(rb(o.childName,o.snapshotNode))}),wr(t,i,"child_removed",e,r,n),wr(t,i,"child_added",e,r,n),wr(t,i,"child_moved",s,r,n),wr(t,i,"child_changed",e,r,n),wr(t,i,"value",e,r,n),i}function wr(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>ub(t,a,c)),o.forEach(a=>{let c=lb(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function lb(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ub(t,e,n){if(e.childName==null||n.childName==null)throw Ot("Should only compare child_ events.");let r=new w(e.childName,e.snapshotNode),i=new w(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function xs(t,e){return{eventCache:t,serverCache:e}}function Tr(t,e,n,r){return xs(new $e(e,n,r),t.serverCache)}function bm(t,e,n,r){return xs(t.eventCache,new $e(e,n,r))}function Is(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function zt(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var el,db=()=>(el||(el=new pe(fT)),el),ae=class t{static fromObject(e){let n=new t(null);return oe(e,(r,i)=>{n=n.set(new x(r),i)}),n}constructor(e,n=db()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:N(),value:this.value};if(C(e))return null;{let r=E(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(O(e),n);return s!=null?{path:W(new x(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(C(e))return this;{let n=E(e),r=this.children.get(n);return r!==null?r.subtree(O(e)):new t(null)}}set(e,n){if(C(e))return new t(n,this.children);{let r=E(e),s=(this.children.get(r)||new t(null)).set(O(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(C(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=E(e),r=this.children.get(n);if(r){let i=r.remove(O(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(C(e))return this.value;{let n=E(e),r=this.children.get(n);return r?r.get(O(e)):null}}setTree(e,n){if(C(e))return n;{let r=E(e),s=(this.children.get(r)||new t(null)).setTree(O(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(N(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(W(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,N(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(C(e))return null;{let s=E(e),o=this.children.get(s);return o?o.findOnPath_(O(e),W(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,N(),n)}foreachOnPath_(e,n,r){if(C(e))return this;{this.value&&r(n,this.value);let i=E(e),s=this.children.get(i);return s?s.foreachOnPath_(O(e),W(n,i),r):new t(null)}}foreach(e){this.foreach_(N(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(W(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Ne=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new ae(null))}};function br(t,e,n){if(C(e))return new Ne(new ae(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=te(i,e);return s=s.updateChild(o,n),new Ne(t.writeTree_.set(i,s))}else{let i=new ae(n),s=t.writeTree_.setTree(e,i);return new Ne(s)}}}function Og(t,e,n){let r=t;return oe(n,(i,s)=>{r=br(r,W(e,i),s)}),r}function Lg(t,e){if(C(e))return Ne.empty();{let n=t.writeTree_.setTree(e,new ae(null));return new Ne(n)}}function xl(t,e){return qt(t,e)!=null}function qt(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(te(n.path,e)):null}function Fg(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(V,(r,i)=>{e.push(new w(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new w(r,i.value))}),e}function It(t,e){if(C(e))return t;{let n=qt(t,e);return n!=null?new Ne(new ae(n)):new Ne(t.writeTree_.subtree(e))}}function kl(t){return t.writeTree_.isEmpty()}function Nn(t,e){return Sm(N(),t.writeTree_,e)}function Sm(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Sm(W(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(W(t,".priority"),r)),n}}function ks(t,e){return Rm(e,t)}function fb(t,e,n,r,i){m(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=br(t.visibleWrites,e,n)),t.lastWriteId=r}function hb(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function pb(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);m(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&gb(a,r.path)?i=!1:Se(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return mb(t),!0;if(r.snap)t.visibleWrites=Lg(t.visibleWrites,r.path);else{let a=r.children;oe(a,c=>{t.visibleWrites=Lg(t.visibleWrites,W(r.path,c))})}return!0}else return!1}function gb(t,e){if(t.snap)return Se(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Se(W(t.path,n),e))return!0;return!1}function mb(t){t.visibleWrites=Nm(t.allWrites,_b,N()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _b(t){return t.visible}function Nm(t,e,n){let r=Ne.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Se(n,o)?(a=te(n,o),r=br(r,a,s.snap)):Se(o,n)&&(a=te(o,n),r=br(r,N(),s.snap.getChild(a)));else if(s.children){if(Se(n,o))a=te(n,o),r=Og(r,a,s.children);else if(Se(o,n))if(a=te(o,n),C(a))r=Og(r,N(),s.children);else{let c=ut(s.children,E(a));if(c){let l=c.getChild(O(a));r=br(r,N(),l)}}}else throw Ot("WriteRecord should have .snap or .children")}}return r}function Am(t,e,n,r,i){if(!r&&!i){let s=qt(t.visibleWrites,e);if(s!=null)return s;{let o=It(t.visibleWrites,e);if(kl(o))return n;if(n==null&&!xl(o,N()))return null;{let a=n||I.EMPTY_NODE;return Nn(o,a)}}}else{let s=It(t.visibleWrites,e);if(!i&&kl(s))return n;if(!i&&n==null&&!xl(s,N()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Se(l.path,e)||Se(e,l.path))},a=Nm(t.allWrites,o,e),c=n||I.EMPTY_NODE;return Nn(a,c)}}}function yb(t,e,n){let r=I.EMPTY_NODE,i=qt(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(V,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=It(t.visibleWrites,e);return n.forEachChild(V,(o,a)=>{let c=Nn(It(s,new x(o)),a);r=r.updateImmediateChild(o,c)}),Fg(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=It(t.visibleWrites,e);return Fg(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function vb(t,e,n,r,i){m(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=W(e,n);if(xl(t.visibleWrites,s))return null;{let o=It(t.visibleWrites,s);return kl(o)?i.getChild(n):Nn(o,i.getChild(n))}}function Ib(t,e,n,r){let i=W(e,n),s=qt(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=It(t.visibleWrites,i);return Nn(o,r.getNode().getImmediateChild(n))}else return null}function Eb(t,e){return qt(t.visibleWrites,e)}function wb(t,e,n,r,i,s,o){let a,c=It(t.visibleWrites,e),l=qt(c,N());if(l!=null)a=l;else if(n!=null)a=Nn(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),p=f.getNext();for(;p&&u.length<i;)d(p,r)!==0&&u.push(p),p=f.getNext();return u}else return[]}function Db(){return{visibleWrites:Ne.empty(),allWrites:[],lastWriteId:-1}}function Es(t,e,n,r){return Am(t.writeTree,t.treePath,e,n,r)}function ou(t,e){return yb(t.writeTree,t.treePath,e)}function Vg(t,e,n,r){return vb(t.writeTree,t.treePath,e,n,r)}function ws(t,e){return Eb(t.writeTree,W(t.treePath,e))}function Cb(t,e,n,r,i,s){return wb(t.writeTree,t.treePath,e,n,r,i,s)}function au(t,e,n){return Ib(t.writeTree,t.treePath,e,n)}function Mm(t,e){return Rm(W(t.treePath,e),t.writeTree)}function Rm(t,e){return{treePath:t,writeTree:e}}var Ol=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;m(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),m(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ar(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Nr(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,bn(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ar(r,e.snapshotNode,i.oldSnap));else throw Ot("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Ll=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Pm=new Ll,Rr=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new $e(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return au(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zt(this.viewCache_),s=Cb(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function Tb(t){return{filter:t}}function bb(t,e){m(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Sb(t,e,n,r,i){let s=new Ol,o,a;if(n.type===He.OVERWRITE){let l=n;l.source.fromUser?o=Fl(t,e,l.path,l.snap,r,i,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!C(l.path),o=Ds(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===He.MERGE){let l=n;l.source.fromUser?o=Ab(t,e,l.path,l.children,r,i,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Vl(t,e,l.path,l.children,r,i,a,s))}else if(n.type===He.ACK_USER_WRITE){let l=n;l.revert?o=Pb(t,e,l.path,r,i,s):o=Mb(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===He.LISTEN_COMPLETE)o=Rb(t,e,n.path,r,s);else throw Ot("Unknown operation type: "+n.type);let c=s.getChanges();return Nb(e,o,c),{viewCache:o,changes:c}}function Nb(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Is(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Dm(Is(e)))}}function xm(t,e,n,r,i,s){let o=e.eventCache;if(ws(r,n)!=null)return e;{let a,c;if(C(n))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=zt(e),u=l instanceof I?l:I.EMPTY_NODE,d=ou(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Es(r,zt(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=E(n);if(l===".priority"){m(wt(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=Vg(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=O(n),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let f=Vg(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=au(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Tr(e,a,o.isFullyInitialized()||C(n),t.filter.filtersNodes())}}function Ds(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if(C(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let p=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),p,null)}else{let p=E(n);if(!c.isCompleteForPath(n)&&wt(n)>1)return e;let g=O(n),b=c.getNode().getImmediateChild(p).updateChild(g,r);p===".priority"?l=u.updatePriority(c.getNode(),b):l=u.updateChild(c.getNode(),p,b,g,Pm,null)}let d=bm(e,l,c.isFullyInitialized()||C(n),u.filtersNodes()),f=new Rr(i,d,s);return xm(t,d,n,i,f,a)}function Fl(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new Rr(i,e,s);if(C(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Tr(e,l,!0,t.filter.filtersNodes());else{let d=E(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Tr(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=O(n),p=a.getNode().getImmediateChild(d),g;if(C(f))g=r;else{let _=u.getCompleteChild(d);_!=null?gm(f)===".priority"&&_.getChild(_m(f)).isEmpty()?g=_:g=_.updateChild(f,r):g=I.EMPTY_NODE}if(p.equals(g))c=e;else{let _=t.filter.updateChild(a.getNode(),d,g,f,u,o);c=Tr(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Ug(t,e){return t.eventCache.isCompleteForChild(e)}function Ab(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=W(n,c);Ug(e,E(u))&&(a=Fl(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=W(n,c);Ug(e,E(u))||(a=Fl(t,a,u,l,i,s,o))}),a}function jg(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Vl(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;C(n)?l=r:l=new ae(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let p=e.serverCache.getNode().getImmediateChild(d),g=jg(t,p,f);c=Ds(t,c,new x(d),g,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{let p=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!p){let g=e.serverCache.getNode().getImmediateChild(d),_=jg(t,g,f);c=Ds(t,c,new x(d),_,i,s,o,a)}}),c}function Mb(t,e,n,r,i,s,o){if(ws(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(C(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ds(t,e,n,c.getNode().getChild(n),i,s,a,o);if(C(n)){let l=new ae(null);return c.getNode().forEachChild(En,(u,d)=>{l=l.set(new x(u),d)}),Vl(t,e,n,l,i,s,a,o)}else return e}else{let l=new ae(null);return r.foreach((u,d)=>{let f=W(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Vl(t,e,n,l,i,s,a,o)}}function Rb(t,e,n,r,i){let s=e.serverCache,o=bm(e,s.getNode(),s.isFullyInitialized()||C(n),s.isFiltered());return xm(t,o,n,r,Pm,i)}function Pb(t,e,n,r,i,s){let o;if(ws(r,n)!=null)return e;{let a=new Rr(r,e,i),c=e.eventCache.getNode(),l;if(C(n)||E(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Es(r,zt(e));else{let d=e.serverCache.getNode();m(d instanceof I,"serverChildren would be complete if leaf node"),u=ou(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=E(n),d=au(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,O(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,I.EMPTY_NODE,O(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Es(r,zt(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||ws(r,N())!=null,Tr(e,l,o,t.filter.filtersNodes())}}var Ul=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Mr(r.getIndex()),s=ib(r);this.processor_=Tb(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(I.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(I.EMPTY_NODE,a.getNode(),null),u=new $e(c,o.isFullyInitialized(),i.filtersNodes()),d=new $e(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=xs(d,u),this.eventGenerator_=new Pl(this.query_)}get query(){return this.query_}};function xb(t){return t.viewCache_.serverCache.getNode()}function kb(t){return Is(t.viewCache_)}function Ob(t,e){let n=zt(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!C(e)&&!n.getImmediateChild(E(e)).isEmpty())?n.getChild(e):null}function Bg(t){return t.eventRegistrations_.length===0}function Lb(t,e){t.eventRegistrations_.push(e)}function Hg(t,e,n){let r=[];if(n){m(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function $g(t,e,n,r){e.type===He.MERGE&&e.source.queryId!==null&&(m(zt(t.viewCache_),"We should always have a full cache before handling merges"),m(Is(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=Sb(t.processor_,i,e,n,r);return bb(t.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,km(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Fb(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(V,(s,o)=>{r.push(bn(s,o))}),n.isFullyInitialized()&&r.push(Dm(n.getNode())),km(t,r,n.getNode(),e)}function km(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return cb(t.eventGenerator_,e,n,i)}var Cs,Ts=class{constructor(){this.views=new Map}};function Vb(t){m(!Cs,"__referenceConstructor has already been defined"),Cs=t}function Ub(){return m(Cs,"Reference.ts has not been loaded"),Cs}function jb(t){return t.views.size===0}function cu(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return m(s!=null,"SyncTree gave us an op for an invalid query."),$g(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat($g(o,e,n,r));return s}}function Om(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Es(n,i?r:null),c=!1;a?c=!0:r instanceof I?(a=ou(n,r),c=!1):(a=I.EMPTY_NODE,c=!1);let l=xs(new $e(a,c,!1),new $e(r,i,!1));return new Ul(e,l)}return o}function Bb(t,e,n,r,i,s){let o=Om(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Lb(o,n),Fb(o,n)}function Hb(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=Dt(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(Hg(l,n,r)),Bg(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(Hg(c,n,r)),Bg(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Dt(t)&&s.push(new(Ub())(e._repo,e._path)),{removed:s,events:o}}function Lm(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Et(t,e){let n=null;for(let r of t.views.values())n=n||Ob(r,e);return n}function Fm(t,e){if(e._queryParams.loadsAllData())return Os(t);{let r=e._queryIdentifier;return t.views.get(r)}}function Vm(t,e){return Fm(t,e)!=null}function Dt(t){return Os(t)!=null}function Os(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var bs;function $b(t){m(!bs,"__referenceConstructor has already been defined"),bs=t}function Wb(){return m(bs,"Reference.ts has not been loaded"),bs}var Gb=1,Ss=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ae(null),this.pendingWriteTree_=Db(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Um(t,e,n,r,i){return fb(t.pendingWriteTree_,e,n,r,i),i?Ur(t,new Sn(Tm(),e,n)):[]}function vn(t,e,n=!1){let r=hb(t.pendingWriteTree_,e);if(pb(t.pendingWriteTree_,e)){let s=new ae(null);return r.snap!=null?s=s.set(N(),!0):oe(r.children,o=>{s=s.set(new x(o),!0)}),Ur(t,new Rl(r.path,s,n))}else return[]}function Vr(t,e,n){return Ur(t,new Sn(iu(),e,n))}function zb(t,e,n){let r=ae.fromObject(n);return Ur(t,new vs(iu(),e,r))}function qb(t,e){return Ur(t,new ys(iu(),e))}function Yb(t,e,n){let r=uu(t,n);if(r){let i=du(r),s=i.path,o=i.queryId,a=te(s,e),c=new ys(su(o),a);return fu(t,s,c)}else return[]}function Ns(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||Vm(o,e))){let c=Hb(o,e,n,r);jb(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,p)=>Dt(p));if(u&&!d){let f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){let p=Zb(f);for(let g=0;g<p.length;++g){let _=p[g],b=_.query,j=$m(t,_);t.listenProvider_.startListening(Sr(b),Pr(t,b),j.hashFn,j.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Sr(e),null):l.forEach(f=>{let p=t.queryToTagMap.get(Ls(f));t.listenProvider_.stopListening(Sr(f),p)}))}Jb(t,l)}return a}function jm(t,e,n,r){let i=uu(t,r);if(i!=null){let s=du(i),o=s.path,a=s.queryId,c=te(o,e),l=new Sn(su(a),c,n);return fu(t,o,l)}else return[]}function Kb(t,e,n,r){let i=uu(t,r);if(i){let s=du(i),o=s.path,a=s.queryId,c=te(o,e),l=ae.fromObject(n),u=new vs(su(a),c,l);return fu(t,o,u)}else return[]}function jl(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,p)=>{let g=te(f,i);s=s||Et(p,g),o=o||Dt(p)});let a=t.syncPointTree_.get(i);a?(o=o||Dt(a),s=s||Et(a,N())):(a=new Ts,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=I.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((p,g)=>{let _=Et(g,N());_&&(s=s.updateImmediateChild(p,_))}));let l=Vm(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Ls(e);m(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let p=Xb();t.queryToTagMap.set(f,p),t.tagToQueryMap.set(p,f)}let u=ks(t.pendingWriteTree_,i),d=Bb(a,e,n,u,s,c);if(!l&&!o&&!r){let f=Fm(a,e);d=d.concat(eS(t,e,f))}return d}function lu(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=te(o,e),l=Et(a,c);if(l)return l});return Am(i,e,s,n,!0)}function Qb(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=te(l,n);r=r||Et(u,d)});let i=t.syncPointTree_.get(n);i?r=r||Et(i,N()):(i=new Ts,t.syncPointTree_=t.syncPointTree_.set(n,i));let s=r!=null,o=s?new $e(r,!0,!1):null,a=ks(t.pendingWriteTree_,e._path),c=Om(i,e,a,s?o.getNode():I.EMPTY_NODE,s);return kb(c)}function Ur(t,e){return Bm(e,t.syncPointTree_,null,ks(t.pendingWriteTree_,N()))}function Bm(t,e,n,r){if(C(t.path))return Hm(t,e,n,r);{let i=e.get(N());n==null&&i!=null&&(n=Et(i,N()));let s=[],o=E(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=Mm(r,o);s=s.concat(Bm(a,c,l,u))}return i&&(s=s.concat(cu(i,t,r,n))),s}}function Hm(t,e,n,r){let i=e.get(N());n==null&&i!=null&&(n=Et(i,N()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=Mm(r,o),u=t.operationForChild(o);u&&(s=s.concat(Hm(u,a,c,l)))}),i&&(s=s.concat(cu(i,t,r,n))),s}function $m(t,e){let n=e.query,r=Pr(t,n);return{hashFn:()=>(xb(e)||I.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Yb(t,n._path,r):qb(t,n._path);{let s=gT(i,n);return Ns(t,n,null,s)}}}}function Pr(t,e){let n=Ls(e);return t.queryToTagMap.get(n)}function Ls(t){return t._path.toString()+"$"+t._queryIdentifier}function uu(t,e){return t.tagToQueryMap.get(e)}function du(t){let e=t.indexOf("$");return m(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new x(t.substr(0,e))}}function fu(t,e,n){let r=t.syncPointTree_.get(e);m(r,"Missing sync point for query tag that we're tracking");let i=ks(t.pendingWriteTree_,e);return cu(r,n,i,null)}function Zb(t){return t.fold((e,n,r)=>{if(n&&Dt(n))return[Os(n)];{let i=[];return n&&(i=Lm(n)),oe(r,(s,o)=>{i=i.concat(o)}),i}})}function Sr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Wb())(t._repo,t._path):t}function Jb(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Ls(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Xb(){return Gb++}function eS(t,e,n){let r=e._path,i=Pr(t,e),s=$m(t,n),o=t.listenProvider_.startListening(Sr(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)m(!Dt(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!C(l)&&u&&Dt(u))return[Os(u).query];{let f=[];return u&&(f=f.concat(Lm(u).map(p=>p.query))),oe(d,(p,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Sr(u),Pr(t,u))}}return o}var Bl=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Hl=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=W(this.path_,e);return new t(this.syncTree_,n)}node(){return lu(this.syncTree_,this.path_)}},tS=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Wg=function(t,e,n){if(!t||typeof t!="object")return t;if(m(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return nS(t[".sv"],e,n);if(typeof t[".sv"]=="object")return rS(t[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},nS=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:m(!1,"Unexpected server value: "+t)}},rS=function(t,e,n){t.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&m(!1,"Unexpected increment value: "+r);let i=e.node();if(m(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},iS=function(t,e,n,r){return hu(e,new Hl(n,t),r)},Wm=function(t,e,n){return hu(t,new Bl(e),n)};function hu(t,e,n){let r=t.getPriority().val(),i=Wg(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=Wg(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Cn(a,q(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Cn(i))),o.forEachChild(V,(a,c)=>{let l=hu(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var xr=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Fs(t,e){let n=e instanceof x?e:new x(e),r=t,i=E(n);for(;i!==null;){let s=ut(r.node.children,i)||{children:{},childCount:0};r=new xr(i,r,s),n=O(n),i=E(n)}return r}function Yt(t){return t.node.value}function pu(t,e){t.node.value=e,$l(t)}function Gm(t){return t.node.childCount>0}function sS(t){return Yt(t)===void 0&&!Gm(t)}function Vs(t,e){oe(t.node.children,(n,r)=>{e(new xr(n,t,r))})}function zm(t,e,n,r){n&&!r&&e(t),Vs(t,i=>{zm(i,e,!0,r)}),n&&r&&e(t)}function oS(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function jr(t){return new x(t.parent===null?t.name:jr(t.parent)+"/"+t.name)}function $l(t){t.parent!==null&&aS(t.parent,t.name,t)}function aS(t,e,n){let r=sS(n),i=fe(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,$l(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,$l(t))}var cS=/[\[\].#$\/\u0000-\u001F\u007F]/,lS=/[\[\].#$\u0000-\u001F\u007F]/,tl=10*1024*1024,qm=function(t){return typeof t=="string"&&t.length!==0&&!cS.test(t)},Ym=function(t){return typeof t=="string"&&t.length!==0&&!lS.test(t)},uS=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ym(t)},dS=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Jl(t)||t&&typeof t=="object"&&fe(t,".sv")};var gu=function(t,e,n){let r=n instanceof x?new gl(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ht(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ht(r)+" with contents = "+e.toString());if(Jl(e))throw new Error(t+"contains "+e.toString()+" "+Ht(r));if(typeof e=="string"&&e.length>tl/3&&lr(e)>tl)throw new Error(t+"contains a string greater than "+tl+" utf8 bytes "+Ht(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(oe(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!qm(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ht(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);WT(r,o),gu(t,a,r),GT(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ht(r)+" in addition to actual children.")}};var Km=function(t,e,n,r){if(!(r&&n===void 0)&&!Ym(n))throw new Error(ac(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},fS=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Km(t,e,n,r)},hS=function(t,e){if(E(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},pS=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!uS(n))throw new Error(ac(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Wl=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Qm(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!tu(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Zm(t,e,n){Qm(t,n),Jm(t,r=>tu(r,e))}function tt(t,e,n){Qm(t,n),Jm(t,r=>Se(r,e)||Se(e,r))}function Jm(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(gS(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function gS(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Wt&&J("event: "+n.toString()),Lr(r)}}}var mS="repo_interrupt",_S=25,Gl=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_s(),this.transactionQueueTree_=new xr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function yS(t,e,n){if(t.stats_=eu(t.repoInfo_),t.forceRestClient_||vT())t.server_=new bl(t.repoInfo_,(r,i,s,o)=>{Gg(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>zg(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{H(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new nu(t.repoInfo_,e,(r,i,s,o)=>{Gg(t,r,i,s,o)},r=>{zg(t,r)},r=>{IS(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=ET(t.repoInfo_,()=>new Ml(t.stats_,t.server_)),t.infoData_=new Sl,t.infoSyncTree_=new Ss({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Vr(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),_u(t,"connected",!1),t.serverSyncTree_=new Ss({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);tt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function vS(t){let n=t.infoData_.getNode(new x(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function mu(t){return tS({timestamp:vS(t)})}function Gg(t,e,n,r,i){t.dataUpdateCount++;let s=new x(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=cr(n,l=>q(l));o=Kb(t.serverSyncTree_,s,c,i)}else{let c=q(n);o=jm(t.serverSyncTree_,s,c,i)}else if(r){let c=cr(n,l=>q(l));o=zb(t.serverSyncTree_,s,c)}else{let c=q(n);o=Vr(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=vu(t,s)),tt(t.eventQueue_,a,o)}function zg(t,e){_u(t,"connected",e),e===!1&&wS(t)}function IS(t,e){oe(e,(n,r)=>{_u(t,n,r)})}function _u(t,e,n){let r=new x("/.info/"+e),i=q(n);t.infoData_.updateSnapshot(r,i);let s=Vr(t.infoSyncTree_,r,i);tt(t.eventQueue_,r,s)}function Xm(t){return t.nextWriteId_++}function ES(t,e,n){let r=Qb(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let s=q(i).withIndex(e._queryParams.getIndex());jl(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Vr(t.serverSyncTree_,e._path,s);else{let a=Pr(t.serverSyncTree_,e);o=jm(t.serverSyncTree_,e._path,s,a)}return tt(t.eventQueue_,e._path,o),Ns(t.serverSyncTree_,e,n,null,!0),s},i=>(Us(t,"get for query "+H(e)+" failed: "+i),Promise.reject(new Error(i))))}function wS(t){Us(t,"onDisconnectEvents");let e=mu(t),n=_s();Nl(t.onDisconnect_,N(),(i,s)=>{let o=iS(i,s,t.serverSyncTree_,e);Cm(n,i,o)});let r=[];Nl(n,N(),(i,s)=>{r=r.concat(Vr(t.serverSyncTree_,i,s));let o=NS(t,i);vu(t,o)}),t.onDisconnect_=_s(),tt(t.eventQueue_,N(),r)}function DS(t,e,n){let r;E(e._path)===".info"?r=jl(t.infoSyncTree_,e,n):r=jl(t.serverSyncTree_,e,n),Zm(t.eventQueue_,e._path,r)}function qg(t,e,n){let r;E(e._path)===".info"?r=Ns(t.infoSyncTree_,e,n):r=Ns(t.serverSyncTree_,e,n),Zm(t.eventQueue_,e._path,r)}function CS(t){t.persistentConnection_&&t.persistentConnection_.interrupt(mS)}function Us(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),J(n,...e)}function TS(t,e,n,r,i,s){Us(t,"transaction on "+e);let o={path:e,update:n,onComplete:r,status:null,order:Qg(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=yu(t,e,void 0);o.currentInputSnapshot=a;let c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{gu("transaction failed: Data returned ",c,o.path),o.status=0;let l=Fs(t.transactionQueueTree_,e),u=Yt(l)||[];u.push(o),pu(l,u);let d;typeof c=="object"&&c!==null&&fe(c,".priority")?(d=ut(c,".priority"),m(dS(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(lu(t.serverSyncTree_,e)||I.EMPTY_NODE).getPriority().val();let f=mu(t),p=q(c,d),g=Wm(p,a,f);o.currentOutputSnapshotRaw=p,o.currentOutputSnapshotResolved=g,o.currentWriteId=Xm(t);let _=Um(t.serverSyncTree_,e,g,o.currentWriteId,o.applyLocally);tt(t.eventQueue_,e,_),js(t,t.transactionQueueTree_)}}function yu(t,e,n){return lu(t.serverSyncTree_,e,n)||I.EMPTY_NODE}function js(t,e=t.transactionQueueTree_){if(e||Bs(t,e),Yt(e)){let n=t_(t,e);m(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&bS(t,jr(e),n)}else Gm(e)&&Vs(e,n=>{js(t,n)})}function bS(t,e,n){let r=n.map(l=>l.currentWriteId),i=yu(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=te(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Us(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(vn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Bs(t,Fs(t.transactionQueueTree_,e)),js(t,t.transactionQueueTree_),tt(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Lr(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ue("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}vu(t,e)}},o)}function vu(t,e){let n=e_(t,e),r=jr(n),i=t_(t,n);return SS(t,i,r),r}function SS(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=te(n,c.path),u=!1,d;if(m(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(vn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=_S)u=!0,d="maxretry",i=i.concat(vn(t.serverSyncTree_,c.currentWriteId,!0));else{let f=yu(t,c.path,o);c.currentInputSnapshot=f;let p=e[a].update(f.val());if(p!==void 0){gu("transaction failed: Data returned ",p,c.path);let g=q(p);typeof p=="object"&&p!=null&&fe(p,".priority")||(g=g.updatePriority(f.getPriority()));let b=c.currentWriteId,j=mu(t),$=Wm(g,f,j);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=$,c.currentWriteId=Xm(t),o.splice(o.indexOf(b),1),i=i.concat(Um(t.serverSyncTree_,c.path,$,c.currentWriteId,c.applyLocally)),i=i.concat(vn(t.serverSyncTree_,b,!0))}else u=!0,d="nodata",i=i.concat(vn(t.serverSyncTree_,c.currentWriteId,!0))}tt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Bs(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Lr(r[a]);js(t,t.transactionQueueTree_)}function e_(t,e){let n,r=t.transactionQueueTree_;for(n=E(e);n!==null&&Yt(r)===void 0;)r=Fs(r,n),e=O(e),n=E(e);return r}function t_(t,e){let n=[];return n_(t,e,n),n.sort((r,i)=>r.order-i.order),n}function n_(t,e,n){let r=Yt(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Vs(e,i=>{n_(t,i,n)})}function Bs(t,e){let n=Yt(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,pu(e,n.length>0?n:void 0)}Vs(e,r=>{Bs(t,r)})}function NS(t,e){let n=jr(e_(t,e)),r=Fs(t.transactionQueueTree_,e);return oS(r,i=>{nl(t,i)}),nl(t,r),zm(r,i=>{nl(t,i)}),n}function nl(t,e){let n=Yt(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(m(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(vn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?pu(e,void 0):n.length=s+1,tt(t.eventQueue_,jr(e),i);for(let o=0;o<r.length;o++)Lr(r[o])}}function AS(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function MS(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ue(`Invalid query segment '${n}' in query '${t}'`)}return e}var Yg=function(t,e){let n=RS(t),r=n.namespace;n.domain==="firebase.com"&&et(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&et("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||uT();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ls(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new x(n.pathString)}},RS=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=AS(t.substring(u,d)));let f=MS(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let p=e.slice(0,l);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var As=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+H(this.snapshot.exportVal())}},Ms=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Rs=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var zl=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return C(this._path)?null:gm(this._path)}get ref(){return new Ae(this._repo,this._path)}get _queryIdentifier(){let e=xg(this._queryParams),n=Xl(e);return n==="{}"?"default":n}get _queryObject(){return xg(this._queryParams)}isEqual(e){if(e=ee(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=tu(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+$T(this._path)}};var Ae=class t extends zl{constructor(e,n){super(e,n,new Tl,!1)}get parent(){let e=_m(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},An=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new x(e),r=Mn(this.ref,e);return new t(this._node.getChild(n),r,V)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Mn(this.ref,r),V)))}hasChild(e){let n=new x(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Iu(t,e){return t=ee(t),t._checkNotDeleted("ref"),e!==void 0?Mn(t._root,e):t._root}function Mn(t,e){return t=ee(t),E(t._path)===null?fS("child","path",e,!1):Km("child","path",e,!1),new Ae(t._repo,W(t._path,e))}function r_(t){t=ee(t);let e=new Rs(()=>{}),n=new Ps(e);return ES(t._repo,t,n).then(r=>new An(r,new Ae(t._repo,t._path),t._queryParams.getIndex()))}var Ps=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new As("value",this,new An(e.snapshotNode,new Ae(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Ms(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},ql=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Ms(this,e,n):null}createEvent(e,n){m(e.childName!=null,"Child events should have a childName.");let r=Mn(new Ae(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new As(e.type,this,new An(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function PS(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{qg(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Rs(n,s||void 0),a=e==="value"?new Ps(o):new ql(e,o);return DS(t._repo,t,a),()=>qg(t._repo,t,a)}function Eu(t,e,n,r){return PS(t,"value",e,n,r)}Vb(Ae);$b(Ae);var xS="FIREBASE_DATABASE_EMULATOR_HOST",Yl={},kS=!1;function OS(t,e,n,r){let i=e.lastIndexOf(":"),s=e.substring(0,i),o=lt(s);t.repoInfo_=new ls(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function LS(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||et("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),J("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Yg(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[xS]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=Yg(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new Cr(Cr.OWNER):new cl(t.name,t.options,e);pS("Invalid Firebase Database URL",o),C(o.path)||et("Database URL must point to the root of a Firebase Database (not including a child path).");let d=VS(a,t,u,new al(t,n));return new Kl(d,t)}function FS(t,e){let n=Yl[e];(!n||n[t.key]!==t)&&et(`Database ${e}(${t.repoInfo_}) has already been deleted.`),CS(t),delete n[t.key]}function VS(t,e,n,r){let i=Yl[e.name];i||(i={},Yl[e.name]=i);let s=i[t.toURLString()];return s&&et("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Gl(t,kS,n,r),i[t.toURLString()]=s,s}var Kl=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ae(this._repo,N())),this._rootInternal}_delete(){return this._rootInternal!==null&&(FS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&et("Cannot call "+e+" on a deleted database.")}};function i_(t=ji(),e){let n=fr(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Qh("database");r&&US(n,...r)}return n}function US(t,e,n,r={}){t=ee(t),t._checkNotDeleted("useEmulator");let i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Ue(r,s.repoInfo_.emulatorOptions))return;et("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&et('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Cr(Cr.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:Zh(r.mockUserToken,t.app.options.projectId);o=new Cr(a)}lt(e)&&(ki(e),Oi("Database",!0)),OS(s,i,r,o)}function jS(t){cT(pt),ht(new he("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return LS(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Te(mg,_g,t),Te(mg,_g,"esm2020")}var Ql=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function s_(t,e,n){if(t=ee(t),hS("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let r=n?.applyLocally??!0,i=new ct,s=(a,c,l)=>{let u=null;a?i.reject(a):(u=new An(l,new Ae(t._repo,t._path),V),i.resolve(new Ql(c,u)))},o=Eu(t,()=>{});return TS(t._repo,t._path,e,s,o,r),i.promise}nu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};nu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};jS();function BS(t,e){if(t&1&&(X(0,"div",15)(1,"div",16),De(2),se(),X(3,"div",17),De(4),se()()),t&2){let n=e.$implicit;Fe(2),ot(n.label),Fe(2),ot(n.count)}}var HS={apiKey:"AIzaSyBjDvBqWHphOtEiI94ruYeRTXdaeeMRTQs",authDomain:"bettermescratchpad.firebaseapp.com",databaseURL:"https://bettermescratchpad-default-rtdb.firebaseio.com",projectId:"bettermescratchpad",storageBucket:"bettermescratchpad.firebasestorage.app",messagingSenderId:"516986845541",appId:"1:516986845541:web:75cd67831a7cc9d8f1498c",measurementId:"G-QLQBD1T7YC"},c_=!1,o_=t=>String(t).padStart(2,"0"),a_=t=>`${t.getFullYear()}-${o_(t.getMonth()+1)}-${o_(t.getDate())}`,$S=t=>t.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"}),WS=t=>{let e=new Date(t);return e.setHours(0,0,0,0),e},Hs=(t,e)=>{let n=new Date(t);return n.setDate(n.getDate()+e),n},wu=t=>{let e=t.getDay(),n=c_?e:e===0?6:e-1,r=new Date(t);return r.setHours(0,0,0,0),r.setDate(r.getDate()-n),r},l_=(()=>{class t{constructor(){this.status="Connecting\u2026",this.todayLabel="",this.todayCount="\u2014",this.rangeLabel="",this.weekDays=[],this.tapBusy=!1,this.enableRealtime=!0,this.today=WS(new Date),this.viewingWeekStart=wu(this.today),this.app=Ec(HS),this.auth=Kc(this.app),this.db=i_(this.app),this.uid=null,this.dayNames=c_?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.todayLabel=`Today \u2022 ${$S(this.today)}`,this.prepareWeekDays()}ngOnInit(){if(!this.enableRealtime){this.status="";return}this.authUnsubscribe=qc(this.auth,n=>h(this,null,function*(){if(!n){yield zc(this.auth);return}this.uid=n.uid,this.status="",this.attachTodayListener(),this.renderWeek()}))}ngOnDestroy(){this.todayUnsubscribe?.(),this.authUnsubscribe?.()}get canGoNextWeek(){return wu(this.today).getTime()>this.viewingWeekStart.getTime()}tap(){return h(this,null,function*(){if(!(!this.todayRef||!this.uid)){this.tapBusy=!0;try{yield s_(this.todayRef,n=>(n||0)+1)}catch(n){console.error("Increment failed",n),this.status="Increment failed. Please try again."}finally{this.tapBusy=!1}}})}prevWeek(){this.setViewingWeek(Hs(this.viewingWeekStart,-7))}nextWeek(){if(!this.canGoNextWeek)return;let n=Hs(this.viewingWeekStart,7),r=wu(this.today);this.setViewingWeek(n>r?r:n)}setViewingWeek(n){this.viewingWeekStart=n,this.prepareWeekDays(),this.renderWeek()}prepareWeekDays(){this.updateRangeLabel(),this.weekDays=Array.from({length:7},(n,r)=>{let i=Hs(this.viewingWeekStart,r);return{label:this.dayNames[r],key:a_(i),count:"\u2014"}})}renderWeek(){return h(this,null,function*(){if(!this.uid)return;let n=Iu(this.db,`users/${this.uid}/daily`),r=yield Promise.all(this.weekDays.map(i=>r_(Mn(n,`${i.key}/count`))));this.weekDays=this.weekDays.map((i,s)=>G(D({},i),{count:r[s].exists()?r[s].val():0}))})}attachTodayListener(){if(!this.uid)return;let n=a_(this.today);this.todayRef=Iu(this.db,`users/${this.uid}/daily/${n}/count`),this.todayUnsubscribe?.(),this.todayUnsubscribe=Eu(this.todayRef,r=>{let i=r.exists()?r.val():0;this.todayCount=i;let s=this.weekDays.findIndex(o=>o.key===n);s>=0&&(this.weekDays=this.weekDays.map((o,a)=>a===s?G(D({},o),{count:i}):o))})}updateRangeLabel(){let n=this.viewingWeekStart,r=Hs(n,6);this.rangeLabel=`${n.toLocaleDateString(void 0,{month:"short",day:"numeric"})} \u2013 ${r.toLocaleDateString(void 0,{month:"short",day:"numeric"})}`}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=$d({type:t,selectors:[["app-root"]],standalone:!0,features:[Dh],decls:24,vars:7,consts:[[1,"app"],[1,"title"],[1,"today"],[1,"week-label"],[1,"count"],[1,"tap",3,"click","disabled"],[1,"status"],[1,"week"],["aria-hidden","true",1,"week-label"],[1,"range-label"],[1,"week-strip"],["class","day",4,"ngFor","ngForOf"],[1,"week-nav"],["aria-label","Previous week",1,"btn",3,"click"],["aria-label","Next week",1,"btn",3,"click","disabled"],[1,"day"],[1,"dow"],[1,"mini"]],template:function(r,i){r&1&&(X(0,"main",0)(1,"header")(2,"div",1),De(3,"Times You Gained Control"),se()(),X(4,"section",2)(5,"div",3),De(6),se(),X(7,"div",4),De(8),se(),X(9,"button",5),er("click",function(){return i.tap()}),De(10,"+1"),se(),X(11,"div",6),De(12),se()(),X(13,"section",7),Oa(14,"div",8),X(15,"div",9),De(16),se(),X(17,"div",10),ka(18,BS,5,2,"div",11),se()(),X(19,"div",12)(20,"button",13),er("click",function(){return i.prevWeek()}),De(21,"\u2039"),se(),X(22,"button",14),er("click",function(){return i.nextWeek()}),De(23,"\u203A"),se()()()),r&2&&(Fe(6),ot(i.todayLabel),Fe(2),ot(i.todayCount),Fe(),Xn("disabled",i.tapBusy||!i.uid),Fe(3),ot(i.status||" "),Fe(4),ot(i.rangeLabel),Fe(2),Xn("ngForOf",i.weekDays),Fe(4),Xn("disabled",!i.canGoNextWeek))},dependencies:[$a,xh]})}}return t})();Hh(l_,$h).catch(t=>console.error(t));
